
// THIS FILE IS AUTO GENERATED!
const lib = "Ly8gbW9kdWxlcyBhcmUgZGVmaW5lZCBhcyBhbiBhcnJheQovLyBbIG1vZHVsZSBmdW5jdGlvbiwgbWFwIG9mIHJlcXVpcmVzIF0KLy8KLy8gbWFwIG9mIHJlcXVpcmVzIGlzIHNob3J0IHJlcXVpcmUgbmFtZSAtPiBudW1lcmljIHJlcXVpcmUKLy8KLy8gYW55dGhpbmcgZGVmaW5lZCBpbiBhIHByZXZpb3VzIGJ1bmRsZSBpcyBhY2Nlc3NlZCB2aWEgdGhlCi8vIG9yaWcgbWV0aG9kIHdoaWNoIGlzIHRoZSByZXF1aXJlIGZvciBwcmV2aW91cyBidW5kbGVzCgovLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZ2xvYmFsLWFzc2lnbgpwYXJjZWxSZXF1aXJlID0gKGZ1bmN0aW9uIChtb2R1bGVzLCBjYWNoZSwgZW50cnksIGdsb2JhbE5hbWUpIHsKICAvLyBTYXZlIHRoZSByZXF1aXJlIGZyb20gcHJldmlvdXMgYnVuZGxlIHRvIHRoaXMgY2xvc3VyZSBpZiBhbnkKICB2YXIgcHJldmlvdXNSZXF1aXJlID0gdHlwZW9mIHBhcmNlbFJlcXVpcmUgPT09ICdmdW5jdGlvbicgJiYgcGFyY2VsUmVxdWlyZTsKICB2YXIgbm9kZVJlcXVpcmUgPSB0eXBlb2YgcmVxdWlyZSA9PT0gJ2Z1bmN0aW9uJyAmJiByZXF1aXJlOwoKICBmdW5jdGlvbiBuZXdSZXF1aXJlKG5hbWUsIGp1bXBlZCkgewogICAgaWYgKCFjYWNoZVtuYW1lXSkgewogICAgICBpZiAoIW1vZHVsZXNbbmFtZV0pIHsKICAgICAgICAvLyBpZiB3ZSBjYW5ub3QgZmluZCB0aGUgbW9kdWxlIHdpdGhpbiBvdXIgaW50ZXJuYWwgbWFwIG9yCiAgICAgICAgLy8gY2FjaGUganVtcCB0byB0aGUgY3VycmVudCBnbG9iYWwgcmVxdWlyZSBpZS4gdGhlIGxhc3QgYnVuZGxlCiAgICAgICAgLy8gdGhhdCB3YXMgYWRkZWQgdG8gdGhlIHBhZ2UuCiAgICAgICAgdmFyIGN1cnJlbnRSZXF1aXJlID0gdHlwZW9mIHBhcmNlbFJlcXVpcmUgPT09ICdmdW5jdGlvbicgJiYgcGFyY2VsUmVxdWlyZTsKICAgICAgICBpZiAoIWp1bXBlZCAmJiBjdXJyZW50UmVxdWlyZSkgewogICAgICAgICAgcmV0dXJuIGN1cnJlbnRSZXF1aXJlKG5hbWUsIHRydWUpOwogICAgICAgIH0KCiAgICAgICAgLy8gSWYgdGhlcmUgYXJlIG90aGVyIGJ1bmRsZXMgb24gdGhpcyBwYWdlIHRoZSByZXF1aXJlIGZyb20gdGhlCiAgICAgICAgLy8gcHJldmlvdXMgb25lIGlzIHNhdmVkIHRvICdwcmV2aW91c1JlcXVpcmUnLiBSZXBlYXQgdGhpcyBhcwogICAgICAgIC8vIG1hbnkgdGltZXMgYXMgdGhlcmUgYXJlIGJ1bmRsZXMgdW50aWwgdGhlIG1vZHVsZSBpcyBmb3VuZCBvcgogICAgICAgIC8vIHdlIGV4aGF1c3QgdGhlIHJlcXVpcmUgY2hhaW4uCiAgICAgICAgaWYgKHByZXZpb3VzUmVxdWlyZSkgewogICAgICAgICAgcmV0dXJuIHByZXZpb3VzUmVxdWlyZShuYW1lLCB0cnVlKTsKICAgICAgICB9CgogICAgICAgIC8vIFRyeSB0aGUgbm9kZSByZXF1aXJlIGZ1bmN0aW9uIGlmIGl0IGV4aXN0cy4KICAgICAgICBpZiAobm9kZVJlcXVpcmUgJiYgdHlwZW9mIG5hbWUgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgICByZXR1cm4gbm9kZVJlcXVpcmUobmFtZSk7CiAgICAgICAgfQoKICAgICAgICB2YXIgZXJyID0gbmV3IEVycm9yKCdDYW5ub3QgZmluZCBtb2R1bGUgXCcnICsgbmFtZSArICdcJycpOwogICAgICAgIGVyci5jb2RlID0gJ01PRFVMRV9OT1RfRk9VTkQnOwogICAgICAgIHRocm93IGVycjsKICAgICAgfQoKICAgICAgbG9jYWxSZXF1aXJlLnJlc29sdmUgPSByZXNvbHZlOwogICAgICBsb2NhbFJlcXVpcmUuY2FjaGUgPSB7fTsKCiAgICAgIHZhciBtb2R1bGUgPSBjYWNoZVtuYW1lXSA9IG5ldyBuZXdSZXF1aXJlLk1vZHVsZShuYW1lKTsKCiAgICAgIG1vZHVsZXNbbmFtZV1bMF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbG9jYWxSZXF1aXJlLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCB0aGlzKTsKICAgIH0KCiAgICByZXR1cm4gY2FjaGVbbmFtZV0uZXhwb3J0czsKCiAgICBmdW5jdGlvbiBsb2NhbFJlcXVpcmUoeCl7CiAgICAgIHJldHVybiBuZXdSZXF1aXJlKGxvY2FsUmVxdWlyZS5yZXNvbHZlKHgpKTsKICAgIH0KCiAgICBmdW5jdGlvbiByZXNvbHZlKHgpewogICAgICByZXR1cm4gbW9kdWxlc1tuYW1lXVsxXVt4XSB8fCB4OwogICAgfQogIH0KCiAgZnVuY3Rpb24gTW9kdWxlKG1vZHVsZU5hbWUpIHsKICAgIHRoaXMuaWQgPSBtb2R1bGVOYW1lOwogICAgdGhpcy5idW5kbGUgPSBuZXdSZXF1aXJlOwogICAgdGhpcy5leHBvcnRzID0ge307CiAgfQoKICBuZXdSZXF1aXJlLmlzUGFyY2VsUmVxdWlyZSA9IHRydWU7CiAgbmV3UmVxdWlyZS5Nb2R1bGUgPSBNb2R1bGU7CiAgbmV3UmVxdWlyZS5tb2R1bGVzID0gbW9kdWxlczsKICBuZXdSZXF1aXJlLmNhY2hlID0gY2FjaGU7CiAgbmV3UmVxdWlyZS5wYXJlbnQgPSBwcmV2aW91c1JlcXVpcmU7CiAgbmV3UmVxdWlyZS5yZWdpc3RlciA9IGZ1bmN0aW9uIChpZCwgZXhwb3J0cykgewogICAgbW9kdWxlc1tpZF0gPSBbZnVuY3Rpb24gKHJlcXVpcmUsIG1vZHVsZSkgewogICAgICBtb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHM7CiAgICB9LCB7fV07CiAgfTsKCiAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbnRyeS5sZW5ndGg7IGkrKykgewogICAgbmV3UmVxdWlyZShlbnRyeVtpXSk7CiAgfQoKICBpZiAoZW50cnkubGVuZ3RoKSB7CiAgICAvLyBFeHBvc2UgZW50cnkgcG9pbnQgdG8gTm9kZSwgQU1EIG9yIGJyb3dzZXIgZ2xvYmFscwogICAgLy8gQmFzZWQgb24gaHR0cHM6Ly9naXRodWIuY29tL0ZvcmJlc0xpbmRlc2F5L3VtZC9ibG9iL21hc3Rlci90ZW1wbGF0ZS5qcwogICAgdmFyIG1haW5FeHBvcnRzID0gbmV3UmVxdWlyZShlbnRyeVtlbnRyeS5sZW5ndGggLSAxXSk7CgogICAgLy8gQ29tbW9uSlMKICAgIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gIm9iamVjdCIgJiYgdHlwZW9mIG1vZHVsZSAhPT0gInVuZGVmaW5lZCIpIHsKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBtYWluRXhwb3J0czsKCiAgICAvLyBSZXF1aXJlSlMKICAgIH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gImZ1bmN0aW9uIiAmJiBkZWZpbmUuYW1kKSB7CiAgICAgZGVmaW5lKGZ1bmN0aW9uICgpIHsKICAgICAgIHJldHVybiBtYWluRXhwb3J0czsKICAgICB9KTsKCiAgICAvLyA8c2NyaXB0PgogICAgfSBlbHNlIGlmIChnbG9iYWxOYW1lKSB7CiAgICAgIHRoaXNbZ2xvYmFsTmFtZV0gPSBtYWluRXhwb3J0czsKICAgIH0KICB9CgogIC8vIE92ZXJyaWRlIHRoZSBjdXJyZW50IHJlcXVpcmUgd2l0aCB0aGlzIG5ldyBvbmUKICByZXR1cm4gbmV3UmVxdWlyZTsKfSkoeyIuLi9ub2RlX21vZHVsZXMvQG9mZmlybW8vcHJhY3RpY2FsLWxvZ2dlci1icm93c2VyL25vZGVfbW9kdWxlcy9Ab2ZmaXJtby9wcmFjdGljYWwtbG9nZ2VyLWNvcmUvbm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHsKInVzZSBzdHJpY3QiOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLl9fZXh0ZW5kcyA9IF9fZXh0ZW5kczsKZXhwb3J0cy5fX3Jlc3QgPSBfX3Jlc3Q7CmV4cG9ydHMuX19kZWNvcmF0ZSA9IF9fZGVjb3JhdGU7CmV4cG9ydHMuX19wYXJhbSA9IF9fcGFyYW07CmV4cG9ydHMuX19tZXRhZGF0YSA9IF9fbWV0YWRhdGE7CmV4cG9ydHMuX19hd2FpdGVyID0gX19hd2FpdGVyOwpleHBvcnRzLl9fZ2VuZXJhdG9yID0gX19nZW5lcmF0b3I7CmV4cG9ydHMuX19leHBvcnRTdGFyID0gX19leHBvcnRTdGFyOwpleHBvcnRzLl9fdmFsdWVzID0gX192YWx1ZXM7CmV4cG9ydHMuX19yZWFkID0gX19yZWFkOwpleHBvcnRzLl9fc3ByZWFkID0gX19zcHJlYWQ7CmV4cG9ydHMuX19hd2FpdCA9IF9fYXdhaXQ7CmV4cG9ydHMuX19hc3luY0dlbmVyYXRvciA9IF9fYXN5bmNHZW5lcmF0b3I7CmV4cG9ydHMuX19hc3luY0RlbGVnYXRvciA9IF9fYXN5bmNEZWxlZ2F0b3I7CmV4cG9ydHMuX19hc3luY1ZhbHVlcyA9IF9fYXN5bmNWYWx1ZXM7CmV4cG9ydHMuX19tYWtlVGVtcGxhdGVPYmplY3QgPSBfX21ha2VUZW1wbGF0ZU9iamVjdDsKZXhwb3J0cy5fX2ltcG9ydFN0YXIgPSBfX2ltcG9ydFN0YXI7CmV4cG9ydHMuX19pbXBvcnREZWZhdWx0ID0gX19pbXBvcnREZWZhdWx0OwpleHBvcnRzLl9fYXNzaWduID0gdm9pZCAwOwoKLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqDQpDb3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC4NCkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOyB5b3UgbWF5IG5vdCB1c2UNCnRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlDQpMaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMA0KDQpUSElTIENPREUgSVMgUFJPVklERUQgT04gQU4gKkFTIElTKiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZDQpLSU5ELCBFSVRIRVIgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgV0lUSE9VVCBMSU1JVEFUSU9OIEFOWSBJTVBMSUVEDQpXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgVElUTEUsIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLA0KTUVSQ0hBTlRBQkxJVFkgT1IgTk9OLUlORlJJTkdFTUVOVC4NCg0KU2VlIHRoZSBBcGFjaGUgVmVyc2lvbiAyLjAgTGljZW5zZSBmb3Igc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zDQphbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuDQoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqLwoKLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi8KdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewogIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwgewogICAgX19wcm90b19fOiBbXQogIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgewogICAgZC5fX3Byb3RvX18gPSBiOwogIH0gfHwgZnVuY3Rpb24gKGQsIGIpIHsKICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOwogIH07CgogIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwp9OwoKZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHsKICBleHRlbmRTdGF0aWNzKGQsIGIpOwoKICBmdW5jdGlvbiBfXygpIHsKICAgIHRoaXMuY29uc3RydWN0b3IgPSBkOwogIH0KCiAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwp9Cgp2YXIgX19hc3NpZ24gPSBmdW5jdGlvbiAoKSB7CiAgZXhwb3J0cy5fX2Fzc2lnbiA9IF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7CiAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHsKICAgICAgcyA9IGFyZ3VtZW50c1tpXTsKCiAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07CiAgICB9CgogICAgcmV0dXJuIHQ7CiAgfTsKCiAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn07CgpleHBvcnRzLl9fYXNzaWduID0gX19hc3NpZ247CgpmdW5jdGlvbiBfX3Jlc3QocywgZSkgewogIHZhciB0ID0ge307CgogIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKSB0W3BdID0gc1twXTsKCiAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gImZ1bmN0aW9uIikgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDApIHRbcFtpXV0gPSBzW3BbaV1dOwogIHJldHVybiB0Owp9CgpmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7CiAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLAogICAgICByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywKICAgICAgZDsKICBpZiAodHlwZW9mIFJlZmxlY3QgPT09ICJvYmplY3QiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSAiZnVuY3Rpb24iKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7ZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjsKICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByOwp9CgpmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikgewogIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsKICAgIGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7CiAgfTsKfQoKZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkgewogIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gIm9iamVjdCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09ICJmdW5jdGlvbiIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTsKfQoKZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikgewogIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7CiAgICAgIHRyeSB7CiAgICAgICAgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgcmVqZWN0KGUpOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsKICAgICAgdHJ5IHsKICAgICAgICBzdGVwKGdlbmVyYXRvclsidGhyb3ciXSh2YWx1ZSkpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgcmVqZWN0KGUpOwogICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsKICAgICAgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgIHJlc29sdmUocmVzdWx0LnZhbHVlKTsKICAgICAgfSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsKICAgIH0KCiAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7CiAgfSk7Cn0KCmZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHsKICB2YXIgXyA9IHsKICAgIGxhYmVsOiAwLAogICAgc2VudDogZnVuY3Rpb24gKCkgewogICAgICBpZiAodFswXSAmIDEpIHRocm93IHRbMV07CiAgICAgIHJldHVybiB0WzFdOwogICAgfSwKICAgIHRyeXM6IFtdLAogICAgb3BzOiBbXQogIH0sCiAgICAgIGYsCiAgICAgIHksCiAgICAgIHQsCiAgICAgIGc7CiAgcmV0dXJuIGcgPSB7CiAgICBuZXh0OiB2ZXJiKDApLAogICAgInRocm93IjogdmVyYigxKSwKICAgICJyZXR1cm4iOiB2ZXJiKDIpCiAgfSwgdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHRoaXM7CiAgfSksIGc7CgogIGZ1bmN0aW9uIHZlcmIobikgewogICAgcmV0dXJuIGZ1bmN0aW9uICh2KSB7CiAgICAgIHJldHVybiBzdGVwKFtuLCB2XSk7CiAgICB9OwogIH0KCiAgZnVuY3Rpb24gc3RlcChvcCkgewogICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy4iKTsKCiAgICB3aGlsZSAoXykgdHJ5IHsKICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVsicmV0dXJuIl0gOiBvcFswXSA/IHlbInRocm93Il0gfHwgKCh0ID0geVsicmV0dXJuIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0OwogICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07CgogICAgICBzd2l0Y2ggKG9wWzBdKSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgIGNhc2UgMToKICAgICAgICAgIHQgPSBvcDsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBfLmxhYmVsKys7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICB2YWx1ZTogb3BbMV0sCiAgICAgICAgICAgIGRvbmU6IGZhbHNlCiAgICAgICAgICB9OwoKICAgICAgICBjYXNlIDU6CiAgICAgICAgICBfLmxhYmVsKys7CiAgICAgICAgICB5ID0gb3BbMV07CiAgICAgICAgICBvcCA9IFswXTsKICAgICAgICAgIGNvbnRpbnVlOwoKICAgICAgICBjYXNlIDc6CiAgICAgICAgICBvcCA9IF8ub3BzLnBvcCgpOwoKICAgICAgICAgIF8udHJ5cy5wb3AoKTsKCiAgICAgICAgICBjb250aW51ZTsKCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7CiAgICAgICAgICAgIF8gPSAwOwogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSB7CiAgICAgICAgICAgIF8ubGFiZWwgPSBvcFsxXTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7CiAgICAgICAgICAgIF8ubGFiZWwgPSB0WzFdOwogICAgICAgICAgICB0ID0gb3A7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7CiAgICAgICAgICAgIF8ubGFiZWwgPSB0WzJdOwoKICAgICAgICAgICAgXy5vcHMucHVzaChvcCk7CgogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7CgogICAgICAgICAgXy50cnlzLnBvcCgpOwoKICAgICAgICAgIGNvbnRpbnVlOwogICAgICB9CgogICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgb3AgPSBbNiwgZV07CiAgICAgIHkgPSAwOwogICAgfSBmaW5hbGx5IHsKICAgICAgZiA9IHQgPSAwOwogICAgfQoKICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOwogICAgcmV0dXJuIHsKICAgICAgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsCiAgICAgIGRvbmU6IHRydWUKICAgIH07CiAgfQp9CgpmdW5jdGlvbiBfX2V4cG9ydFN0YXIobSwgZXhwb3J0cykgewogIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTsKfQoKZnVuY3Rpb24gX192YWx1ZXMobykgewogIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl0sCiAgICAgIGkgPSAwOwogIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwogIHJldHVybiB7CiAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CiAgICAgIHJldHVybiB7CiAgICAgICAgdmFsdWU6IG8gJiYgb1tpKytdLAogICAgICAgIGRvbmU6ICFvCiAgICAgIH07CiAgICB9CiAgfTsKfQoKZnVuY3Rpb24gX19yZWFkKG8sIG4pIHsKICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdOwogIGlmICghbSkgcmV0dXJuIG87CiAgdmFyIGkgPSBtLmNhbGwobyksCiAgICAgIHIsCiAgICAgIGFyID0gW10sCiAgICAgIGU7CgogIHRyeSB7CiAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTsKICB9IGNhdGNoIChlcnJvcikgewogICAgZSA9IHsKICAgICAgZXJyb3I6IGVycm9yCiAgICB9OwogIH0gZmluYWxseSB7CiAgICB0cnkgewogICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVsicmV0dXJuIl0pKSBtLmNhbGwoaSk7CiAgICB9IGZpbmFsbHkgewogICAgICBpZiAoZSkgdGhyb3cgZS5lcnJvcjsKICAgIH0KICB9CgogIHJldHVybiBhcjsKfQoKZnVuY3Rpb24gX19zcHJlYWQoKSB7CiAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTsKCiAgcmV0dXJuIGFyOwp9CgpmdW5jdGlvbiBfX2F3YWl0KHYpIHsKICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTsKfQoKZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHsKICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKICB2YXIgZyA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSwKICAgICAgaSwKICAgICAgcSA9IFtdOwogIHJldHVybiBpID0ge30sIHZlcmIoIm5leHQiKSwgdmVyYigidGhyb3ciKSwgdmVyYigicmV0dXJuIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHRoaXM7CiAgfSwgaTsKCiAgZnVuY3Rpb24gdmVyYihuKSB7CiAgICBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgewogICAgICAgIHEucHVzaChbbiwgdiwgYSwgYl0pID4gMSB8fCByZXN1bWUobiwgdik7CiAgICAgIH0pOwogICAgfTsKICB9CgogIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7CiAgICB0cnkgewogICAgICBzdGVwKGdbbl0odikpOwogICAgfSBjYXRjaCAoZSkgewogICAgICBzZXR0bGUocVswXVszXSwgZSk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBzdGVwKHIpIHsKICAgIHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOwogIH0KCiAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgewogICAgcmVzdW1lKCJuZXh0IiwgdmFsdWUpOwogIH0KCiAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7CiAgICByZXN1bWUoInRocm93IiwgdmFsdWUpOwogIH0KCiAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsKICAgIGlmIChmKHYpLCBxLnNoaWZ0KCksIHEubGVuZ3RoKSByZXN1bWUocVswXVswXSwgcVswXVsxXSk7CiAgfQp9CgpmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHsKICB2YXIgaSwgcDsKICByZXR1cm4gaSA9IHt9LCB2ZXJiKCJuZXh0IiksIHZlcmIoInRocm93IiwgZnVuY3Rpb24gKGUpIHsKICAgIHRocm93IGU7CiAgfSksIHZlcmIoInJldHVybiIpLCBpW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gdGhpczsKICB9LCBpOwoKICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsKICAgIGlbbl0gPSBvW25dID8gZnVuY3Rpb24gKHYpIHsKICAgICAgcmV0dXJuIChwID0gIXApID8gewogICAgICAgIHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLAogICAgICAgIGRvbmU6IG4gPT09ICJyZXR1cm4iCiAgICAgIH0gOiBmID8gZih2KSA6IHY7CiAgICB9IDogZjsKICB9Cn0KCmZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykgewogIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwogIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sCiAgICAgIGk7CiAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gImZ1bmN0aW9uIiA/IF9fdmFsdWVzKG8pIDogb1tTeW1ib2wuaXRlcmF0b3JdKCksIGkgPSB7fSwgdmVyYigibmV4dCIpLCB2ZXJiKCJ0aHJvdyIpLCB2ZXJiKCJyZXR1cm4iKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gdGhpczsKICB9LCBpKTsKCiAgZnVuY3Rpb24gdmVyYihuKSB7CiAgICBpW25dID0gb1tuXSAmJiBmdW5jdGlvbiAodikgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIHYgPSBvW25dKHYpLCBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB2LmRvbmUsIHYudmFsdWUpOwogICAgICB9KTsKICAgIH07CiAgfQoKICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7CiAgICBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbiAodikgewogICAgICByZXNvbHZlKHsKICAgICAgICB2YWx1ZTogdiwKICAgICAgICBkb25lOiBkCiAgICAgIH0pOwogICAgfSwgcmVqZWN0KTsKICB9Cn0KCmZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7CiAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgInJhdyIsIHsKICAgICAgdmFsdWU6IHJhdwogICAgfSk7CiAgfSBlbHNlIHsKICAgIGNvb2tlZC5yYXcgPSByYXc7CiAgfQoKICByZXR1cm4gY29va2VkOwp9Cgo7CgpmdW5jdGlvbiBfX2ltcG9ydFN0YXIobW9kKSB7CiAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDsKICB2YXIgcmVzdWx0ID0ge307CiAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIHJlc3VsdFtrXSA9IG1vZFtrXTsKICByZXN1bHQuZGVmYXVsdCA9IG1vZDsKICByZXR1cm4gcmVzdWx0Owp9CgpmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7CiAgcmV0dXJuIG1vZCAmJiBtb2QuX19lc01vZHVsZSA/IG1vZCA6IHsKICAgIGRlZmF1bHQ6IG1vZAogIH07Cn0KfSx7fV0sIi4uL25vZGVfbW9kdWxlcy9Ab2ZmaXJtby9wcmFjdGljYWwtbG9nZ2VyLWJyb3dzZXIvbm9kZV9tb2R1bGVzL0BvZmZpcm1vL3ByYWN0aWNhbC1sb2dnZXItY29yZS9ub2RlX21vZHVsZXMvdHlwZXNjcmlwdC1zdHJpbmctZW51bXMvZGlzdC9pbmRleC5qcyI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHsKInVzZSBzdHJpY3QiOwpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwpmdW5jdGlvbiBFbnVtKCkgewogICAgdmFyIHZhbHVlcyA9IFtdOwogICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKICAgICAgICB2YWx1ZXNbX2ldID0gYXJndW1lbnRzW19pXTsKICAgIH0KICAgIGlmICh0eXBlb2YgdmFsdWVzWzBdID09PSAic3RyaW5nIikgewogICAgICAgIHZhciByZXN1bHQgPSB7fTsKICAgICAgICBmb3IgKHZhciBfYSA9IDAsIHZhbHVlc18xID0gdmFsdWVzOyBfYSA8IHZhbHVlc18xLmxlbmd0aDsgX2ErKykgewogICAgICAgICAgICB2YXIgdmFsdWUgPSB2YWx1ZXNfMVtfYV07CiAgICAgICAgICAgIHJlc3VsdFt2YWx1ZV0gPSB2YWx1ZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICAgIGVsc2UgewogICAgICAgIHJldHVybiB2YWx1ZXNbMF07CiAgICB9Cn0KZXhwb3J0cy5FbnVtID0gRW51bTsKKGZ1bmN0aW9uIChFbnVtKSB7CiAgICBmdW5jdGlvbiBvZktleXMoZSkgewogICAgICAgIHZhciByZXN1bHQgPSB7fTsKICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gT2JqZWN0LmtleXMoZSk7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7CiAgICAgICAgICAgIHZhciBrZXkgPSBfYVtfaV07CiAgICAgICAgICAgIHJlc3VsdFtrZXldID0ga2V5OwogICAgICAgIH0KICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgRW51bS5vZktleXMgPSBvZktleXM7CiAgICBmdW5jdGlvbiBrZXlzKGUpIHsKICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMoZSk7CiAgICB9CiAgICBFbnVtLmtleXMgPSBrZXlzOwogICAgZnVuY3Rpb24gdmFsdWVzKGUpIHsKICAgICAgICB2YXIgcmVzdWx0ID0gW107CiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IE9iamVjdC5rZXlzKGUpOyBfaSA8IF9hLmxlbmd0aDsgX2krKykgewogICAgICAgICAgICB2YXIga2V5ID0gX2FbX2ldOwogICAgICAgICAgICByZXN1bHQucHVzaChlW2tleV0pOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgRW51bS52YWx1ZXMgPSB2YWx1ZXM7CiAgICBmdW5jdGlvbiBpc1R5cGUoZSwgdmFsdWUpIHsKICAgICAgICByZXR1cm4gdmFsdWVzKGUpLmluZGV4T2YodmFsdWUpICE9PSAtMTsKICAgIH0KICAgIEVudW0uaXNUeXBlID0gaXNUeXBlOwp9KShFbnVtID0gZXhwb3J0cy5FbnVtIHx8IChleHBvcnRzLkVudW0gPSB7fSkpOwoKfSx7fV0sIi4uL25vZGVfbW9kdWxlcy9Ab2ZmaXJtby9wcmFjdGljYWwtbG9nZ2VyLWJyb3dzZXIvbm9kZV9tb2R1bGVzL0BvZmZpcm1vL3ByYWN0aWNhbC1sb2dnZXItY29yZS9kaXN0L3NyYy5lczcuY2pzL3R5cGVzLmpzIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykgewoidXNlIHN0cmljdCI7Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CmNvbnN0IHR5cGVzY3JpcHRfc3RyaW5nX2VudW1zXzEgPSByZXF1aXJlKCJ0eXBlc2NyaXB0LXN0cmluZy1lbnVtcyIpOwovLy8vLy8vCmNvbnN0IExvZ0xldmVsID0gdHlwZXNjcmlwdF9zdHJpbmdfZW51bXNfMS5FbnVtKCdmYXRhbCcsICdlbWVyZycsICdhbGVydCcsICdjcml0JywgJ2Vycm9yJywgJ3dhcm5pbmcnLCAnd2FybicsICdub3RpY2UnLCAnaW5mbycsICd2ZXJib3NlJywgJ2xvZycsICdkZWJ1ZycsICd0cmFjZScsICdzaWxseScpOwpleHBvcnRzLkxvZ0xldmVsID0gTG9nTGV2ZWw7Cgp9LHsidHlwZXNjcmlwdC1zdHJpbmctZW51bXMiOiIuLi9ub2RlX21vZHVsZXMvQG9mZmlybW8vcHJhY3RpY2FsLWxvZ2dlci1icm93c2VyL25vZGVfbW9kdWxlcy9Ab2ZmaXJtby9wcmFjdGljYWwtbG9nZ2VyLWNvcmUvbm9kZV9tb2R1bGVzL3R5cGVzY3JpcHQtc3RyaW5nLWVudW1zL2Rpc3QvaW5kZXguanMifV0sIi4uL25vZGVfbW9kdWxlcy9Ab2ZmaXJtby9wcmFjdGljYWwtbG9nZ2VyLWJyb3dzZXIvbm9kZV9tb2R1bGVzL0BvZmZpcm1vL3ByYWN0aWNhbC1sb2dnZXItY29yZS9kaXN0L3NyYy5lczcuY2pzL2NvbnN0LmpzIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykgewoidXNlIHN0cmljdCI7Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CmNvbnN0IHR5cGVzY3JpcHRfc3RyaW5nX2VudW1zXzEgPSByZXF1aXJlKCJ0eXBlc2NyaXB0LXN0cmluZy1lbnVtcyIpOwpjb25zdCB0eXBlc18xID0gcmVxdWlyZSgiLi90eXBlcyIpOwpjb25zdCBMSUIgPSAnQG9mZmlybW8vcHJhY3RpY2FsLWxvZ2dlci1jb3JlJzsKZXhwb3J0cy5MSUIgPSBMSUI7CmNvbnN0IEFMTF9MT0dfTEVWRUxTID0gdHlwZXNjcmlwdF9zdHJpbmdfZW51bXNfMS5FbnVtLmtleXModHlwZXNfMS5Mb2dMZXZlbCk7CmV4cG9ydHMuQUxMX0xPR19MRVZFTFMgPSBBTExfTE9HX0xFVkVMUzsKLy8gbGV2ZWwgdG8gYSBudW1lcmljYWwgdmFsdWUsIGZvciBvcmRlcmluZyBhbmQgZmlsdGVyaW5nCmNvbnN0IExFVkVMX1RPX0lOVEVHRVIgPSB7CiAgICBbdHlwZXNfMS5Mb2dMZXZlbC5mYXRhbF06IDYwLAogICAgW3R5cGVzXzEuTG9nTGV2ZWwuZW1lcmddOiA1OSwKICAgIFt0eXBlc18xLkxvZ0xldmVsLmFsZXJ0XTogNTIsCiAgICBbdHlwZXNfMS5Mb2dMZXZlbC5jcml0XTogNTEsCiAgICBbdHlwZXNfMS5Mb2dMZXZlbC5lcnJvcl06IDUwLAogICAgW3R5cGVzXzEuTG9nTGV2ZWwud2FybmluZ106IDQwLAogICAgW3R5cGVzXzEuTG9nTGV2ZWwud2Fybl06IDQwLAogICAgW3R5cGVzXzEuTG9nTGV2ZWwubm90aWNlXTogMzUsCiAgICBbdHlwZXNfMS5Mb2dMZXZlbC5pbmZvXTogMzAsCiAgICBbdHlwZXNfMS5Mb2dMZXZlbC52ZXJib3NlXTogMjIsCiAgICBbdHlwZXNfMS5Mb2dMZXZlbC5sb2ddOiAyMSwKICAgIFt0eXBlc18xLkxvZ0xldmVsLmRlYnVnXTogMjAsCiAgICBbdHlwZXNfMS5Mb2dMZXZlbC50cmFjZV06IDEwLAogICAgW3R5cGVzXzEuTG9nTGV2ZWwuc2lsbHldOiAxLAp9OwpleHBvcnRzLkxFVkVMX1RPX0lOVEVHRVIgPSBMRVZFTF9UT19JTlRFR0VSOwppZiAoT2JqZWN0LmtleXMoTEVWRUxfVE9fSU5URUdFUikubGVuZ3RoICE9PSB0eXBlc2NyaXB0X3N0cmluZ19lbnVtc18xLkVudW0ua2V5cyh0eXBlc18xLkxvZ0xldmVsKS5sZW5ndGgpCiAgICB0aHJvdyBuZXcgRXJyb3IoJ3VuaXZlcnNhbC1sb2dnZXItY29yZTogTEVWRUxfVE9fSU5URUdFUiBuZWVkcyBhbiB1cGRhdGUnKTsKLy8gbGV2ZWwgdG8gc2hvcnQsIG1lYW5pbmdmdWwgc3RyaW5nIHRvIG1heWJlIGJlIGRpc3BsYXllZCBvbiBzY3JlZW4KY29uc3QgTEVWRUxfVE9fSFVNQU4gPSB7CiAgICBbdHlwZXNfMS5Mb2dMZXZlbC5mYXRhbF06ICdmYXRhbCcsCiAgICBbdHlwZXNfMS5Mb2dMZXZlbC5lbWVyZ106ICdlbWVyZ2VuY3knLAogICAgW3R5cGVzXzEuTG9nTGV2ZWwuYWxlcnRdOiAnYWxlcnQnLAogICAgW3R5cGVzXzEuTG9nTGV2ZWwuY3JpdF06ICdjcml0aWNhbCcsCiAgICBbdHlwZXNfMS5Mb2dMZXZlbC5lcnJvcl06ICdlcnJvcicsCiAgICBbdHlwZXNfMS5Mb2dMZXZlbC53YXJuaW5nXTogJ3dhcm4nLAogICAgW3R5cGVzXzEuTG9nTGV2ZWwud2Fybl06ICd3YXJuJywKICAgIFt0eXBlc18xLkxvZ0xldmVsLm5vdGljZV06ICdub3RlJywKICAgIFt0eXBlc18xLkxvZ0xldmVsLmluZm9dOiAnaW5mbycsCiAgICBbdHlwZXNfMS5Mb2dMZXZlbC52ZXJib3NlXTogJ3ZlcmJvc2UnLAogICAgW3R5cGVzXzEuTG9nTGV2ZWwubG9nXTogJ2xvZycsCiAgICBbdHlwZXNfMS5Mb2dMZXZlbC5kZWJ1Z106ICdkZWJ1ZycsCiAgICBbdHlwZXNfMS5Mb2dMZXZlbC50cmFjZV06ICd0cmFjZScsCiAgICBbdHlwZXNfMS5Mb2dMZXZlbC5zaWxseV06ICdzaWxseScsCn07CmV4cG9ydHMuTEVWRUxfVE9fSFVNQU4gPSBMRVZFTF9UT19IVU1BTjsKaWYgKE9iamVjdC5rZXlzKExFVkVMX1RPX0hVTUFOKS5sZW5ndGggIT09IHR5cGVzY3JpcHRfc3RyaW5nX2VudW1zXzEuRW51bS5rZXlzKHR5cGVzXzEuTG9nTGV2ZWwpLmxlbmd0aCkKICAgIHRocm93IG5ldyBFcnJvcigndW5pdmVyc2FsLWxvZ2dlci1jb3JlOiBMRVZFTF9UT19IVU1BTiBuZWVkcyBhbiB1cGRhdGUnKTsKCn0seyJ0eXBlc2NyaXB0LXN0cmluZy1lbnVtcyI6Ii4uL25vZGVfbW9kdWxlcy9Ab2ZmaXJtby9wcmFjdGljYWwtbG9nZ2VyLWJyb3dzZXIvbm9kZV9tb2R1bGVzL0BvZmZpcm1vL3ByYWN0aWNhbC1sb2dnZXItY29yZS9ub2RlX21vZHVsZXMvdHlwZXNjcmlwdC1zdHJpbmctZW51bXMvZGlzdC9pbmRleC5qcyIsIi4vdHlwZXMiOiIuLi9ub2RlX21vZHVsZXMvQG9mZmlybW8vcHJhY3RpY2FsLWxvZ2dlci1icm93c2VyL25vZGVfbW9kdWxlcy9Ab2ZmaXJtby9wcmFjdGljYWwtbG9nZ2VyLWNvcmUvZGlzdC9zcmMuZXM3LmNqcy90eXBlcy5qcyJ9XSwiLi4vbm9kZV9tb2R1bGVzL0BvZmZpcm1vL3ByYWN0aWNhbC1sb2dnZXItYnJvd3Nlci9ub2RlX21vZHVsZXMvQG9mZmlybW8vcHJhY3RpY2FsLWxvZ2dlci1jb3JlL25vZGVfbW9kdWxlcy9Ab2ZmaXJtby90aW1lc3RhbXBzL2Rpc3Qvc3JjLmVzNy5janMvZ2VuZXJhdGUuanMiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7CiJ1c2Ugc3RyaWN0IjsKLy8vLy8vLy8vLy8vLy8vLy8vLy8vCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CmZ1bmN0aW9uIGdldF9VVENfdGltZXN0YW1wX21zKG5vdyA9IG5ldyBEYXRlKCkpIHsKICAgIHJldHVybiAoK25vdyk7Cn0KZXhwb3J0cy5nZXRfVVRDX3RpbWVzdGFtcF9tcyA9IGdldF9VVENfdGltZXN0YW1wX21zOwovLy8vLy8vLy8vLy8vLy8vLy8vLy8KZnVuY3Rpb24gZ2V0X2h1bWFuX3JlYWRhYmxlX1VUQ190aW1lc3RhbXBfZGF5cyhub3cgPSBuZXcgRGF0ZSgpKSB7CiAgICBjb25zdCBZWVlZID0gbm93LmdldFVUQ0Z1bGxZZWFyKCk7CiAgICBjb25zdCBNTSA9ICgnMCcgKyAobm93LmdldFVUQ01vbnRoKCkgKyAxKSkuc2xpY2UoLTIpOwogICAgY29uc3QgREQgPSAoJzAnICsgbm93LmdldFVUQ0RhdGUoKSkuc2xpY2UoLTIpOwogICAgcmV0dXJuIGAke1lZWVl9JHtNTX0ke0REfWA7Cn0KZXhwb3J0cy5nZXRfaHVtYW5fcmVhZGFibGVfVVRDX3RpbWVzdGFtcF9kYXlzID0gZ2V0X2h1bWFuX3JlYWRhYmxlX1VUQ190aW1lc3RhbXBfZGF5czsKZnVuY3Rpb24gZ2V0X2h1bWFuX3JlYWRhYmxlX1VUQ190aW1lc3RhbXBfbWludXRlcyhub3cgPSBuZXcgRGF0ZSgpKSB7CiAgICBjb25zdCBoaCA9ICgnMCcgKyBub3cuZ2V0VVRDSG91cnMoKSkuc2xpY2UoLTIpOwogICAgY29uc3QgbW0gPSAoJzAnICsgbm93LmdldFVUQ01pbnV0ZXMoKSkuc2xpY2UoLTIpOwogICAgcmV0dXJuIGdldF9odW1hbl9yZWFkYWJsZV9VVENfdGltZXN0YW1wX2RheXMobm93KSArIGBfJHtoaH1oJHttbX1gOwp9CmV4cG9ydHMuZ2V0X2h1bWFuX3JlYWRhYmxlX1VUQ190aW1lc3RhbXBfbWludXRlcyA9IGdldF9odW1hbl9yZWFkYWJsZV9VVENfdGltZXN0YW1wX21pbnV0ZXM7CmZ1bmN0aW9uIGdldF9odW1hbl9yZWFkYWJsZV9VVENfdGltZXN0YW1wX21zX3YxKG5vdyA9IG5ldyBEYXRlKCkpIHsKICAgIGNvbnN0IHNzID0gKCcwJyArIG5vdy5nZXRVVENTZWNvbmRzKCkpLnNsaWNlKC0yKTsKICAgIGNvbnN0IG1tbSA9ICgnMDAnICsgbm93LmdldFVUQ01pbGxpc2Vjb25kcygpKS5zbGljZSgtMyk7CiAgICByZXR1cm4gZ2V0X2h1bWFuX3JlYWRhYmxlX1VUQ190aW1lc3RhbXBfbWludXRlcyhub3cpICsgYDoke3NzfS4ke21tbX1gOwp9CmV4cG9ydHMuZ2V0X2h1bWFuX3JlYWRhYmxlX1VUQ190aW1lc3RhbXBfbXNfdjEgPSBnZXRfaHVtYW5fcmVhZGFibGVfVVRDX3RpbWVzdGFtcF9tc192MTsKZnVuY3Rpb24gZ2V0X2h1bWFuX3JlYWRhYmxlX1VUQ190aW1lc3RhbXBfbXMobm93ID0gbmV3IERhdGUoKSkgewogICAgcmV0dXJuICd0czFfJyArIGdldF9odW1hbl9yZWFkYWJsZV9VVENfdGltZXN0YW1wX21zX3YxKG5vdyk7Cn0KZXhwb3J0cy5nZXRfaHVtYW5fcmVhZGFibGVfVVRDX3RpbWVzdGFtcF9tcyA9IGdldF9odW1hbl9yZWFkYWJsZV9VVENfdGltZXN0YW1wX21zOwovLy8vLy8vLy8vLy8vLy8vLy8vLy8KCn0se31dLCIuLi9ub2RlX21vZHVsZXMvQG9mZmlybW8vcHJhY3RpY2FsLWxvZ2dlci1icm93c2VyL25vZGVfbW9kdWxlcy9Ab2ZmaXJtby9wcmFjdGljYWwtbG9nZ2VyLWNvcmUvbm9kZV9tb2R1bGVzL0BvZmZpcm1vL3RpbWVzdGFtcHMvZGlzdC9zcmMuZXM3LmNqcy9wYXJzZS5qcyI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHsKInVzZSBzdHJpY3QiOwovLy8vLy8vLy8vLy8vLy8vLy8vLy8KT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKLy8vLy8vLy8vLy8vLy8vLy8vLy8vCmZ1bmN0aW9uIHBhcnNlX2h1bWFuX3JlYWRhYmxlX1VUQ190aW1lc3RhbXBfbXNfdjEodHN0YW1wKSB7CiAgICAvL2NvbnNvbGUubG9nKHt0c3RhbXB9KQogICAgLy8gZm9ybWF0OiAke1lZWVl9JHtNTX0ke0REfV8ke2hofWgke21tfToke3NzfS4ke21tbX0KICAgIGlmICh0c3RhbXAubGVuZ3RoICE9PSAyMSkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0h1bWFuLXJlYWRhYmxlIHRpbWVzdGFtcCBVVEMvbXM6IGNhbuKAmXQgcGFyc2UhIFt3cm9uZyBsZW5ndGhdJyk7CiAgICBjb25zdCBbZGF0ZV9wYXJ0LCB0aW1lX3BhcnRdID0gdHN0YW1wLnNwbGl0KCdfJyk7CiAgICAvL2NvbnNvbGUubG9nKHtkYXRlX3BhcnQsIHRpbWVfcGFydH0pCiAgICBpZiAoZGF0ZV9wYXJ0Lmxlbmd0aCAhPT0gOCkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0h1bWFuLXJlYWRhYmxlIHRpbWVzdGFtcCBVVEMvbXM6IGNhbuKAmXQgcGFyc2UhIFt3cm9uZyBkYXRlIGxlbmd0aF0nKTsKICAgIGNvbnN0IFlZWVlfcGFydCA9IGRhdGVfcGFydC5zbGljZSgwLCA0KTsKICAgIGNvbnN0IE1NX3BhcnQgPSBkYXRlX3BhcnQuc2xpY2UoNCwgNik7CiAgICBjb25zdCBERF9wYXJ0ID0gZGF0ZV9wYXJ0LnNsaWNlKDYsIDgpOwogICAgY29uc3QgWVlZWSA9IE51bWJlcihZWVlZX3BhcnQpOwogICAgaWYgKFlZWVkgPCAxOTcwKQogICAgICAgIHRocm93IG5ldyBFcnJvcignSHVtYW4tcmVhZGFibGUgdGltZXN0YW1wIFVUQy9tczogY2Fu4oCZdCBwYXJzZSEgW1lZWVldJyk7CiAgICBjb25zdCBNTSA9IE51bWJlcihNTV9wYXJ0KSAtIDE7IC8vIHN0dXBpZCBzcGVjCiAgICBpZiAoTU0gPiAxMSkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0h1bWFuLXJlYWRhYmxlIHRpbWVzdGFtcCBVVEMvbXM6IGNhbuKAmXQgcGFyc2UhIFtNTV0nKTsKICAgIGNvbnN0IEREID0gTnVtYmVyKEREX3BhcnQpOwogICAgaWYgKEREID4gMzEpCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdIdW1hbi1yZWFkYWJsZSB0aW1lc3RhbXAgVVRDL21zOiBjYW7igJl0IHBhcnNlISBbRERdJyk7CiAgICBpZiAodGltZV9wYXJ0Lmxlbmd0aCAhPT0gMTIpCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdIdW1hbi1yZWFkYWJsZSB0aW1lc3RhbXAgVVRDL21zOiBjYW7igJl0IHBhcnNlISBbd3JvbmcgdGltZSBsZW5ndGhdJyk7CiAgICBjb25zdCBoaF9wYXJ0ID0gdGltZV9wYXJ0LnNsaWNlKDAsIDIpOwogICAgY29uc3QgbW1fcGFydCA9IHRpbWVfcGFydC5zbGljZSgzLCA1KTsKICAgIGNvbnN0IHNzX3BhcnQgPSB0aW1lX3BhcnQuc2xpY2UoNiwgOCk7CiAgICBjb25zdCBtbW1fcGFydCA9IHRpbWVfcGFydC5zbGljZSg5LCAxMik7CiAgICAvL2NvbnNvbGUubG9nKHtZWVlZX3BhcnQsIE1NX3BhcnQsIEREX3BhcnQsIGhoX3BhcnQsIG1tX3BhcnQsIHNzX3BhcnQsIG1tbV9wYXJ0fSkKICAgIGNvbnN0IGhoID0gTnVtYmVyKGhoX3BhcnQpOwogICAgaWYgKGhoID4gMjMpCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdIdW1hbi1yZWFkYWJsZSB0aW1lc3RhbXAgVVRDL21zOiBjYW7igJl0IHBhcnNlISBbaGhdJyk7CiAgICBjb25zdCBtbSA9IE51bWJlcihtbV9wYXJ0KTsKICAgIGlmIChtbSA+IDU5KQogICAgICAgIHRocm93IG5ldyBFcnJvcignSHVtYW4tcmVhZGFibGUgdGltZXN0YW1wIFVUQy9tczogY2Fu4oCZdCBwYXJzZSEgW21tXScpOwogICAgY29uc3Qgc3MgPSBOdW1iZXIoc3NfcGFydCk7CiAgICBpZiAoc3MgPiA1OSkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0h1bWFuLXJlYWRhYmxlIHRpbWVzdGFtcCBVVEMvbXM6IGNhbuKAmXQgcGFyc2UhIFtzc10nKTsKICAgIGNvbnN0IG1tbSA9IE51bWJlcihtbW1fcGFydCk7CiAgICAvL2NvbnNvbGUubG9nKHtZWVlZLCBNTSwgREQsIGhoLCBtbSwgc3MsIG1tbX0pCiAgICByZXR1cm4gbmV3IERhdGUoRGF0ZS5VVEMoWVlZWSwgTU0sIERELCBoaCwgbW0sIHNzLCBtbW0pKTsKfQpleHBvcnRzLnBhcnNlX2h1bWFuX3JlYWRhYmxlX1VUQ190aW1lc3RhbXBfbXNfdjEgPSBwYXJzZV9odW1hbl9yZWFkYWJsZV9VVENfdGltZXN0YW1wX21zX3YxOwpmdW5jdGlvbiBwYXJzZV9odW1hbl9yZWFkYWJsZV9VVENfdGltZXN0YW1wX21zKHRzdGFtcCkgewogICAgaWYgKHRzdGFtcC5zdGFydHNXaXRoKCd0czFfJykpCiAgICAgICAgcmV0dXJuIHBhcnNlX2h1bWFuX3JlYWRhYmxlX1VUQ190aW1lc3RhbXBfbXNfdjEodHN0YW1wLnNsaWNlKDQpKTsKICAgIHRocm93IG5ldyBFcnJvcignd3JvbmcgdGltZXN0YW1wLCBjYW7igJl0IHBhcnNlIScpOwp9CmV4cG9ydHMucGFyc2VfaHVtYW5fcmVhZGFibGVfVVRDX3RpbWVzdGFtcF9tcyA9IHBhcnNlX2h1bWFuX3JlYWRhYmxlX1VUQ190aW1lc3RhbXBfbXM7Ci8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKfSx7fV0sIi4uL25vZGVfbW9kdWxlcy9Ab2ZmaXJtby9wcmFjdGljYWwtbG9nZ2VyLWJyb3dzZXIvbm9kZV9tb2R1bGVzL0BvZmZpcm1vL3ByYWN0aWNhbC1sb2dnZXItY29yZS9ub2RlX21vZHVsZXMvQG9mZmlybW8vdGltZXN0YW1wcy9kaXN0L3NyYy5lczcuY2pzL2luZGV4LmpzIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykgewoidXNlIHN0cmljdCI7Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CmNvbnN0IHRzbGliXzEgPSByZXF1aXJlKCJ0c2xpYiIpOwp0c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKCIuL2dlbmVyYXRlIiksIGV4cG9ydHMpOwp0c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKCIuL3BhcnNlIiksIGV4cG9ydHMpOwoKfSx7InRzbGliIjoiLi4vbm9kZV9tb2R1bGVzL0BvZmZpcm1vL3ByYWN0aWNhbC1sb2dnZXItYnJvd3Nlci9ub2RlX21vZHVsZXMvQG9mZmlybW8vcHJhY3RpY2FsLWxvZ2dlci1jb3JlL25vZGVfbW9kdWxlcy90c2xpYi90c2xpYi5lczYuanMiLCIuL2dlbmVyYXRlIjoiLi4vbm9kZV9tb2R1bGVzL0BvZmZpcm1vL3ByYWN0aWNhbC1sb2dnZXItYnJvd3Nlci9ub2RlX21vZHVsZXMvQG9mZmlybW8vcHJhY3RpY2FsLWxvZ2dlci1jb3JlL25vZGVfbW9kdWxlcy9Ab2ZmaXJtby90aW1lc3RhbXBzL2Rpc3Qvc3JjLmVzNy5janMvZ2VuZXJhdGUuanMiLCIuL3BhcnNlIjoiLi4vbm9kZV9tb2R1bGVzL0BvZmZpcm1vL3ByYWN0aWNhbC1sb2dnZXItYnJvd3Nlci9ub2RlX21vZHVsZXMvQG9mZmlybW8vcHJhY3RpY2FsLWxvZ2dlci1jb3JlL25vZGVfbW9kdWxlcy9Ab2ZmaXJtby90aW1lc3RhbXBzL2Rpc3Qvc3JjLmVzNy5janMvcGFyc2UuanMifV0sIi4uL25vZGVfbW9kdWxlcy9Ab2ZmaXJtby9wcmFjdGljYWwtbG9nZ2VyLWJyb3dzZXIvbm9kZV9tb2R1bGVzL0BvZmZpcm1vL3ByYWN0aWNhbC1sb2dnZXItY29yZS9kaXN0L3NyYy5lczcuY2pzL2NvcmUuanMiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7CiJ1c2Ugc3RyaWN0IjsKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKY29uc3QgdHlwZXNjcmlwdF9zdHJpbmdfZW51bXNfMSA9IHJlcXVpcmUoInR5cGVzY3JpcHQtc3RyaW5nLWVudW1zIik7CmNvbnN0IHRpbWVzdGFtcHNfMSA9IHJlcXVpcmUoIkBvZmZpcm1vL3RpbWVzdGFtcHMiKTsKY29uc3QgdHlwZXNfMSA9IHJlcXVpcmUoIi4vdHlwZXMiKTsKY29uc3QgY29uc3RfMSA9IHJlcXVpcmUoIi4vY29uc3QiKTsKZnVuY3Rpb24gY2hlY2tMZXZlbChsZXZlbCkgewogICAgaWYgKCF0eXBlc2NyaXB0X3N0cmluZ19lbnVtc18xLkVudW0uaXNUeXBlKHR5cGVzXzEuTG9nTGV2ZWwsIGxldmVsKSkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7Y29uc3RfMS5MSUJ9OiBjaGVja0xldmVsKCk6IE5vdCBhIHZhbGlkIGxvZyBsZXZlbDogIiR7bGV2ZWx9IiFgKTsKfQpmdW5jdGlvbiBjcmVhdGVMb2dnZXIoeyBuYW1lLCBsZXZlbCA9IHR5cGVzXzEuTG9nTGV2ZWwuaW5mbywgZGV0YWlscyA9IHt9LCBvdXRwdXRGbiA9IGNvbnNvbGUubG9nLCB9KSB7CiAgICBpZiAoIW5hbWUpCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2NvbnN0XzEuTElCfS4ke2NyZWF0ZUxvZ2dlci5uYW1lfSgpOiB5b3UgbXVzdCBwcm92aWRlIGEgbmFtZSFgKTsKICAgIGNvbnN0IGludGVybmFsU3RhdGUgPSB7CiAgICAgICAgbmFtZSwKICAgICAgICBsZXZlbCwKICAgICAgICBkZXRhaWxzOiBPYmplY3QuYXNzaWduKHt9LCBkZXRhaWxzKSwKICAgICAgICBvdXRwdXRGbjogb3V0cHV0Rm4sCiAgICB9OwogICAgbGV0IGxldmVsX2ludCA9IDA7CiAgICBjb25zdCBsb2dnZXIgPSBjb25zdF8xLkFMTF9MT0dfTEVWRUxTLnJlZHVjZSgobG9nZ2VyLCBsZXZlbCkgPT4gewogICAgICAgIGxvZ2dlcltsZXZlbF0gPSAobWVzc2FnZSwgZGV0YWlscykgPT4gewogICAgICAgICAgICBpZiAoIWlzTGV2ZWxFbmFibGVkKGxldmVsKSkKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgaWYgKCFkZXRhaWxzICYmIHR5cGVvZiBtZXNzYWdlID09PSAnb2JqZWN0JykgewogICAgICAgICAgICAgICAgZGV0YWlscyA9IG1lc3NhZ2U7CiAgICAgICAgICAgICAgICBtZXNzYWdlID0gZGV0YWlscy5lcnIKICAgICAgICAgICAgICAgICAgICA/IGRldGFpbHMuZXJyLm1lc3NhZ2UKICAgICAgICAgICAgICAgICAgICA6ICcnOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG1lc3NhZ2UgPSBtZXNzYWdlIHx8ICcnOwogICAgICAgICAgICBvdXRwdXRGbihzZXJpYWxpemVyKGxldmVsLCBtZXNzYWdlLCBkZXRhaWxzKSk7CiAgICAgICAgfTsKICAgICAgICByZXR1cm4gbG9nZ2VyOwogICAgfSwgewogICAgICAgIF86IGludGVybmFsU3RhdGUsCiAgICAgICAgaXNMZXZlbEVuYWJsZWQsCiAgICAgICAgc2V0TGV2ZWwsCiAgICAgICAgZ2V0TGV2ZWwsCiAgICAgICAgYWRkRGV0YWlscywKICAgIH0pOwogICAgZnVuY3Rpb24gc2V0TGV2ZWwobGV2ZWwpIHsKICAgICAgICBjaGVja0xldmVsKGxldmVsKTsKICAgICAgICBpbnRlcm5hbFN0YXRlLmxldmVsID0gbGV2ZWw7CiAgICAgICAgbGV2ZWxfaW50ID0gY29uc3RfMS5MRVZFTF9UT19JTlRFR0VSW2xldmVsXTsKICAgIH0KICAgIHNldExldmVsKGxldmVsKTsKICAgIGZ1bmN0aW9uIGlzTGV2ZWxFbmFibGVkKGxldmVsKSB7CiAgICAgICAgY2hlY2tMZXZlbChsZXZlbCk7CiAgICAgICAgcmV0dXJuIGNvbnN0XzEuTEVWRUxfVE9fSU5URUdFUltsZXZlbF0gPj0gbGV2ZWxfaW50OwogICAgfQogICAgZnVuY3Rpb24gZ2V0TGV2ZWwoKSB7CiAgICAgICAgcmV0dXJuIGludGVybmFsU3RhdGUubGV2ZWw7CiAgICB9CiAgICBmdW5jdGlvbiBhZGREZXRhaWxzKGRldGFpbHMpIHsKICAgICAgICBpbnRlcm5hbFN0YXRlLmRldGFpbHMgPSBPYmplY3QuYXNzaWduKHt9LCBpbnRlcm5hbFN0YXRlLmRldGFpbHMsIGRldGFpbHMpOwogICAgfQogICAgLy8gVE9ETyBjaGlsZAogICAgLyoKICAgIGZ1bmN0aW9uIGNoaWxkKHtuYW1lLCBsZXZlbCwgZGV0YWlsc306IFBhcnRpYWw8TG9nUGFyYW1zPik6IExvZ2dlciB7CiAgICAgICAgcmV0dXJuIGNyZWF0ZUNoaWxkTG9nZ2VyKHsKICAgICAgICAgICAgcGFyZW50OiBsb2dnZXIsCiAgICAgICAgICAgIG5hbWUsCiAgICAgICAgICAgIGxldmVsLAogICAgICAgICAgICBkZXRhaWxzLAogICAgICAgIH0pCiAgICB9CiAgICAqLwogICAgZnVuY3Rpb24gc2VyaWFsaXplcihsZXZlbCwgbXNnLCBkZXRhaWxzKSB7CiAgICAgICAgY29uc3QgcGF5bG9hZCA9IHsKICAgICAgICAgICAgZGV0YWlsczogT2JqZWN0LmFzc2lnbih7fSwgaW50ZXJuYWxTdGF0ZS5kZXRhaWxzLCBkZXRhaWxzKSwKICAgICAgICAgICAgbGV2ZWwsCiAgICAgICAgICAgIG5hbWUsCiAgICAgICAgICAgIHRpbWU6IHRpbWVzdGFtcHNfMS5nZXRfaHVtYW5fcmVhZGFibGVfVVRDX3RpbWVzdGFtcF9tc192MSgpLAogICAgICAgICAgICAvL3RpbWU6IChuZXcgRGF0ZSgpKS50b0lTT1N0cmluZygpLAogICAgICAgICAgICBtc2csCiAgICAgICAgfTsKICAgICAgICByZXR1cm4gcGF5bG9hZDsKICAgIH0KICAgIHJldHVybiBsb2dnZXI7Cn0KZXhwb3J0cy5jcmVhdGVMb2dnZXIgPSBjcmVhdGVMb2dnZXI7Cgp9LHsidHlwZXNjcmlwdC1zdHJpbmctZW51bXMiOiIuLi9ub2RlX21vZHVsZXMvQG9mZmlybW8vcHJhY3RpY2FsLWxvZ2dlci1icm93c2VyL25vZGVfbW9kdWxlcy9Ab2ZmaXJtby9wcmFjdGljYWwtbG9nZ2VyLWNvcmUvbm9kZV9tb2R1bGVzL3R5cGVzY3JpcHQtc3RyaW5nLWVudW1zL2Rpc3QvaW5kZXguanMiLCJAb2ZmaXJtby90aW1lc3RhbXBzIjoiLi4vbm9kZV9tb2R1bGVzL0BvZmZpcm1vL3ByYWN0aWNhbC1sb2dnZXItYnJvd3Nlci9ub2RlX21vZHVsZXMvQG9mZmlybW8vcHJhY3RpY2FsLWxvZ2dlci1jb3JlL25vZGVfbW9kdWxlcy9Ab2ZmaXJtby90aW1lc3RhbXBzL2Rpc3Qvc3JjLmVzNy5janMvaW5kZXguanMiLCIuL3R5cGVzIjoiLi4vbm9kZV9tb2R1bGVzL0BvZmZpcm1vL3ByYWN0aWNhbC1sb2dnZXItYnJvd3Nlci9ub2RlX21vZHVsZXMvQG9mZmlybW8vcHJhY3RpY2FsLWxvZ2dlci1jb3JlL2Rpc3Qvc3JjLmVzNy5janMvdHlwZXMuanMiLCIuL2NvbnN0IjoiLi4vbm9kZV9tb2R1bGVzL0BvZmZpcm1vL3ByYWN0aWNhbC1sb2dnZXItYnJvd3Nlci9ub2RlX21vZHVsZXMvQG9mZmlybW8vcHJhY3RpY2FsLWxvZ2dlci1jb3JlL2Rpc3Qvc3JjLmVzNy5janMvY29uc3QuanMifV0sIi4uL25vZGVfbW9kdWxlcy9Ab2ZmaXJtby9wcmFjdGljYWwtbG9nZ2VyLWJyb3dzZXIvbm9kZV9tb2R1bGVzL0BvZmZpcm1vL3ByYWN0aWNhbC1sb2dnZXItY29yZS9kaXN0L3NyYy5lczcuY2pzL2NoaWxkLmpzIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykgewoidXNlIHN0cmljdCI7Ci8vIFRPRE8KT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKY29uc3QgY29yZV8xID0gcmVxdWlyZSgiLi9jb3JlIik7CmZ1bmN0aW9uIGNyZWF0ZUNoaWxkTG9nZ2VyKHsgcGFyZW50LCBuYW1lID0gcGFyZW50Ll8ubmFtZSwgbGV2ZWwgPSBwYXJlbnQuZ2V0TGV2ZWwoKSwgZGV0YWlscyA9IHt9LCBvdXRwdXRGbiA9IHBhcmVudC5fLm91dHB1dEZuLCB9KSB7CiAgICBkZXRhaWxzID0gT2JqZWN0LmFzc2lnbih7fSwgcGFyZW50Ll8uZGV0YWlscywgZGV0YWlscyk7CiAgICByZXR1cm4gY29yZV8xLmNyZWF0ZUxvZ2dlcih7CiAgICAgICAgbmFtZSwKICAgICAgICBsZXZlbCwKICAgICAgICBkZXRhaWxzLAogICAgICAgIG91dHB1dEZuLAogICAgfSk7Cn0KZXhwb3J0cy5jcmVhdGVDaGlsZExvZ2dlciA9IGNyZWF0ZUNoaWxkTG9nZ2VyOwoKfSx7Ii4vY29yZSI6Ii4uL25vZGVfbW9kdWxlcy9Ab2ZmaXJtby9wcmFjdGljYWwtbG9nZ2VyLWJyb3dzZXIvbm9kZV9tb2R1bGVzL0BvZmZpcm1vL3ByYWN0aWNhbC1sb2dnZXItY29yZS9kaXN0L3NyYy5lczcuY2pzL2NvcmUuanMifV0sIi4uL25vZGVfbW9kdWxlcy9Ab2ZmaXJtby9wcmFjdGljYWwtbG9nZ2VyLWJyb3dzZXIvbm9kZV9tb2R1bGVzL0BvZmZpcm1vL3ByYWN0aWNhbC1sb2dnZXItY29yZS9kaXN0L3NyYy5lczcuY2pzL2luZGV4LmpzIjpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cykgewoidXNlIHN0cmljdCI7Ck9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CmNvbnN0IHRzbGliXzEgPSByZXF1aXJlKCJ0c2xpYiIpOwp0c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKCIuL3R5cGVzIiksIGV4cG9ydHMpOwp0c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKCIuL2NvbnN0IiksIGV4cG9ydHMpOwp0c2xpYl8xLl9fZXhwb3J0U3RhcihyZXF1aXJlKCIuL2NvcmUiKSwgZXhwb3J0cyk7CnRzbGliXzEuX19leHBvcnRTdGFyKHJlcXVpcmUoIi4vY2hpbGQiKSwgZXhwb3J0cyk7Cgp9LHsidHNsaWIiOiIuLi9ub2RlX21vZHVsZXMvQG9mZmlybW8vcHJhY3RpY2FsLWxvZ2dlci1icm93c2VyL25vZGVfbW9kdWxlcy9Ab2ZmaXJtby9wcmFjdGljYWwtbG9nZ2VyLWNvcmUvbm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsIi4vdHlwZXMiOiIuLi9ub2RlX21vZHVsZXMvQG9mZmlybW8vcHJhY3RpY2FsLWxvZ2dlci1icm93c2VyL25vZGVfbW9kdWxlcy9Ab2ZmaXJtby9wcmFjdGljYWwtbG9nZ2VyLWNvcmUvZGlzdC9zcmMuZXM3LmNqcy90eXBlcy5qcyIsIi4vY29uc3QiOiIuLi9ub2RlX21vZHVsZXMvQG9mZmlybW8vcHJhY3RpY2FsLWxvZ2dlci1icm93c2VyL25vZGVfbW9kdWxlcy9Ab2ZmaXJtby9wcmFjdGljYWwtbG9nZ2VyLWNvcmUvZGlzdC9zcmMuZXM3LmNqcy9jb25zdC5qcyIsIi4vY29yZSI6Ii4uL25vZGVfbW9kdWxlcy9Ab2ZmaXJtby9wcmFjdGljYWwtbG9nZ2VyLWJyb3dzZXIvbm9kZV9tb2R1bGVzL0BvZmZpcm1vL3ByYWN0aWNhbC1sb2dnZXItY29yZS9kaXN0L3NyYy5lczcuY2pzL2NvcmUuanMiLCIuL2NoaWxkIjoiLi4vbm9kZV9tb2R1bGVzL0BvZmZpcm1vL3ByYWN0aWNhbC1sb2dnZXItYnJvd3Nlci9ub2RlX21vZHVsZXMvQG9mZmlybW8vcHJhY3RpY2FsLWxvZ2dlci1jb3JlL2Rpc3Qvc3JjLmVzNy5janMvY2hpbGQuanMifV0sIi4uL25vZGVfbW9kdWxlcy9Ab2ZmaXJtby9wcmFjdGljYWwtbG9nZ2VyLWJyb3dzZXIvZGlzdC9zcmMuZXM3LmNqcy9pbmRleC5qcyI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpIHsKInVzZSBzdHJpY3QiOwpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwpjb25zdCBwcmFjdGljYWxfbG9nZ2VyX2NvcmVfMSA9IHJlcXVpcmUoIkBvZmZpcm1vL3ByYWN0aWNhbC1sb2dnZXItY29yZSIpOwpleHBvcnRzLmNyZWF0ZUNoaWxkTG9nZ2VyID0gcHJhY3RpY2FsX2xvZ2dlcl9jb3JlXzEuY3JlYXRlQ2hpbGRMb2dnZXI7CmNvbnN0IExFVkVMX1RPX0NPTlNPTEVfTUVUSE9EID0gewogICAgW3ByYWN0aWNhbF9sb2dnZXJfY29yZV8xLkxvZ0xldmVsLmZhdGFsXTogJ2Vycm9yJywKICAgIFtwcmFjdGljYWxfbG9nZ2VyX2NvcmVfMS5Mb2dMZXZlbC5lbWVyZ106ICdlcnJvcicsCiAgICBbcHJhY3RpY2FsX2xvZ2dlcl9jb3JlXzEuTG9nTGV2ZWwuYWxlcnRdOiAnZXJyb3InLAogICAgW3ByYWN0aWNhbF9sb2dnZXJfY29yZV8xLkxvZ0xldmVsLmNyaXRdOiAnZXJyb3InLAogICAgW3ByYWN0aWNhbF9sb2dnZXJfY29yZV8xLkxvZ0xldmVsLmVycm9yXTogJ2Vycm9yJywKICAgIFtwcmFjdGljYWxfbG9nZ2VyX2NvcmVfMS5Mb2dMZXZlbC53YXJuaW5nXTogJ3dhcm4nLAogICAgW3ByYWN0aWNhbF9sb2dnZXJfY29yZV8xLkxvZ0xldmVsLndhcm5dOiAnd2FybicsCiAgICBbcHJhY3RpY2FsX2xvZ2dlcl9jb3JlXzEuTG9nTGV2ZWwubm90aWNlXTogJ2luZm8nLAogICAgW3ByYWN0aWNhbF9sb2dnZXJfY29yZV8xLkxvZ0xldmVsLmluZm9dOiAnaW5mbycsCiAgICBbcHJhY3RpY2FsX2xvZ2dlcl9jb3JlXzEuTG9nTGV2ZWwudmVyYm9zZV06ICdpbmZvJywKICAgIFtwcmFjdGljYWxfbG9nZ2VyX2NvcmVfMS5Mb2dMZXZlbC5sb2ddOiAnbG9nJywKICAgIC8vIG5vdGU6IGNvbnNvbGUuZGVidWcgZG9lc24ndCBkaXNwbGF5IGFueXRoaW5nIG9uIENocm9tZSwgZG9uJ3QgdXNlIGl0CiAgICBbcHJhY3RpY2FsX2xvZ2dlcl9jb3JlXzEuTG9nTGV2ZWwuZGVidWddOiAnbG9nJywKICAgIFtwcmFjdGljYWxfbG9nZ2VyX2NvcmVfMS5Mb2dMZXZlbC50cmFjZV06ICdsb2cnLAogICAgW3ByYWN0aWNhbF9sb2dnZXJfY29yZV8xLkxvZ0xldmVsLnNpbGx5XTogJ2xvZycsCn07CmNvbnN0IExFVkVMX1RPX1NUWUxFID0gewogICAgW3ByYWN0aWNhbF9sb2dnZXJfY29yZV8xLkxvZ0xldmVsLmZhdGFsXTogJycsCiAgICBbcHJhY3RpY2FsX2xvZ2dlcl9jb3JlXzEuTG9nTGV2ZWwuZW1lcmddOiAnJywKICAgIFtwcmFjdGljYWxfbG9nZ2VyX2NvcmVfMS5Mb2dMZXZlbC5hbGVydF06ICcnLAogICAgW3ByYWN0aWNhbF9sb2dnZXJfY29yZV8xLkxvZ0xldmVsLmNyaXRdOiAnJywKICAgIFtwcmFjdGljYWxfbG9nZ2VyX2NvcmVfMS5Mb2dMZXZlbC5lcnJvcl06ICcnLAogICAgW3ByYWN0aWNhbF9sb2dnZXJfY29yZV8xLkxvZ0xldmVsLndhcm5pbmddOiAnJywKICAgIFtwcmFjdGljYWxfbG9nZ2VyX2NvcmVfMS5Mb2dMZXZlbC53YXJuXTogJycsCiAgICBbcHJhY3RpY2FsX2xvZ2dlcl9jb3JlXzEuTG9nTGV2ZWwubm90aWNlXTogJ2NvbG9yOiAjNjU5QUQyJywKICAgIFtwcmFjdGljYWxfbG9nZ2VyX2NvcmVfMS5Mb2dMZXZlbC5pbmZvXTogJ2NvbG9yOiAjNjU5QUQyJywKICAgIFtwcmFjdGljYWxfbG9nZ2VyX2NvcmVfMS5Mb2dMZXZlbC52ZXJib3NlXTogJ2NvbG9yOiAjNjU5QUQyJywKICAgIFtwcmFjdGljYWxfbG9nZ2VyX2NvcmVfMS5Mb2dMZXZlbC5sb2ddOiAnJywKICAgIFtwcmFjdGljYWxfbG9nZ2VyX2NvcmVfMS5Mb2dMZXZlbC5kZWJ1Z106ICcnLAogICAgW3ByYWN0aWNhbF9sb2dnZXJfY29yZV8xLkxvZ0xldmVsLnRyYWNlXTogJ2NvbG9yOiAjOUFBMkFBJywKICAgIFtwcmFjdGljYWxfbG9nZ2VyX2NvcmVfMS5Mb2dMZXZlbC5zaWxseV06ICdjb2xvcjogIzlBQTJBQScsCn07CmZ1bmN0aW9uIGNyZWF0ZUxvZ2dlcihwKSB7CiAgICBmdW5jdGlvbiBvdXRwdXRGbihwYXlsb2FkKSB7CiAgICAgICAgY29uc3QgeyBsZXZlbCwgbmFtZSwgbXNnLCB0aW1lLCBkZXRhaWxzIH0gPSBwYXlsb2FkOwogICAgICAgIC8vY29uc3QgeyBlcnIsIC4uLmRldGFpbHNOb0VyciB9ID0gZGV0YWlscwogICAgICAgIGxldCBsaW5lID0gJycKICAgICAgICAgICAgLy8rIHRpbWUKICAgICAgICAgICAgLy8rICcgJwogICAgICAgICAgICArIGAlY1ske2xldmVsfV1gCiAgICAgICAgICAgICsgJ+KAuicKICAgICAgICAgICAgKyBuYW1lCiAgICAgICAgICAgICsgJzogJwogICAgICAgICAgICAvLysgKG1zZyA/ICcgJyA6ICcnKQogICAgICAgICAgICArIG1zZzsKICAgICAgICBpZiAoT2JqZWN0LmtleXMoZGV0YWlscykubGVuZ3RoKQogICAgICAgICAgICBjb25zb2xlW0xFVkVMX1RPX0NPTlNPTEVfTUVUSE9EW2xldmVsXV0obGluZSwgTEVWRUxfVE9fU1RZTEVbbGV2ZWxdLCBkZXRhaWxzKTsKICAgICAgICBlbHNlCiAgICAgICAgICAgIGNvbnNvbGVbTEVWRUxfVE9fQ09OU09MRV9NRVRIT0RbbGV2ZWxdXShsaW5lLCBMRVZFTF9UT19TVFlMRVtsZXZlbF0pOwogICAgfQogICAgcmV0dXJuIHByYWN0aWNhbF9sb2dnZXJfY29yZV8xLmNyZWF0ZUxvZ2dlcihPYmplY3QuYXNzaWduKHt9LCBwLCB7IG91dHB1dEZuIH0pKTsKfQpleHBvcnRzLmNyZWF0ZUxvZ2dlciA9IGNyZWF0ZUxvZ2dlcjsKCn0seyJAb2ZmaXJtby9wcmFjdGljYWwtbG9nZ2VyLWNvcmUiOiIuLi9ub2RlX21vZHVsZXMvQG9mZmlybW8vcHJhY3RpY2FsLWxvZ2dlci1icm93c2VyL25vZGVfbW9kdWxlcy9Ab2ZmaXJtby9wcmFjdGljYWwtbG9nZ2VyLWNvcmUvZGlzdC9zcmMuZXM3LmNqcy9pbmRleC5qcyJ9XSwiYXBpL2Z1bGwvaW5kZXguanMiOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKSB7CiJ1c2Ugc3RyaWN0IjsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5hZGRDb21tYW5kID0gZXhwb3J0cy5nZXRMb2dnZXIgPSBleHBvcnRzLmdldExvZ0xldmVsID0gdm9pZCAwOwoKdmFyIF9wcmFjdGljYWxMb2dnZXJCcm93c2VyID0gcmVxdWlyZSgiQG9mZmlybW8vcHJhY3RpY2FsLWxvZ2dlci1icm93c2VyIik7Cgpjb25zb2xlLmxvZygiW1x1RDgzRVx1RERFOSBVV0RUL2FwaS9mdWxsLiIuY29uY2F0KCtEYXRlLm5vdygpLCAiXSBIZWxsbyEiKSk7CgpmdW5jdGlvbiBjcmVhdGUoKSB7CiAgdmFyIGxvZ2dlckNhY2hlID0ge307CgogIGZ1bmN0aW9uIGdldExvZ0xldmVsKCkgewogICAgdmFyIGlkID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAncm9vdCc7CiAgICByZXR1cm4gWzEsICdzaWxseSddOyAvL3JldHVybiBbIDEwMCwgJ2ZhdGFsJyBdCiAgfQoKICBmdW5jdGlvbiBnZXRMb2dnZXIoKSB7CiAgICB2YXIgaWQgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6ICdyb290JzsKICAgIHJldHVybiAoMCwgX3ByYWN0aWNhbExvZ2dlckJyb3dzZXIuY3JlYXRlTG9nZ2VyKSh7CiAgICAgIG5hbWU6IGlkLAogICAgICBsZXZlbDogZ2V0TG9nTGV2ZWwoaWQpWzFdCiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIGFkZENvbW1hbmQoKSB7Ly8gVE9ETwogIH0KCiAgcmV0dXJuIHsKICAgIGdldExvZ0xldmVsOiBnZXRMb2dMZXZlbCwKICAgIGdldExvZ2dlcjogZ2V0TG9nZ2VyLAogICAgYWRkQ29tbWFuZDogYWRkQ29tbWFuZAogIH07Cn0KCnZhciBpbnN0YW5jZSA9IHdpbmRvdy5fZGVidWcgPSBmdW5jdGlvbiAoKSB7CiAgY29uc29sZS5sb2coIltcdUQ4M0VcdURERTkgVVdEVC9hcGkvZnVsbC4iLmNvbmNhdCgrRGF0ZS5ub3coKSwgIl0gaW5qZWN0aW5nIF9kZWJ1ZyBBUEkuLi4iKSk7CiAgcmV0dXJuIGNyZWF0ZSgpOwp9KCk7Cgp2YXIgZ2V0TG9nTGV2ZWwgPSBpbnN0YW5jZS5nZXRMb2dMZXZlbCwKICAgIGdldExvZ2dlciA9IGluc3RhbmNlLmdldExvZ2dlciwKICAgIGFkZENvbW1hbmQgPSBpbnN0YW5jZS5hZGRDb21tYW5kOwpleHBvcnRzLmFkZENvbW1hbmQgPSBhZGRDb21tYW5kOwpleHBvcnRzLmdldExvZ2dlciA9IGdldExvZ2dlcjsKZXhwb3J0cy5nZXRMb2dMZXZlbCA9IGdldExvZ0xldmVsOwp9LHsiQG9mZmlybW8vcHJhY3RpY2FsLWxvZ2dlci1icm93c2VyIjoiLi4vbm9kZV9tb2R1bGVzL0BvZmZpcm1vL3ByYWN0aWNhbC1sb2dnZXItYnJvd3Nlci9kaXN0L3NyYy5lczcuY2pzL2luZGV4LmpzIn1dfSx7fSxbImFwaS9mdWxsL2luZGV4LmpzIl0sIG51bGwpCi8vIyBzb3VyY2VNYXBwaW5nVVJMPS9pbmRleC5tYXA="
export default lib
