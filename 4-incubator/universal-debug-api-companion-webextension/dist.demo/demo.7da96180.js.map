{"version":3,"sources":["../../node_modules/@offirmo/universal-debug-api-minimal-noop/node_modules/@offirmo/globalthis-ponyfill/src/index.ts","../../node_modules/@offirmo/universal-debug-api-minimal-noop/node_modules/@offirmo/practical-logger-minimal-noop/node_modules/@offirmo/practical-logger-interface/src/index.ts","../../node_modules/@offirmo/universal-debug-api-minimal-noop/node_modules/@offirmo/practical-logger-minimal-noop/src/index.ts","../../node_modules/@offirmo/universal-debug-api-minimal-noop/src/v1.ts","../../node_modules/@offirmo/universal-debug-api-minimal-noop/node_modules/@offirmo/universal-debug-api-interface/node_modules/@offirmo/practical-logger-interface/src/index.ts","../../node_modules/@offirmo/universal-debug-api-minimal-noop/node_modules/@offirmo/universal-debug-api-interface/src/v1.ts","../../node_modules/@offirmo/universal-debug-api-minimal-noop/node_modules/@offirmo/universal-debug-api-interface/src/index.ts","../../node_modules/@offirmo/universal-debug-api-minimal-noop/src/index.ts","../../src/consts-base.ts","../../src/consts.ts","../../src/normalize-args.ts","../../src/core.ts","../../src/index.ts","../../../../1-foundation/practical-logger-core/doc/shared-demo.js","index.js"],"names":["ALL_LOG_LEVELS","require","demo_standard_console","console","log","error","warn","info","debug","demo_logger_basic_usage","logger","group","verbose","elapsedMs","bob","firstName","lastName","age","user","err","Error","httpStatus","undefined","groupEnd","demo_logger_levels","forEach","level","foo","demo_group","groupCollapsed","demo_incorrect_logger_invocations","more","demo_logger_api","getLogger","root_logger","suggestedLevel","name","demo_error","bar","statusCode","details","hello","some","demo_devtools_fonts","font","module","exports","LIB","Date","now","foo_js","window","foo_ls","localStorage","getItem","_debug","v1","addDebugCommand","render","is_feature_x_on","span_f","document","getElementById","innerText","server","link","href","variation","span_x","custom","span_c","String","setInterval","setTimeout"],"mappings":"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","file":"demo.7da96180.js","sourceRoot":"../doc/demo","sourcesContent":["/* global globalThis, self, window, global */\n\nconst lastResort: { [k:string]: any } = {}\n\nexport function getGlobalThis(this: any): { [k:string]: any } {\n\n\t// @ts-ignore\n\tif (typeof globalThis !== 'undefined') return globalThis\n\n\t// check node first https://github.com/ljharb/globalThis/issues/2\n\t// @ts-ignore\n\tif (typeof global !== 'undefined') return global\n\n\t// @ts-ignore\n\tif (typeof self !== 'undefined') return self\n\n\t// @ts-ignore\n\tif (typeof window !== 'undefined') return window\n\n\tif (typeof this !== 'undefined') return this;\n\n\treturn lastResort // should never happen\n}\n","\n//////////// Public interface (for logger usage) ////////////\n\n// List of all known logging primitives, in order of criticity\n// https://docs.google.com/spreadsheets/d/1Bc32plQTswNdCqXS99deB0n7Te7FfD7uepGAOOlPbvY/edit?usp=sharing\nexport type LogLevel =\n\t  'fatal'\n\t| 'emerg'\n\t| 'alert'\n\t| 'crit'\n\t| 'error'\n\t| 'warning'\n\t| 'warn'\n\t| 'notice'\n\t| 'info'\n\t| 'verbose'\n\t| 'log'\n\t| 'debug'\n\t| 'trace'\n\t| 'silly'\n\nexport interface LogDetails { [k: string]: any }\n\n// We INTENTIONALLY restrict to a structured primitive with no overloading.\n// - we do NOT follow bunyan with its multiple overloads (https://github.com/trentm/node-bunyan#log-method-api)\n//   Rationale: multiple overloads prove hard to type and force to use complex normalization code.\n// - we do not attempt to mirror console.x() API:\n//   it's not relevant since the introduction of string templates literals.\n// Still, we MAY tolerate a few simplifying cases:\n// - omitting the message: it will be extracted from details.message\n// - passing an error directly, either as the only arg or as details\n//   (to allow the simple logging of an error)\n// Those \"tolerances\" are non standard and may not be handled!\nexport type LogPrimitive = (message?: string, details?: Readonly<LogDetails>) => void\n\n// The top-level interface\nexport interface Logger {\n\tsetLevel: (level: LogLevel) => void\n\tgetLevel: () => LogLevel\n\taddCommonDetails: (hash: Readonly<LogDetails>) => void\n\n\tfatal: LogPrimitive,\n\temerg: LogPrimitive,\n\talert: LogPrimitive,\n\tcrit: LogPrimitive,\n\terror: LogPrimitive,\n\twarning: LogPrimitive,\n\twarn: LogPrimitive,\n\tnotice: LogPrimitive,\n\tinfo: LogPrimitive,\n\tverbose: LogPrimitive,\n\tlog: LogPrimitive,\n\tdebug: LogPrimitive,\n\ttrace: LogPrimitive,\n\tsilly: LogPrimitive,\n\n\t// for convenience. Not guaranteed to do anything.\n\tgroup(groupTitle?: string): void;\n\tgroupCollapsed(groupTitle?: string): void;\n\tgroupEnd(): void;\n}\n\n//////////// Private interface (for logger implementations) ////////////\n\n// internal representation of a log line\n// inspired by:\n// https://github.com/trentm/node-bunyan#core-fields\nexport interface LogPayload {\n\tlevel: LogLevel\n\tname: string\n\tmsg: string\n\ttime: number // UTC timestamp\n\terr?: Error\n\tdetails: LogDetails\n}\n\n// a fn responsible to display a log line (or whatever)\nexport type LogSink = (payload: LogPayload) => void\n\n// a suggested base logger state\nexport interface BaseInternalLoggerState {\n\tname: string\n\tlevel: LogLevel // inclusive lower bound\n\tcommonDetails: LogDetails\n\toutputFn: LogSink\n}\n\n// suggested creation params\nexport interface LoggerCreationParams {\n\tname?: string\n\tsuggestedLevel?: LogLevel // the code is free to suggest a default level, but can expect it to be dynamically overriden (see Universal Debug API)\n\tforcedLevel?: LogLevel // use only if you provide your own mechanism for dynamically setting the level\n\tcommonDetails?: Readonly<LogDetails>\n}\n","import { Logger, LoggerCreationParams } from '@offirmo/practical-logger-interface'\n\n\nconst NO_OP = () => {}\n\nconst NO_OP_LOGGER: Logger = {\n\tsetLevel: NO_OP,\n\tgetLevel: () => 'silly',\n\n\taddCommonDetails: NO_OP,\n\n\tfatal: NO_OP,\n\temerg: NO_OP,\n\talert: NO_OP,\n\tcrit: NO_OP,\n\terror: NO_OP,\n\twarning: NO_OP,\n\twarn: NO_OP,\n\tnotice: NO_OP,\n\tinfo: NO_OP,\n\tverbose: NO_OP,\n\tlog: NO_OP,\n\tdebug: NO_OP,\n\ttrace: NO_OP,\n\tsilly: NO_OP,\n\n\tgroup: NO_OP,\n\tgroupCollapsed: NO_OP,\n\tgroupEnd: NO_OP,\n}\n\nfunction createLogger(): Logger {\n\treturn NO_OP_LOGGER\n}\n\nexport {\n\tLogger,\n\tLoggerCreationParams,\n\tcreateLogger,\n}\n","import { WebDebugApiV1 } from '@offirmo/universal-debug-api-interface'\nimport { createLogger } from '@offirmo/practical-logger-minimal-noop'\n\n\nexport function create(): WebDebugApiV1 {\n\tconst NO_OP = () => {}\n\tconst NO_OP_LOGGER = createLogger()\n\n\treturn {\n\t\tgetLogger: () => NO_OP_LOGGER,\n\t\texposeInternal: NO_OP,\n\t\toverrideHook: (k, v) => v,\n\t\taddDebugCommand: NO_OP,\n\t}\n}\n","\n//////////// Public interface (for logger usage) ////////////\n\n// List of all known logging primitives, in order of criticity\n// https://docs.google.com/spreadsheets/d/1Bc32plQTswNdCqXS99deB0n7Te7FfD7uepGAOOlPbvY/edit?usp=sharing\nexport type LogLevel =\n\t  'fatal'\n\t| 'emerg'\n\t| 'alert'\n\t| 'crit'\n\t| 'error'\n\t| 'warning'\n\t| 'warn'\n\t| 'notice'\n\t| 'info'\n\t| 'verbose'\n\t| 'log'\n\t| 'debug'\n\t| 'trace'\n\t| 'silly'\n\nexport interface LogDetails { [k: string]: any }\n\n// We INTENTIONALLY restrict to a structured primitive with no overloading.\n// - we do NOT follow bunyan with its multiple overloads (https://github.com/trentm/node-bunyan#log-method-api)\n//   Rationale: multiple overloads prove hard to type and force to use complex normalization code.\n// - we do not attempt to mirror console.x() API:\n//   it's not relevant since the introduction of string templates literals.\n// Still, we MAY tolerate a few simplifying cases:\n// - omitting the message: it will be extracted from details.message\n// - passing an error directly, either as the only arg or as details\n//   (to allow the simple logging of an error)\n// Those \"tolerances\" are non standard and may not be handled!\nexport type LogPrimitive = (message?: string, details?: Readonly<LogDetails>) => void\n\n// The top-level interface\nexport interface Logger {\n\tsetLevel: (level: LogLevel) => void\n\tgetLevel: () => LogLevel\n\taddCommonDetails: (hash: Readonly<LogDetails>) => void\n\n\tfatal: LogPrimitive,\n\temerg: LogPrimitive,\n\talert: LogPrimitive,\n\tcrit: LogPrimitive,\n\terror: LogPrimitive,\n\twarning: LogPrimitive,\n\twarn: LogPrimitive,\n\tnotice: LogPrimitive,\n\tinfo: LogPrimitive,\n\tverbose: LogPrimitive,\n\tlog: LogPrimitive,\n\tdebug: LogPrimitive,\n\ttrace: LogPrimitive,\n\tsilly: LogPrimitive,\n\n\t// for convenience. Not guaranteed to do anything.\n\tgroup(groupTitle?: string): void;\n\tgroupCollapsed(groupTitle?: string): void;\n\tgroupEnd(): void;\n}\n\n//////////// Private interface (for logger implementations) ////////////\n\n// internal representation of a log line\n// inspired by:\n// https://github.com/trentm/node-bunyan#core-fields\nexport interface LogPayload {\n\tlevel: LogLevel\n\tname: string\n\tmsg: string\n\ttime: number // UTC timestamp\n\terr?: Error\n\tdetails: LogDetails\n}\n\n// a fn responsible to display a log line (or whatever)\nexport type LogSink = (payload: LogPayload) => void\n\n// a suggested base logger state\nexport interface BaseInternalLoggerState {\n\tname: string\n\tlevel: LogLevel // inclusive lower bound\n\tcommonDetails: LogDetails\n\toutputFn: LogSink\n}\n\n// suggested creation params\nexport interface LoggerCreationParams {\n\tname?: string\n\tsuggestedLevel?: LogLevel // the code is free to suggest a default level, but can expect it to be dynamically overriden (see Universal Debug API)\n\tforcedLevel?: LogLevel // use only if you provide your own mechanism for dynamically setting the level\n\tcommonDetails?: Readonly<LogDetails>\n}\n","import { Logger, LoggerCreationParams } from '@offirmo/practical-logger-interface'\n\ninterface WebDebugApi {\n\tgetLogger: (p?: Readonly<LoggerCreationParams>) => Logger\n\n\texposeInternal: (path: string, value: any) => void\n\n\toverrideHook: <T>(key: string, defaultValue: T) => T\n\n\taddDebugCommand: (name: string, callback: ( /* todo common libs as params ? */ ) => void) => void\n\n\t_?: {\n\t\texposed: any\n\t\toverrides: { [k: string]: any }\n\t}\n}\n\nexport {\n\tLogger,\n\tLoggerCreationParams,\n\tWebDebugApi,\n}\n","import { WebDebugApi as WebDebugApiV1 } from './v1'\n\ninterface WebDebugApiRoot {\n\tv1: WebDebugApiV1,\n}\n\ntype WebDebugApi = WebDebugApiV1\n\nexport {\n\tWebDebugApiV1,\n\n\t// v latest\n\tWebDebugApi,\n\tWebDebugApiRoot,\n}\n\n// for convenience\nexport { Logger, LoggerCreationParams } from '@offirmo/practical-logger-interface'\n","import { getGlobalThis } from '@offirmo/globalthis-ponyfill'\nimport { WebDebugApiRoot, WebDebugApi } from '@offirmo/universal-debug-api-interface'\n\nimport { create as createV1 } from './v1'\n\n// ensure the root is present\nconst globalThis = getGlobalThis()\nglobalThis._debug = globalThis._debug || {} as WebDebugApiRoot\n\n// install globally if no other implementation already present\nglobalThis._debug.v1 = globalThis._debug.v1 || createV1()\n\n// expose the current implementation\nconst instance: WebDebugApi = globalThis._debug.v1\n\nconst {\n\tgetLogger,\n\texposeInternal,\n\toverrideHook,\n\taddDebugCommand,\n} = instance\n\nexport {\n\tgetLogger,\n\texposeInternal,\n\toverrideHook,\n\taddDebugCommand,\n\n\tcreateV1, // just in case\n\n\tglobalThis, // for convenience\n}\n\n// for convenience\nexport * from '@offirmo/universal-debug-api-interface'\n","// base to be directly importable from other modules\n// without a full lib penalty\n\nimport { LogLevel } from '@offirmo/practical-logger-interface'\n\nexport const DEFAULT_LOG_LEVEL: LogLevel = 'error'\nexport const DEFAULT_LOGGER_KEY = '' // yes, can be used as a key\n","import { LogLevel } from '@offirmo/practical-logger-interface'\n\nexport const LIB = '@offirmo/practical-logger-core'\n\n// level to a numerical value, for ordering and filtering.\n// mnemonic:  100 = 100% = you will see 100% of the logs\n//              1 =   1% = you will see 1% of the logs (obviously the most important)\nexport const LOG_LEVEL_TO_INTEGER: Readonly<{ [k: string]: number }> = {\n\tfatal:    1,\n\temerg:    2,\n\n\talert:   10,\n\tcrit:    20,\n\terror:   30,\n\n\twarning: 40,\n\twarn:    40,\n\n\tnotice:  45,\n\n\tinfo:    50,\n\n\tverbose: 70,\n\tlog:     80,\n\tdebug:   81,\n\n\ttrace:   90,\n\n\tsilly:  100,\n}\n\n// rationalization to a clear, human understandable string\nexport const LOG_LEVEL_TO_HUMAN: Readonly<{ [k: string]: string }> = {\n\tfatal:   'fatal',\n\temerg:   'emergency',\n\n\talert:   'alert',\n\tcrit:    'critical',\n\terror:   'error',\n\n\twarning: 'warn', // warn is a word, shorter is better\n\twarn:    'warn',\n\n\tnotice:  'notice',\n\n\tinfo:    'info',\n\n\tverbose: 'verbose',\n\tlog:     'log',\n\tdebug:   'debug',\n\n\ttrace:   'trace',\n\n\tsilly:   'silly',\n}\n\nexport const ALL_LOG_LEVELS: Readonly<LogLevel[]> =\n\tObject.keys(LOG_LEVEL_TO_INTEGER)\n\t\t.map(s => s as LogLevel)\n\t\t.sort((a: LogLevel, b: LogLevel) => LOG_LEVEL_TO_INTEGER[a] - LOG_LEVEL_TO_INTEGER[b])\n\nexport * from './consts-base'\n","import {\n\tLogDetails,\n} from '@offirmo/practical-logger-interface'\n\n\nexport function looksLikeAnError(x: any): boolean {\n\treturn !!(x.name && x.message && x.stack)\n}\n\n// harmonize\n// also try to recover from some common errors\n// TODO assess whether it's really good to be that permissive (also: hurts perfs)\nexport function normalizeArguments(args: IArguments): [ string, LogDetails ] {\n\t//console.log('>>> NA', Array.from(args))\n\n\tlet message: string = ''\n\tlet details: Readonly<LogDetails> = {}\n\tlet err: Error | undefined = undefined\n\n\tif (args.length > 2) {\n\t\t//console.warn('NA 1', args)\n\t\t// wrong invocation,\n\t\t// most likely a \"console.log\" style invocation from an untyped codebase.\n\t\t// \"best effort\" fallback:\n\t\tmessage = Array.prototype.join.call(args, ' ')\n\t\tdetails = {}\n\t}\n\telse {\n\t\t//console.log('NA 2')\n\t\tmessage = args[0] || ''\n\t\tdetails = args[1] || {}\n\n\t\t// optimization\n\t\tif (!message || typeof args[0] !== 'string' || typeof details !== 'object') {\n\t\t\t// non-nominal call\n\t\t\t//console.warn('NA 2.1')\n\n\t\t\t// try to fix message (attempt 1)\n\t\t\tif (typeof message !== 'string') {\n\t\t\t\t//console.warn('NA 2.1.1', { message, details })\n\t\t\t\tif (looksLikeAnError(message)) {\n\t\t\t\t\t//console.warn('NA 2.1.1.1')\n\t\t\t\t\t// Another bad invocation\n\t\t\t\t\t// \"best effort\" fallback:\n\t\t\t\t\terr = message as Error\n\t\t\t\t\tmessage = err.message\n\t\t\t\t}\n\t\t\t\telse if (typeof message === 'object' && !args[1]) {\n\t\t\t\t\t// no message, direct details\n\t\t\t\t\t//console.warn('NA 2.1.1.2')\n\t\t\t\t\tdetails = message as LogDetails\n\t\t\t\t\tmessage = ''\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t//console.warn('NA 2.1.1.3')\n\t\t\t\t\tmessage = String(message)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// try to fix details\n\t\t\tif (typeof details !== 'object') {\n\t\t\t\t//console.warn('NA 2.1.2', { details })\n\t\t\t\t// Another bad invocation\n\t\t\t\t// \"best effort\" fallback:\n\t\t\t\tmessage = [ message, String(details) ].join(' ')\n\t\t\t\tdetails = {}\n\t\t\t}\n\n\t\t\t// ensure we picked up err\n\t\t\terr = err || details.err\n\n\t\t\t// attempt to fix message (attempt 2, after uniformizing details)\n\t\t\tif (!message && details.message) {\n\t\t\t\t//console.warn('NA 2.1.3', { details })\n\t\t\t\tconst { message: m2, ...d2 } = details\n\t\t\t\tmessage = m2\n\t\t\t\tdetails = d2\n\t\t\t}\n\n\t\t\tmessage = message || (err && err.message) || '(no message)'\n\t\t}\n\n\t\tif (!err && looksLikeAnError(details)) {\n\t\t\t//console.warn('NA 2.2', { details })\n\t\t\t// details is in fact an error, extract it\n\t\t\terr = details as Error\n\t\t\tdetails = { err }\n\t\t}\n\t\telse if (err)\n\t\t\tdetails = { err, ...details }\n\t\telse\n\t\t\tdetails = { ...details }\n\t}\n\n\treturn [ message, details ]\n}\n\n","import {\n\tLogLevel,\n\tBaseInternalLoggerState,\n\tLogger,\n\tLoggerCreationParams,\n\tLogDetails,\n\tLogPayload,\n\tLogPrimitive,\n\tLogSink,\n} from '@offirmo/practical-logger-interface'\n\nimport {\n\tLIB,\n\tALL_LOG_LEVELS,\n\tLOG_LEVEL_TO_INTEGER,\n\tDEFAULT_LOG_LEVEL,\n\tDEFAULT_LOGGER_KEY,\n} from './consts'\n\nimport { normalizeArguments } from './normalize-args'\n\nexport function checkLevel(level: LogLevel) {\n\tif (!ALL_LOG_LEVELS.includes(level))\n\t\tthrow new Error(`[${LIB}] Not a valid log level: \"${level}\"!`)\n}\n\nexport function create(\n\t{\n\t\tname = DEFAULT_LOGGER_KEY,\n\t\tsuggestedLevel = DEFAULT_LOG_LEVEL,\n\t\tforcedLevel,\n\t\tcommonDetails = {},\n\t}: LoggerCreationParams,\n\toutputFn: LogSink = console.log,\n): Logger {\n\n\tconst internalState: BaseInternalLoggerState = {\n\t\tname,\n\t\tlevel: forcedLevel || suggestedLevel,\n\t\tcommonDetails: {...commonDetails},\n\t\toutputFn,\n\t}\n\n\tlet levelAsInt = 100 // so far\n\n\tconst logger: Logger = ALL_LOG_LEVELS.reduce(\n\t\t(logger: any, level: LogLevel) => {\n\t\t\tconst primitive: LogPrimitive = function (rawMessage?: string, rawDetails?: LogDetails) {\n\t\t\t\tif (!isLevelEnabled(level)) return\n\n\t\t\t\tconst [ message, details ] = normalizeArguments(arguments)\n\n\t\t\t\tinternalState.outputFn(serializer(level, message, details))\n\t\t\t}\n\n\t\t\tlogger[level] = primitive\n\n\t\t\treturn logger\n\t\t},\n\t\t{\n\t\t\tsetLevel,\n\t\t\tgetLevel,\n\t\t\taddCommonDetails,\n\t\t\tgroup() {},\n\t\t\tgroupCollapsed() {},\n\t\t\tgroupEnd() {},\n\t\t},\n\t)\n\n\tfunction setLevel(level: LogLevel) {\n\t\tcheckLevel(level)\n\n\t\tinternalState.level = level\n\t\tlevelAsInt = LOG_LEVEL_TO_INTEGER[level]\n\t}\n\tsetLevel(getLevel()) // to check it\n\n\tfunction isLevelEnabled(level: LogLevel) {\n\t\tcheckLevel(level)\n\n\t\treturn LOG_LEVEL_TO_INTEGER[level] <= levelAsInt\n\t}\n\n\tfunction getLevel() {\n\t\treturn internalState.level\n\t}\n\n\tfunction addCommonDetails(details: Readonly<LogDetails>): void {\n\t\tif (details.err)\n\t\t\tthrow new Error(`[${LIB}] Can't set reserved property \"err\"!`)\n\n\t\tinternalState.commonDetails = {\n\t\t\t...internalState.commonDetails,\n\t\t\t...details,\n\t\t}\n\t}\n\n\tfunction serializer(level: LogLevel, msg: string, { err, ...details }: Readonly<LogDetails>): LogPayload {\n\t\tconst payload: LogPayload = {\n\t\t\tlevel,\n\t\t\tname,\n\t\t\tmsg,\n\t\t\ttime: +(new Date()), // UTC timestamp\n\t\t\tdetails: {\n\t\t\t\t...internalState.commonDetails,\n\t\t\t\t...details,\n\t\t\t},\n\t\t}\n\t\tif (err)\n\t\t\tpayload.err = err\n\n\t\treturn payload\n\t}\n\n\treturn logger\n}\n","import { create as createLogger } from './core'\nexport { createLogger }\n\nexport * from '@offirmo/practical-logger-interface'\n\nexport {\n\tALL_LOG_LEVELS,\n\tLOG_LEVEL_TO_INTEGER,\n\tLOG_LEVEL_TO_HUMAN,\n\tDEFAULT_LOG_LEVEL,\n\tDEFAULT_LOGGER_KEY,\n} from './consts'\n\nexport { checkLevel } from './core'\nexport * from './normalize-args'\n\n","const { ALL_LOG_LEVELS } = require('..')\n\nfunction demo_standard_console() {\n\tconsole.log('------------‚Üì demo: standard console ‚Üì-----------')\n\tconsole.error('Standard console \"error\"')\n\tconsole.warn('Standard console \"warn\"')\n\tconsole.info('Standard console \"info\"')\n\tconsole.log('Standard console \"log\"')\n\tconsole.debug('Standard console \"debug\"')\n}\n\nfunction demo_logger_basic_usage(logger) {\n\tconsole.group('-----------‚Üì logger demo: basic usage ‚Üì-----------')\n\tlogger.verbose('Restoring state‚Ä¶')\n\tlogger.warn('Restoration is taking more time than usual', { elapsedMs: 3000 })\n\n\tconst bob = {\n\t\tfirstName: 'Bob',\n\t\tlastName: 'Dupont',\n\t\tage: 42,\n\t}\n\n\tlogger.verbose('Current user loaded', { user: bob })\n\n\tconst err = new Error('Timeout loading state!')\n\terr.httpStatus = 418 // to check that custom props are preserved\n\n\tlogger.error(undefined, err)\n\tconsole.groupEnd()\n}\n\nfunction demo_logger_levels(logger) {\n\tconsole.log('-----------‚Üì logger demo: all levels, in order ‚Üì-----------')\n\tALL_LOG_LEVELS.forEach(level =>\n\t\tlogger[level](`demo with level \"${level}\"`, { level, foo: 42 })\n\t)\n\n\t/*\nconsole.groupCollapsed('in group')\nALL_LOG_LEVELS.forEach(level =>\n    logger[level](`msg with level \"${level}\"`)\n)\nconsole.groupEnd()\n*/\n}\n\nfunction demo_group(logger) {\n\tconsole.log('-----------‚Üì logger demo: group ‚Üì-----------')\n\n\tlogger.group('level 1')\n\tlogger.log('in level 1')\n\n\tlogger.groupCollapsed('level 2a')\n\tlogger.log('in level 2a')\n\tlogger.groupEnd()\n\n\tlogger.groupCollapsed('level 2b')\n\tlogger.log('in level 2b')\n\tlogger.warn('warn from level 2b!')\n\tlogger.error(new Error('error from level 2b!'))\n\tlogger.groupEnd()\n\n\tlogger.log('where am I?')\n\tlogger.groupEnd()\n\tlogger.groupEnd()\n\tlogger.groupEnd()\n}\n\nfunction demo_incorrect_logger_invocations(logger) {\n\tconst bob = {\n\t\tfirstName: 'Bob',\n\t\tlastName: 'Dupont',\n\t\tage: 42,\n\t}\n\n\tconst more = 'some stuff'\n\n\tconst err = new Error('Timeout loading state!')\n\terr.httpStatus = 418 // to check that custom props are preserved\n\n\tconsole.group('-----------‚Üì logger demo: incorrect invocation (bunyan style) ‚Üì-----------')\n\tlogger.info()\n\n\tlogger.info('hi')\n\tlogger.info('hi %s', bob, more)\n\n\tlogger.info({foo: 'bar'}, 'hi')\n\n\tlogger.info(err)\n\tlogger.info(err, 'more on this: %s', more)\n\n\tlogger.info({foo: 'bar', err: err}, 'some msg about this error')\n\tlogger.warn('foo', 'bar', 42)\n\tconsole.groupEnd()\n}\n\nfunction demo_logger_api(getLogger) {\n\tconsole.log('-----------‚Üì logger creation and basic usage ‚Üì-----------')\n\tconst root_logger = getLogger({\n\t\tsuggestedLevel: 'silly',\n\t})\n\troot_logger.log('Starting up')\n\n\tconst logger = getLogger({\n\t\tname: 'Persistence',\n\t\tsuggestedLevel: 'silly',\n\t})\n\n\tdemo_logger_basic_usage(logger)\n\n\tdemo_logger_levels(logger)\n\n\tdemo_group(logger)\n\n\tdemo_incorrect_logger_invocations(logger)\n}\n\nfunction demo_error(logger) {\n\tconsole.group('-----------‚Üì logger demo: error display ‚Üì-----------')\n\n\tfunction foo() {\n\t\tfunction bar() {\n\t\t\tconst err = new Error('Test!')\n\t\t\terr.statusCode = 1234\n\t\t\terr.details = {\n\t\t\t\thello: 42,\n\t\t\t}\n\n\t\t\tthrow err\n\t\t}\n\t\tbar()\n\t}\n\n\ttry {\n\t\tfoo()\n\t}\n\tcatch (err) {\n\t\tlogger.log(err)\n\t\tlogger.log('log', err)\n\t\tlogger.log('log', { some: 'stuff', err })\n\t\tlogger.error(err)\n\t\tlogger.error('message', err)\n\t\tlogger.error('message', { some: 'stuff', err })\n\t\tlogger.error('message', { some: 'stuff' }, err)\n\t\tlogger.error('message', err, { some: 'stuff' })\n\t\tlogger.error('message', { some: 'stuff' })\n\t}\n\n\tconsole.groupEnd()\n}\n\nfunction demo_devtools_fonts() {\n\tconsole.group('-----------‚Üì available font styles ‚Üì-----------')\n\tconsole.log('default: ABCdef012')\n\n\t;[\n\t\t'-apple-system',\n\t\t'BlinkMacSystemFont',\n\t\t'\"avenir next\"',\n\t\t'avenir',\n\t\t'\"Segoe UI\"',\n\t\t'\"lucida grande\"',\n\t\t'\"helvetica neue\"',\n\t\t'helvetica',\n\t\t'\"Fira Sans\"',\n\t\t'roboto',\n\t\t//'noto',\n\t\t//'\"Droid Sans\"',\n\t\t//'cantarell',\n\t\t//'oxygen',\n\t\t//'ubuntu',\n\t\t//'\"franklin gothic medium\"',\n\t\t//'\"century gothic\"',\n\t\t'\"Liberation Sans\"',\n\t\t'sans-serif',\n\t\t'\"dejavu sans mono\"',\n\t\t'\"Fira Code\"',\n\t\t'Menlo',\n\t\t'Consolas',\n\t\t'\"Lucida Console\"',\n\t\t'\"Courier New\"',\n\t\t'monospace',\n\t].forEach(font => console.log(`%c${font}: ABCdefi012 %cABCdefi012`, `font-family: ${font};`, `font-family: unset;`))\n\tconsole.groupEnd()\n}\n\nmodule.exports = {\n\tdemo_standard_console,\n\tdemo_logger_basic_usage,\n\tdemo_logger_levels,\n\tdemo_error,\n\tdemo_group,\n\tdemo_incorrect_logger_invocations,\n\tdemo_logger_api,\n\tdemo_devtools_fonts,\n}\n","/* global: _debug */\n//import '../../src/injected-libs/universal-debug-api-control'\nimport {\n\tgetLogger,\n\texposeInternal,\n\toverrideHook,\n\taddDebugCommand,\n\tglobalThis,\n} from '@offirmo/universal-debug-api-minimal-noop'\n\nimport {\n\tdemo_standard_console,\n\tdemo_logger_basic_usage,\n\tdemo_logger_levels,\n\tdemo_error,\n\tdemo_group,\n\tdemo_incorrect_logger_invocations,\n\tdemo_logger_api,\n\tdemo_devtools_fonts,\n} from '../../../../1-foundation/practical-logger-core/doc/shared-demo'\n\nconst LIB = `üìÑ demo/head-script`\n\n\nconsole.warn(`[${LIB}.${+Date.now()}] Hello, more standard!`, {\n\tfoo_js: window.foo,\n\tfoo_ls: (() => {\n\t\ttry {\n\t\t\t// local files may not have local storage\n\t\t\treturn localStorage.getItem('foo')\n\t\t}\n\t\tcatch { /* ignore */ }\n\t})(),\n\t_debug,\n})\n\n//////////// usage\nconst logger = getLogger()\nlogger.info('Hello from root logger!')\n\nif (false) {\n\tdemo_logger_levels(logger)\n}\n\n_debug.v1.addDebugCommand('pause', () => {\n\tconsole.log('paused')\n})\n\nfunction render() {\n\tconst is_feature_x_on = overrideHook('is_feature_on', false)\n\tconst span_f = document.getElementById('feature-x')\n\tspan_f.innerText = is_feature_x_on ? '‚úÖ' : '‚ùå'\n\n\tconst server = overrideHook('SERVER_URL', 'https://www.online-adventur.es/')\n\tconst link = document.getElementById('server-url')\n\tlink.href = link.innerText = server\n\n\tconst variation = overrideHook('experiment_cohort', 'not-enrolled')\n\tconst span_x = document.getElementById('experiment')\n\tspan_x.innerText = variation\n\n\tconst custom = overrideHook('custom', undefined)\n\tconst span_c = document.getElementById('custom')\n\tspan_c.innerText = String(custom)\n}\nsetInterval(render, 1000)\nsetTimeout(render, 1) // just for it not to be sync\n\n//////////// communication ////////////\n\n/*\nfunction onMessage(event) {\n\tconsole.log(`[${LIB}.${+Date.now()}] seen postMessage:`, event.data)\n}\nconst listenerOptions = {\n\tcapture: false, // http://devdocs.io/dom/window/postmessage\n}\nwindow.addEventListener('message', onMessage, listenerOptions)\n*/\n/*\nconsole.log(`[${LIB}.${+Date.now()}] sending a test postMessage...`)\nwindow.postMessage({msg: `Test message from ${LIB}`}, '*')\n*/\n"]}