!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n.w={},n(n.s=256)}([function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",function(){return o}),n.d(t,"__assign",function(){return i}),n.d(t,"__rest",function(){return a}),n.d(t,"__decorate",function(){return s}),n.d(t,"__param",function(){return c}),n.d(t,"__metadata",function(){return l}),n.d(t,"__awaiter",function(){return u}),n.d(t,"__generator",function(){return h}),n.d(t,"__exportStar",function(){return p}),n.d(t,"__values",function(){return f}),n.d(t,"__read",function(){return d}),n.d(t,"__spread",function(){return m}),n.d(t,"__await",function(){return g}),n.d(t,"__asyncGenerator",function(){return _}),n.d(t,"__asyncDelegator",function(){return y}),n.d(t,"__asyncValues",function(){return v}),n.d(t,"__makeTemplateObject",function(){return b}),n.d(t,"__importStar",function(){return w}),n.d(t,"__importDefault",function(){return E});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};function o(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]])}return n}function s(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function c(e,t){return function(n,r){t(n,r,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}c((r=r.apply(e,t||[])).next())})}function h(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[0,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function p(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function f(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function d(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e}function g(e){return this instanceof g?(this.v=e,this):new g(e)}function _(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){o[e]&&(r[e]=function(t){return new Promise(function(n,r){i.push([e,t,n,r])>1||s(e,t)})})}function s(e,t){try{(n=o[e](t)).value instanceof g?Promise.resolve(n.value.v).then(c,l):u(i[0][2],n)}catch(e){u(i[0][3],e)}var n}function c(e){s("next",e)}function l(e){s("throw",e)}function u(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}function y(e){var t,n;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,o){e[r]&&(t[r]=function(t){return(n=!n)?{value:g(e[r](t)),done:"return"===r}:o?o(t):t})}}function v(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator];return t?t.call(e):f(e)}function b(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function w(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function E(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if("string"==typeof e[0]){for(var n={},r=0,o=e;r<o.length;r++){var i=o[r];n[i]=i}return n}return e[0]}Object.defineProperty(t,"__esModule",{value:!0}),t.Enum=r,function(e){function t(e){for(var t=[],n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];t.push(e[o])}return t}e.ofKeys=function(e){for(var t={},n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];t[o]=o}return t},e.keys=function(e){return Object.keys(e)},e.values=t,e.isType=function(e,n){return-1!==t(e).indexOf(n)}}(r=t.Enum||(t.Enum={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);r.__exportStar(n(41),t),r.__exportStar(n(86),t),r.__exportStar(n(85),t),r.__exportStar(n(84),t),r.__exportStar(n(239),t),r.__exportStar(n(238),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(68),i=n(202);t.to_debug=function(e){return o.walk(e,i.callbacks)};const a=n(201);t.to_text=function(e){return o.walk(e,a.callbacks)};const s=n(200);t.to_html=function(e){return o.walk(e,s.callbacks)},r.__exportStar(n(19),t),r.__exportStar(n(68),t),r.__exportStar(n(199),t)},function(e,t,n){var r;!function(o){"use strict";var i="function"!=typeof Math.imul||-5!==Math.imul(4294967295,5)?function(e,t){var n=65535&e,r=65535&t;return n*r+((e>>>16&65535)*r+n*(t>>>16&65535)<<16>>>0)|0}:Math.imul,a="function"==typeof String.prototype.repeat&&"xxx"==="x".repeat(3)?function(e,t){return e.repeat(t)}:function(e,t){for(var n="";t>0;)1&t&&(n+=e),t>>=1,e+=e;return n};function s(e){if(!(this instanceof s))return new s(e);if(null==e)e=s.engines.nativeMath;else if("function"!=typeof e)throw new TypeError("Expected engine to be a function, got "+typeof e);this.engine=e}var c,l,u=s.prototype;function h(e){return function(){return e}}function p(e,t){return 0===t?e:function(n){return e(n)+t}}function f(e){var t=+e;return t<0?Math.ceil(t):Math.floor(t)}function d(e,t){return e<0?Math.max(e+t,0):Math.min(e,t)}function m(){}s.engines={nativeMath:function(){return 4294967296*Math.random()|0},mt19937:function(e){function t(e){for(var t=0,n=0;(0|t)<227;t=t+1|0)n=2147483648&e[t]|2147483647&e[t+1|0],e[t]=e[t+397|0]^n>>>1^(1&n?2567483615:0);for(;(0|t)<623;t=t+1|0)n=2147483648&e[t]|2147483647&e[t+1|0],e[t]=e[t-227|0]^n>>>1^(1&n?2567483615:0);n=2147483648&e[623]|2147483647&e[0],e[623]=e[396]^n>>>1^(1&n?2567483615:0)}return function(){var n=new e(624),r=0,o=0;function a(){(0|r)>=624&&(t(n),r=0);var e=n[r];return r=r+1|0,o+=1,0|function(e){return e^=e>>>11,e^=e<<7&2636928640,(e^=e<<15&4022730752)^e>>>18}(e)}return a.getUseCount=function(){return o},a.discard=function(e){for(o+=e,(0|r)>=624&&(t(n),r=0);e-r>624;)e-=624-r,t(n),r=0;return r=r+e|0,a},a.seed=function(e){var t=0;n[0]=t=0|e;for(var s=1;s<624;s=s+1|0)n[s]=t=i(t^t>>>30,1812433253)+s|0;return r=624,o=0,a},a.seedWithArray=function(e){return a.seed(19650218),function(e,t){for(var n=1,r=0,o=t.length,a=0|Math.max(o,624),s=0|e[0];(0|a)>0;--a)e[n]=s=(e[n]^i(s^s>>>30,1664525))+(0|t[r])+(0|r)|0,++r,(0|(n=n+1|0))>623&&(e[0]=e[623],n=1),r>=o&&(r=0);for(a=623;(0|a)>0;--a)e[n]=s=(e[n]^i(s^s>>>30,1566083941))-n|0,(0|(n=n+1|0))>623&&(e[0]=e[623],n=1);e[0]=2147483648}(n,e),a},a.autoSeed=function(){return a.seedWithArray(s.generateEntropyArray())},a}}("function"==typeof Int32Array?Int32Array:Array),browserCrypto:"undefined"==typeof crypto||"function"!=typeof crypto.getRandomValues||"function"!=typeof Int32Array&&"object"!=typeof Int32Array?"function"==typeof n(40).randomBytes?function(){return n(40).randomBytes(4).readInt32BE(0)}:null:(c=null,l=128,function(){return l>=128&&(null===c&&(c=new Int32Array(128)),crypto.getRandomValues(c),l=0),0|c[l++]})},s.generateEntropyArray=function(){for(var e=[],t=s.engines.nativeMath,n=0;n<16;++n)e[n]=0|t();return e.push(0|(new Date).getTime()),e},s.int32=function(e){return 0|e()},u.int32=function(){return s.int32(this.engine)},s.uint32=function(e){return e()>>>0},u.uint32=function(){return s.uint32(this.engine)},s.uint53=function(e){return 4294967296*(2097151&e())+(e()>>>0)},u.uint53=function(){return s.uint53(this.engine)},s.uint53Full=function(e){for(;;){var t=0|e();if(!(2097152&t))return 4294967296*(2097151&t)+(e()>>>0);if(2097152==(4194303&t)&&0==(0|e()))return 9007199254740992}},u.uint53Full=function(){return s.uint53Full(this.engine)},s.int53=function(e){var t=0|e();return 4294967296*(2097151&t)+(e()>>>0)+(2097152&t?-9007199254740992:0)},u.int53=function(){return s.int53(this.engine)},s.int53Full=function(e){for(;;){var t=0|e();if(!(4194304&t))return 4294967296*(2097151&t)+(e()>>>0)+(2097152&t?-9007199254740992:0);if(4194304==(8388607&t)&&0==(0|e()))return 9007199254740992}},u.int53Full=function(){return s.int53Full(this.engine)},s.integer=function(){function e(e){return 0==(e+1&e)}function t(t){return e(t)?(n=t,function(e){return e()&n}):function(e){var t=e+1,n=t*Math.floor(4294967296/t);return function(e){var r=0;do{r=e()>>>0}while(r>=n);return r%t}}(t);var n}function n(t){var n,r=t+1;if(0==(0|r)){var o=(r/4294967296|0)-1;if(e(o))return n=o,function(e){return 4294967296*(e()&n)+(e()>>>0)}}return function(e){var t=e*Math.floor(9007199254740992/e);return function(n){var r=0;do{r=4294967296*(2097151&n())+(n()>>>0)}while(r>=t);return r%e}}(r)}function r(e,t){return function(n){var r=0;do{var o=0|n();r=4294967296*(2097151&o)+(n()>>>0)+(2097152&o?-9007199254740992:0)}while(r<e||r>t);return r}}return function(e,o){if(e=Math.floor(e),o=Math.floor(o),e<-9007199254740992||!isFinite(e))throw new RangeError("Expected min to be at least -9007199254740992");if(o>9007199254740992||!isFinite(o))throw new RangeError("Expected max to be at most 9007199254740992");var i=o-e;return i<=0||!isFinite(i)?h(e):4294967295===i?0===e?s.uint32:p(s.int32,e+2147483648):i<4294967295?p(t(i),e):9007199254740991===i?p(s.uint53,e):i<9007199254740991?p(n(i),e):o-1-e==9007199254740991?p(s.uint53Full,e):-9007199254740992===e&&9007199254740992===o?s.int53Full:-9007199254740992===e&&9007199254740991===o?s.int53:-9007199254740991===e&&9007199254740992===o?p(s.int53,1):9007199254740992===o?p(r(e-1,o-1),1):r(e,o)}}(),u.integer=function(e,t){return s.integer(e,t)(this.engine)},s.realZeroToOneInclusive=function(e){return s.uint53Full(e)/9007199254740992},u.realZeroToOneInclusive=function(){return s.realZeroToOneInclusive(this.engine)},s.realZeroToOneExclusive=function(e){return s.uint53(e)/9007199254740992},u.realZeroToOneExclusive=function(){return s.realZeroToOneExclusive(this.engine)},s.real=function(){return function(e,t,n){if(!isFinite(e))throw new RangeError("Expected left to be a finite number");if(!isFinite(t))throw new RangeError("Expected right to be a finite number");return p((r=n?s.realZeroToOneInclusive:s.realZeroToOneExclusive,1===(o=t-e)?r:0===o?function(){return 0}:function(e){return r(e)*o}),e);var r,o}}(),u.real=function(e,t,n){return s.real(e,t,n)(this.engine)},s.bool=function(){function e(e){return 1==(1&e())}function t(e,t){return function(n){return e(n)<t}}return function(n,r){return null==r?null==n?e:function(e){if(e<=0)return h(!1);if(e>=1)return h(!0);var n=4294967296*e;return n%1==0?t(s.int32,n-2147483648|0):t(s.uint53,Math.round(9007199254740992*e))}(n):n<=0?h(!1):n>=r?h(!0):t(s.integer(0,r-1),n)}}(),u.bool=function(e,t){return s.bool(e,t)(this.engine)},s.pick=function(e,t,n,r){var o=t.length,i=null==n?0:d(f(n),o),a=void 0===r?o:d(f(r),o);if(!(i>=a))return t[s.integer(i,a-1)(e)]},u.pick=function(e,t,n){return s.pick(this.engine,e,t,n)};var g,_,y=Array.prototype.slice;s.picker=function(e,t,n){var r=y.call(e,t,n);if(!r.length)return m;var o=s.integer(0,r.length-1);return function(e){return r[o(e)]}},s.shuffle=function(e,t,n){var r=t.length;if(r){null==n&&(n=0);for(var o=r-1>>>0;o>n;--o){var i=s.integer(0,o)(e);if(o!==i){var a=t[o];t[o]=t[i],t[i]=a}}}return t},u.shuffle=function(e){return s.shuffle(this.engine,e)},s.sample=function(e,t,n){if(n<0||n>t.length||!isFinite(n))throw new RangeError("Expected sampleSize to be within 0 and the length of the population");if(0===n)return[];var r=y.call(t),o=r.length;if(o===n)return s.shuffle(e,r,0);var i=o-n;return s.shuffle(e,r,i-1).slice(i)},u.sample=function(e,t){return s.sample(this.engine,e,t)},s.die=function(e){return s.integer(1,e)},u.die=function(e){return s.die(e)(this.engine)},s.dice=function(e,t){var n=s.die(e);return function(e){var r=[];r.length=t;for(var o=0;o<t;++o)r[o]=n(e);return r}},u.dice=function(e,t){return s.dice(e,t)(this.engine)},s.uuid4=function(){function e(e,t){return a("0",t-e.length)+e}return function(t){var n=t()>>>0,r=0|t(),o=0|t(),i=t()>>>0;return e(n.toString(16),8)+"-"+e((65535&r).toString(16),4)+"-"+e((r>>4&4095|16384).toString(16),4)+"-"+e((16383&o|32768).toString(16),4)+"-"+e((o>>4&65535).toString(16),4)+e(i.toString(16),8)}}(),u.uuid4=function(){return s.uuid4(this.engine)},s.string=function(e){null==e&&(e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_-");var t=e.length;if(!t)throw new Error("Expected pool not to be an empty string");var n=s.integer(0,t-1);return function(t,r){for(var o="",i=0;i<r;++i){var a=n(t);o+=e.charAt(a)}return o}},u.string=function(e,t){return s.string(t)(this.engine,e)},s.hex=(g=s.string("0123456789abcdef"),_=s.string("0123456789abcdef".toUpperCase()),function(e){return e?_:g}),u.hex=function(e,t){return s.hex(t)(this.engine,e)},s.date=function(e,t){if(!(e instanceof Date))throw new TypeError("Expected start to be a Date, got "+typeof e);if(!(t instanceof Date))throw new TypeError("Expected end to be a Date, got "+typeof t);var n=s.integer(e.getTime(),t.getTime());return function(e){return new Date(n(e))}},u.date=function(e,t){return s.date(e,t)(this.engine)},void 0===(r=function(){return{Random:s}}.call(t,n,t,e))||(e.exports=r)}()},function(e,t,n){"use strict";const r=n(189),o=n(188),i=n(183).stdout,a=n(181),s="win32"===process.platform&&!(process.env.TERM||"").toLowerCase().startsWith("xterm"),c=["ansi","ansi","ansi256","ansi16m"],l=new Set(["gray"]),u=Object.create(null);function h(e,t){t=t||{};const n=i?i.level:0;e.level=void 0===t.level?n:t.level,e.enabled="enabled"in t?t.enabled:e.level>0}function p(e){if(!this||!(this instanceof p)||this.template){const t={};return h(t,e),t.template=function(){const e=[].slice.call(arguments);return function(e,t){if(!Array.isArray(t))return[].slice.call(arguments,1).join(" ");const n=[].slice.call(arguments,2),r=[t.raw[0]];for(let e=1;e<t.length;e++)r.push(String(n[e-1]).replace(/[{}\\]/g,"\\$&")),r.push(String(t.raw[e]));return a(e,r.join(""))}.apply(null,[t.template].concat(e))},Object.setPrototypeOf(t,p.prototype),Object.setPrototypeOf(t.template,t),t.template.constructor=p,t.template}h(this,e)}s&&(o.blue.open="[94m");for(const e of Object.keys(o))o[e].closeRe=new RegExp(r(o[e].close),"g"),u[e]={get(){const t=o[e];return d.call(this,this._styles?this._styles.concat(t):[t],this._empty,e)}};u.visible={get(){return d.call(this,this._styles||[],!0,"visible")}},o.color.closeRe=new RegExp(r(o.color.close),"g");for(const e of Object.keys(o.color.ansi))l.has(e)||(u[e]={get(){const t=this.level;return function(){const n={open:o.color[c[t]][e].apply(null,arguments),close:o.color.close,closeRe:o.color.closeRe};return d.call(this,this._styles?this._styles.concat(n):[n],this._empty,e)}}});o.bgColor.closeRe=new RegExp(r(o.bgColor.close),"g");for(const e of Object.keys(o.bgColor.ansi)){if(l.has(e))continue;u["bg"+e[0].toUpperCase()+e.slice(1)]={get(){const t=this.level;return function(){const n={open:o.bgColor[c[t]][e].apply(null,arguments),close:o.bgColor.close,closeRe:o.bgColor.closeRe};return d.call(this,this._styles?this._styles.concat(n):[n],this._empty,e)}}}}const f=Object.defineProperties(()=>{},u);function d(e,t,n){const r=function(){return function(){const e=arguments,t=e.length;let n=String(arguments[0]);if(0===t)return"";if(t>1)for(let r=1;r<t;r++)n+=" "+e[r];if(!this.enabled||this.level<=0||!n)return this._empty?"":n;const r=o.dim.open;s&&this.hasGrey&&(o.dim.open="");for(const e of this._styles.slice().reverse())n=(n=e.open+n.replace(e.closeRe,e.open)+e.close).replace(/\r?\n/g,`${e.close}$&${e.open}`);return o.dim.open=r,n}.apply(r,arguments)};r._styles=e,r._empty=t;const i=this;return Object.defineProperty(r,"level",{enumerable:!0,get:()=>i.level,set(e){i.level=e}}),Object.defineProperty(r,"enabled",{enumerable:!0,get:()=>i.enabled,set(e){i.enabled=e}}),r.hasGrey=this.hasGrey||"gray"===n||"grey"===n,r.__proto__=f,r}Object.defineProperties(p.prototype,u),e.exports=p(),e.exports.supportsColor=i,e.exports.default=e.exports},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),o=n(4),i=n(221);t.i18n_messages=i.i18n_messages,t.static_weapon_data=i.ENTRIES;const a=n(219);t.WeaponPartType=a.WeaponPartType;const s=n(218),c=i.ENTRIES.filter(e=>e.type===a.WeaponPartType.base),l=i.ENTRIES.filter(e=>e.type===a.WeaponPartType.qualifier1),u=i.ENTRIES.filter(e=>e.type===a.WeaponPartType.qualifier2);t.MIN_ENHANCEMENT_LEVEL=0;const h=8;t.MAX_ENHANCEMENT_LEVEL=h;t.MIN_STRENGTH=1;t.MAX_STRENGTH=20;const p=o.Random.integer(1,20);function f(e,t={}){return Object.assign({slot:r.InventorySlot.weapon,base_hid:t.base_hid||function(e){return o.Random.pick(e,c).hid}(e),qualifier1_hid:t.qualifier1_hid||function(e){return o.Random.pick(e,l).hid}(e),qualifier2_hid:t.qualifier2_hid||function(e){return o.Random.pick(e,u).hid}(e)},r.create_item_base(r.InventorySlot.weapon,t.quality||function(e){return o.Random.bool(400,1e3)(e)?r.ItemQuality.common:o.Random.bool(389,600)(e)?r.ItemQuality.uncommon:o.Random.bool(200,211)(e)?r.ItemQuality.rare:o.Random.bool(10,11)(e)?r.ItemQuality.epic:r.ItemQuality.legendary}(e)),{base_strength:t.base_strength||p(e),enhancement_level:t.enhancement_level||0})}function d(e){return s.get_interval(e.base_strength,e.quality,e.enhancement_level)}function m(e){const t=d(e);return Math.round((t[0]+t[1])/2)}t.create=f,t.generate_random_demo_weapon=function(){const e=o.Random.engines.mt19937().autoSeed();return f(e,{enhancement_level:o.Random.integer(0,h)(e)})},t.compare_weapons_by_strength=function(e,t){const n=m(e),o=m(t);return n!==o?o-n:e.enhancement_level!==t.enhancement_level?e.enhancement_level-t.enhancement_level:r.compare_items_by_quality(e,t)||e.uuid.localeCompare(t.uuid)},t.enhance=function(e){if(e.enhancement_level>=h)throw new Error("can't enhance a weapon above the maximal enhancement level!");return e.enhancement_level++,e},t.get_damage_interval=d,t.get_medium_damage=m;const g={uuid:"uu1~test~demo~weapon~001",element_type:r.ElementType.item,slot:r.InventorySlot.weapon,base_hid:c[0].hid,qualifier1_hid:l[0].hid,qualifier2_hid:u[0].hid,quality:r.ItemQuality.uncommon,base_strength:2,enhancement_level:0};t.DEMO_WEAPON_1=g;const _={uuid:"uu1~test~demo~weapon~002",element_type:r.ElementType.item,slot:r.InventorySlot.weapon,base_hid:c[1].hid,qualifier1_hid:l[1].hid,qualifier2_hid:u[1].hid,quality:r.ItemQuality.legendary,base_strength:19,enhancement_level:h};t.DEMO_WEAPON_2=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),o=n(4),i=n(225);t.i18n_messages=i.i18n_messages,t.static_armor_data=i.ENTRIES;const a=n(223);t.ArmorPartType=a.ArmorPartType;const s=n(222),c=i.ENTRIES.filter(e=>e.type===a.ArmorPartType.base),l=i.ENTRIES.filter(e=>e.type===a.ArmorPartType.qualifier1),u=i.ENTRIES.filter(e=>e.type===a.ArmorPartType.qualifier2);t.MIN_ENHANCEMENT_LEVEL=0;const h=8;t.MAX_ENHANCEMENT_LEVEL=h;t.MIN_STRENGTH=1;t.MAX_STRENGTH=20;const p=o.Random.integer(1,20);function f(e,t={}){return Object.assign({base_hid:t.base_hid||function(e){return o.Random.pick(e,c).hid}(e),qualifier1_hid:t.qualifier1_hid||function(e){return o.Random.pick(e,l).hid}(e),qualifier2_hid:t.qualifier2_hid||function(e){return o.Random.pick(e,u).hid}(e)},r.create_item_base(r.InventorySlot.armor,t.quality||function(e){return o.Random.bool(400,1e3)(e)?r.ItemQuality.common:o.Random.bool(389,600)(e)?r.ItemQuality.uncommon:o.Random.bool(200,211)(e)?r.ItemQuality.rare:o.Random.bool(10,11)(e)?r.ItemQuality.epic:r.ItemQuality.legendary}(e)),{base_strength:t.base_strength||p(e),enhancement_level:t.enhancement_level||0})}function d(e){return s.get_interval(e.base_strength,e.quality,e.enhancement_level,.5)}function m(e){const t=d(e);return Math.round((t[0]+t[1])/2)}t.create=f,t.generate_random_demo_armor=function(){const e=o.Random.engines.mt19937().autoSeed();return f(e,{enhancement_level:o.Random.integer(0,h)(e)})},t.compare_armors_by_strength=function(e,t){const n=m(e),o=m(t);return n!==o?o-n:e.enhancement_level!==t.enhancement_level?e.enhancement_level-t.enhancement_level:r.compare_items_by_quality(e,t)||e.uuid.localeCompare(t.uuid)},t.enhance=function(e){if(e.enhancement_level>=h)throw new Error("can't enhance an armor above the maximal enhancement level!");return e.enhancement_level++,e},t.get_damage_reduction_interval=d,t.get_medium_damage_reduction=m;const g={uuid:"uu1~test~demo~armor~0001",element_type:r.ElementType.item,slot:r.InventorySlot.armor,base_hid:c[0].hid,qualifier1_hid:l[0].hid,qualifier2_hid:u[0].hid,quality:r.ItemQuality.uncommon,base_strength:2,enhancement_level:0};t.DEMO_ARMOR_1=g;const _={uuid:"uu1~test~demo~armor~0002",element_type:r.ElementType.item,slot:r.InventorySlot.armor,base_hid:c[1].hid,qualifier1_hid:l[1].hid,qualifier2_hid:u[1].hid,quality:r.ItemQuality.legendary,base_strength:19,enhancement_level:h};t.DEMO_ARMOR_2=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);r.__exportStar(n(78),t),r.__exportStar(n(226),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);r.__exportStar(n(80),t),r.__exportStar(n(228),t)},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("path")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);r.__exportStar(n(216),t),r.__exportStar(n(74),t),r.__exportStar(n(215),t),r.__exportStar(n(214),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);r.__exportStar(n(76),t),r.__exportStar(n(75),t),r.__exportStar(n(217),t)},function(e,t,n){var r={};e.exports=r,r.themes={};var o=r.styles=n(179),i=Object.defineProperties;r.supportsColor=n(178).supportsColor,void 0===r.enabled&&(r.enabled=!1!==r.supportsColor()),r.stripColors=r.strip=function(e){return(""+e).replace(/\x1B\[\d+m/g,"")};r.stylize=function(e,t){return r.enabled?o[t].open+e+o[t].close:e+""};var a=/[|\\{}()[\]^$+*?.]/g;function s(e){var t=function e(){return function(){var e=arguments,t=e.length,n=0!==t&&String(arguments[0]);if(t>1)for(var i=1;i<t;i++)n+=" "+e[i];if(!r.enabled||!n)return n;var a=this._styles,s=a.length;for(;s--;){var c=o[a[s]];n=c.open+n.replace(c.closeRe,c.open)+c.close}return n}.apply(e,arguments)};return t._styles=e,t.__proto__=u,t}var c,l=(c={},o.grey=o.gray,Object.keys(o).forEach(function(e){o[e].closeRe=new RegExp(function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(a,"\\$&")}(o[e].close),"g"),c[e]={get:function(){return s(this._styles.concat(e))}}}),c),u=i(function(){},l);r.setTheme=function(e){if("string"!=typeof e)for(var t in e)!function(t){r[t]=function(n){if("object"==typeof e[t]){var o=n;for(var i in e[t])o=r[e[t][i]](o);return o}return r[e[t]](n)}}(t);else console.log("colors.setTheme now only accepts an object, not a string.  If you are trying to set a theme from a file, it is now your (the caller's) responsibility to require the file.  The old syntax looked like colors.setTheme(__dirname + '/../themes/generic-logging.js'); The new syntax looks like colors.setTheme(require(__dirname + '/../themes/generic-logging.js'));")};var h=function(e,t){var n=t.split("");return(n=n.map(e)).join("")};for(var p in r.trap=n(176),r.zalgo=n(175),r.maps={},r.maps.america=n(174),r.maps.zebra=n(173),r.maps.rainbow=n(172),r.maps.random=n(171),r.maps)!function(e){r[e]=function(t){return h(r.maps[e],t)}}(p);i(r,function(){var e={};return Object.keys(l).forEach(function(t){e[t]={get:function(){return s([t])}}}),e}())},function(e,t){e.exports=function e(t){Object.freeze(t);var n="function"==typeof t,r=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(t).forEach(function(o){!r.call(t,o)||n&&("caller"===o||"callee"===o||"arguments"===o)||null===t[o]||"object"!=typeof t[o]&&"function"!=typeof t[o]||Object.isFrozen(t[o])||e(t[o])}),t}},function(e,t){e.exports=require("util")},function(e,t,n){"use strict";const r=n(62),o=n(5),i=n(31);const a=n(27),s=n(55);const c=n(135);e.exports={enclose_in_box:r,stylize_string:o,indent_string:a,wrap_lines:function(e,t){return s(t,{skipScheme:"ansi-color"})(e)},prettify_json:function(e,t){return i.render(e,t)},clear_terminal:function(){process.stdout.write(c.clearScreen)}}},function(e,t){e.exports=require("os")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1).Enum("span","br","hr","ol","ul","li","strong","em","section","heading");t.NodeType=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.LIB="soft-execution-context";t.INTERNAL_PROP="_"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.LIB="@oh-my-rpg/state-the-boring-rpg";t.SCHEMA_VERSION=4;t.GAME_VERSION="0.10.0";t.URL_OF_WEBSITE="https://www.online-adventur.es/the-boring-rpg";t.URL_OF_PRODUCT_HUNT_PAGE="https://www.producthunt.com/upcoming/the-npm-rpg";t.URL_OF_REPO="https://github.com/Offirmo/offirmo-monorepo/tree/master/apps/the-boring-rpg";t.URL_OF_FORK="https://github.com/Offirmo/offirmo-monorepo#fork-destination-box";t.URL_OF_ISSUES="https://github.com/Offirmo/offirmo-monorepo/issues";t.URL_OF_REDDIT_PAGE="https://www.reddit.com/r/boringrpg/"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);r.__exportStar(n(21),t),r.__exportStar(n(42),t),r.__exportStar(n(69),t),r.__exportStar(n(204),t),r.__exportStar(n(35),t),r.__exportStar(n(198),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(8),i=r.__importStar(n(3));function a(e,t){return i.span().addClass("currency--"+e).pushNode(i.span().pushText(""+t).done(),"amount").pushText(" "+e+(1===t?"":"s")).done()}t.render_currency_amount=a,t.render_wallet=function(e){const t=i.unordered_list().addClass("inventory--wallet").done();return o.ALL_CURRENCIES.forEach(n=>{const r=o.get_currency_amount(e,n);t.$sub[n]=a(n,r)}),i.section().pushNode(i.heading().pushText("Wallet:").done(),"header").pushNode(t,"list").done()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(2),i=n(7),a=n(6),s=r.__importStar(n(3)),c=n(7),l=n(6);function u(e){if(e.slot!==o.InventorySlot.armor)throw new Error(`render_armor(): can't render a ${e.slot}!`);const t=c.i18n_messages.en,n=t.armor.base[e.base_hid],r=t.armor.qualifier1[e.qualifier1_hid],i=t.armor.qualifier2[e.qualifier2_hid],a=s.span().addClass("item__name").pushText(i.startsWith("of")?"{{q1|Capitalize}} {{base|Capitalize}} {{q2|Capitalize}}":"{{q2|Capitalize}} {{q1|Capitalize}} {{base|Capitalize}}");if(e.enhancement_level){const t=s.span().addClass("item--enhancement").pushText(`+${e.enhancement_level}`).done();a.pushText(" ").pushNode(t,"enhancement")}const l=a.done();return l.$sub.base=s.span().pushText(n).done(),l.$sub.q1=s.span().pushText(r).done(),l.$sub.q2=s.span().pushText(i).done(),l}function h(e){if(e.slot!==o.InventorySlot.weapon)throw new Error(`render_weapon(): can't render a ${e.slot}!`);const t=l.i18n_messages.en,n=t.weapon.base[e.base_hid],r=t.weapon.qualifier1[e.qualifier1_hid],i=t.weapon.qualifier2[e.qualifier2_hid],a=s.span().addClass("item__name").pushText(i.startsWith("of")?"{{q1|Capitalize}} {{base|Capitalize}} {{q2|Capitalize}}":"{{q2|Capitalize}} {{q1|Capitalize}} {{base|Capitalize}}");if(e.enhancement_level){const t=s.span().addClass("item--enhancement").pushText(`+${e.enhancement_level}`).done();a.pushText(" ").pushNode(t,"enhancement")}const c=a.done();return c.$sub.base=s.span().pushText(n).done(),c.$sub.q1=s.span().pushText(r).done(),c.$sub.q2=s.span().pushText(i).done(),c}t.render_armor_name=u,t.render_weapon_name=h;const p={display_quality:!0,display_values:!0};function f(e,t=p){if(e.slot!==o.InventorySlot.armor)throw new Error(`render_armor(): can't render a ${e.slot}!`);const n=s.span().pushText(e.quality).done(),[r,a]=i.get_damage_reduction_interval(e),c=s.span().addClass("armor--values").pushText(`[absorbs ${r} to ${a} damage]`).done(),l=s.span().addClass("item--armor","item--quality--"+e.quality).pushRawNode(n,"quality").pushRawNode(u(e),"name").pushRawNode(c,"values");return t.display_quality&&l.pushText("{{quality}} "),l.pushText("{{name}}"),t.display_values&&l.pushText(" {{values}}"),l.done()}function d(e,t=p){if(e.slot!==o.InventorySlot.weapon)throw new Error(`render_weapon(): can't render a ${e.slot}!`);const n=s.span().pushText(e.quality).done(),[r,i]=a.get_damage_interval(e),c=s.span().addClass("weapon--values").pushText(`[deals ${r} to ${i} damage]`).done(),l=s.span().addClass("item--weapon","item--quality--"+e.quality).pushRawNode(n,"quality").pushRawNode(h(e),"name").pushRawNode(c,"values");return t.display_quality&&l.pushText("{{quality}} "),l.pushText("{{name}}"),t.display_values&&l.pushText(" {{values}}"),l.done()}t.render_armor=f,t.render_weapon=d,t.render_item=function(e,t=p){if(!e)throw new Error("render_item(): no item provided!");const n=function(){switch(e.slot){case o.InventorySlot.armor:return f(e,t);case o.InventorySlot.weapon:return d(e,t);default:throw new Error(`render_item(): don't know how to render a "${e.slot}" !`)}}();return n.$classes.push("item"),n.$hints.uuid=e.uuid,n}},function(e,t,n){"use strict";var r=n(47),o=n(51),i=n(50);e.exports=function(e){if("string"!=typeof e||0===e.length)return 0;var t=0;e=r(e);for(var n=0;n<e.length;n++){var a=o(e,n);a<=31||a>=127&&a<=159||(a>=65536&&n++,i(a)?t+=2:t++)}return t}},function(e,t,n){"use strict";var r={"*":{label:"any",check:function(){return!0}},A:{label:"array",check:function(e){return Array.isArray(e)||function(e){return null!=e&&"object"==typeof e&&e.hasOwnProperty("callee")}(e)}},S:{label:"string",check:function(e){return"string"==typeof e}},N:{label:"number",check:function(e){return"number"==typeof e}},F:{label:"function",check:function(e){return"function"==typeof e}},O:{label:"object",check:function(e){return"object"==typeof e&&null!=e&&!r.A.check(e)&&!r.E.check(e)}},B:{label:"boolean",check:function(e){return"boolean"==typeof e}},E:{label:"error",check:function(e){return e instanceof Error}},Z:{label:"null",check:function(e){return null==e}}};function o(e,t){var n=t[e.length]=t[e.length]||[];-1===n.indexOf(e)&&n.push(e)}var i=e.exports=function(e,t){if(2!==arguments.length)throw u(["SA"],arguments.length);if(!e)throw a(0);if(!t)throw a(1);if(!r.S.check(e))throw c(0,["string"],e);if(!r.A.check(t))throw c(1,["array"],t);var n={};e.split("|").forEach(function(e){for(var t=0;t<e.length;++t){var i=e[t];if(!r[i])throw s(t,i)}if(/E.*E/.test(e))throw function(e){return h("ETOOMANYERRORTYPES",'Only one error type per argument signature is allowed, more than one found in "'+e+'"')}(e);o(e,n),/E/.test(e)&&(o(e.replace(/E.*$/,"E"),n),o(e.replace(/E/,"Z"),n),1===e.length&&o("",n))});var i=n[t.length];if(!i)throw u(Object.keys(n),t.length);for(var l=0;l<t.length;++l){var p=i.filter(function(e){var n=e[l];return(0,r[n].check)(t[l])});if(!p.length){var f=i.map(function(e){return r[e[l]].label}).filter(function(e){return null!=e});throw c(l,f,t[l])}i=p}};function a(e){return h("EMISSINGARG","Missing required argument #"+(e+1))}function s(e,t){return h("EUNKNOWNTYPE","Unknown type "+t+" in argument #"+(e+1))}function c(e,t,n){var o;return Object.keys(r).forEach(function(e){r[e].check(n)&&(o=r[e].label)}),h("EINVALIDTYPE","Argument #"+(e+1)+": Expected "+l(t)+" but got "+o)}function l(e){return e.join(", ").replace(/, ([^,]+)$/," or $1")}function u(e,t){return h("EWRONGARGCOUNT","Expected "+l(e)+" "+(e.every(function(e){return 1===e.length})?"argument":"arguments")+" but got "+t)}function h(e,t){var n=new Error(t);return n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,i),n}},function(e,t,n){"use strict";e.exports=((e,t,n)=>{const r="object"==typeof n?Object.assign({indent:" "},n):{indent:n||" "};if(t=void 0===t?1:t,"string"!=typeof e)throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof e}\``);if("number"!=typeof t)throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof t}\``);if("string"!=typeof r.indent)throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof r.indent}\``);if(0===t)return e;const o=r.includeEmptyLines?/^/gm:/^(?!\s*$)/gm;return e.replace(o,r.indent.repeat(t))})},function(e,t,n){var r,o=n(88),i=n(139),a=n(138);function s(){u&&(u=!1,i.forEach(function(e){try{process.removeListener(e,l[e])}catch(e){}}),process.emit=d,process.reallyExit=p,r.count-=1)}function c(e,t,n){r.emitted[e]||(r.emitted[e]=!0,r.emit(e,t,n))}"function"!=typeof a&&(a=a.EventEmitter),process.__signal_exit_emitter__?r=process.__signal_exit_emitter__:((r=process.__signal_exit_emitter__=new a).count=0,r.emitted={}),r.infinite||(r.setMaxListeners(1/0),r.infinite=!0),e.exports=function(e,t){o.equal(typeof e,"function","a callback must be provided for exit handler"),!1===u&&h();var n="exit";t&&t.alwaysLast&&(n="afterexit");return r.on(n,e),function(){r.removeListener(n,e),0===r.listeners("exit").length&&0===r.listeners("afterexit").length&&s()}},e.exports.unload=s;var l={};i.forEach(function(e){l[e]=function(){process.listeners(e).length===r.count&&(s(),c("exit",null,e),c("afterexit",null,e),process.kill(process.pid,e))}}),e.exports.signals=function(){return i},e.exports.load=h;var u=!1;function h(){u||(u=!0,r.count+=1,i=i.filter(function(e){try{return process.on(e,l[e]),!0}catch(e){return!1}}),process.emit=m,process.reallyExit=f)}var p=process.reallyExit;function f(e){process.exitCode=e||0,c("exit",process.exitCode,null),c("afterexit",process.exitCode,null),p.call(process,process.exitCode)}var d=process.emit;function m(e,t){if("exit"===e){void 0!==t&&(process.exitCode=t);var n=d.apply(this,arguments);return c("exit",process.exitCode,null),c("afterexit",process.exitCode,null),n}return d.apply(this,arguments)}},function(e,t){e.exports=require("child_process")},function(e,t,n){"use strict";const r=n(61),o=n(167);e.exports=(e=>{if("string"!=typeof e||0===e.length)return 0;e=r(e);let t=0;for(let n=0;n<e.length;n++){const r=e.codePointAt(n);r<=31||r>=127&&r<=159||(r>=768&&r<=879||(r>65535&&n++,t+=o(r)?2:1))}return t})},function(e,t,n){"use strict";var r=n(180),o=n(170);t.version=n(169).version;var i=function(e,t,n){return"boolean"==typeof e||"number"==typeof e||"function"==typeof e||null===e||e instanceof Date||("string"==typeof e&&-1===e.indexOf("\n")||!(!n.inlineArrays||t||!Array.isArray(e)||!i(e[0],!0,n)))},a=function(e,t,n){if(i(e,!1,t))return[o.indent(n)+function(e,t){if(t.noColor)return e;if("string"==typeof e)return t.stringColor?r[t.stringColor](e):e;var n=e+"";return!0===e?r.green(n):!1===e?r.red(n):null===e?r.grey(n):"number"==typeof e?r[t.numberColor](n):"function"==typeof e?"function() {}":Array.isArray(e)?e.join(", "):n}(e,t)];if("string"==typeof e)return[o.indent(n)+'"""',(s=e,c=n+t.defaultIndentation,l=s.split("\n"),(l=l.map(function(e){return o.indent(c)+e})).join("\n")),o.indent(n)+'"""'];var s,c,l;if(Array.isArray(e)){if(0===e.length)return[o.indent(n)+t.emptyArrayMsg];var u=[];return e.forEach(function(e){var s="- ";t.noColor||(s=r[t.dashColor](s)),s=o.indent(n)+s,i(e,!1,t)?(s+=a(e,t,0)[0],u.push(s)):(u.push(s),u.push.apply(u,a(e,t,n+t.defaultIndentation)))}),u}if(e instanceof Error)return a({message:e.message,stack:e.stack.split("\n")},t,n);var h,p=t.noAlign?0:o.getMaxIndexLength(e),f=[];return Object.getOwnPropertyNames(e).forEach(function(s){if(h=s+": ",t.noColor||(h=r[t.keysColor](h)),h=o.indent(n)+h,void 0!==e[s])if(i(e[s],!1,t)){var c=t.noAlign?0:p-s.length;h+=a(e[s],t,c)[0],f.push(h)}else f.push(h),f.push.apply(f,a(e[s],t,n+t.defaultIndentation))}),f};t.render=function(e,t,n){return n=n||0,(t=t||{}).emptyArrayMsg=t.emptyArrayMsg||"(empty array)",t.keysColor=t.keysColor||"green",t.dashColor=t.dashColor||"green",t.numberColor=t.numberColor||"blue",t.defaultIndentation=t.defaultIndentation||2,t.noColor=!!t.noColor,t.noAlign=!!t.noAlign,t.stringColor=t.stringColor||null,a(e,t,n).join("\n")},t.renderString=function(e,n,o){var i,a,s="";if("string"!=typeof e||""===e)return"";"{"!==e[0]&&"["!==e[0]&&(a=-1===e.indexOf("{")?e.indexOf("["):-1===e.indexOf("[")?e.indexOf("{"):e.indexOf("{")<e.indexOf("[")?e.indexOf("{"):e.indexOf("["),s+=e.substr(0,a)+"\n",e=e.substr(a));try{i=JSON.parse(e)}catch(e){return r.red("Error:")+" Not valid JSON!"}return s+=t.render(i,n,o)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1).Enum("fatal","emerg","alert","crit","error","warning","warn","notice","info","verbose","log","debug","trace","silly");t.LogLevel=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.LIB="@offirmo/rich-text-format";t.SCHEMA_VERSION=1},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),o=n(21);t.get_SEC=function(e){return r.oh_my_rpg_get_SEC({module:o.LIB,parent_SEC:e})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),o=r.Enum("play","equip_item","sell_item","rename_avatar","change_avatar_class");t.ActionType=o;const i=r.Enum("base","inventory","character","meta");t.ActionCategory=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.LIB="@oh-my-rpg/state-prng";t.SCHEMA_VERSION=2},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.LIB="@oh-my-rpg/state-inventory";t.SCHEMA_VERSION=1},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.LIB="@oh-my-rpg/state-character";t.SCHEMA_VERSION=2},function(e,t,n){"use strict";function r(){return new Set(["name","message","stack","logicalStack"])}Object.defineProperty(t,"__esModule",{value:!0}),t.create=r;const o=r();t.COMMON_ERROR_FIELDS=o},function(e,t){e.exports=require("crypto")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),o=r.Enum("item","location","lore");t.ElementType=o;const i=r.Enum("common","uncommon","rare","epic","legendary","artifact");t.ItemQuality=i;const a=r.Enum("weapon","armor");t.InventorySlot=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=r.__importDefault(n(15)),i=n(2),a=r.__importStar(n(9)),s=n(9),c=r.__importStar(n(8)),l=n(8),u=r.__importStar(n(13)),h=r.__importStar(n(12)),p=n(12),f=n(6),d=n(7),m=n(73),g=n(209),_=n(21),y=n(208);t.GainType=y.GainType;const v=n(35),b=n(207),w=n(34);function E(e,t){const n=u.get_item(e.inventory,t);if(!n)throw new Error("Sell: No item!");return g.appraise(n)}function x(e,t){return e=Object.assign({},b.play_good(e,t),{click_count:e.click_count+1,meaningful_interaction_count:e.meaningful_interaction_count+1,revision:e.revision+1})}function T(e,t){return e=Object.assign({},e,{inventory:u.equip_item(e.inventory,t),meaningful_interaction_count:e.meaningful_interaction_count+1,revision:e.revision+1})}function k(e,t){const n=E(e,t);return e=Object.assign({},e,{inventory:u.remove_item_from_unslotted(e.inventory,t),wallet:c.add_amount(e.wallet,l.Currency.coin,n),meaningful_interaction_count:e.meaningful_interaction_count+1,revision:e.revision+1})}function O(e,t){return e=Object.assign({},e,{avatar:s.rename(w.get_SEC(),e.avatar,t),meaningful_interaction_count:e.meaningful_interaction_count+1,revision:e.revision+1})}function S(e,t){return e=Object.assign({},e,{avatar:s.switch_class(w.get_SEC(),e.avatar,t),meaningful_interaction_count:e.meaningful_interaction_count+1,revision:e.revision+1})}t.appraise_item=E,t.find_element=function(e,t){return u.get_item(e.inventory,t)},t.get_actions_for_element=function(e,t){const n=[];return u.get_unslotted_item(e.inventory,t)&&n.push(...function(e,t){const n=[],r={type:v.ActionType.equip_item,category:v.ActionCategory.inventory,expected_state_revision:e.revision,target_uuid:t};n.push(r);const o={type:v.ActionType.sell_item,category:v.ActionCategory.inventory,expected_state_revision:e.revision,target_uuid:t};return n.push(o),n}(e,t)),n},t.create=function(){let e={schema_version:_.SCHEMA_VERSION,revision:0,avatar:a.create(w.get_SEC()),inventory:u.create(),wallet:c.create(),prng:h.create(),last_adventure:null,click_count:0,good_click_count:0,meaningful_interaction_count:0},t=p.get_prng(e.prng);const n=f.create(t,{base_hid:"spoon",qualifier1_hid:"used",qualifier2_hid:"noob",quality:i.ItemQuality.common,base_strength:1});e=T(e=b.receive_item(e,n),n.uuid);const r=d.create(t,{base_hid:"socks",qualifier1_hid:"used",qualifier2_hid:"noob",quality:"common",base_strength:1});return e=T(e=b.receive_item(e,r),r.uuid),e=Object.assign({},e,{meaningful_interaction_count:0,revision:0})},t.reseed=function(e,t){return t=t||p.generate_random_seed(),e=Object.assign({},e,{prng:h.set_seed(e.prng,t)})},t.play=x,t.equip_item=T,t.sell_item=k,t.rename_avatar=O,t.change_avatar_class=S,t.execute=function(e,t){const{expected_state_revision:n}=t;if(n&&e.revision!==n)throw new Error("Trying to execute an outdated action!");switch(t.type){case v.ActionType.play:return x(e);case v.ActionType.equip_item:return T(e,t.target_uuid);case v.ActionType.sell_item:return k(e,t.target_uuid);case v.ActionType.rename_avatar:return O(e,t.new_name);case v.ActionType.change_avatar_class:return S(e,t.new_class);default:throw new Error("Unrecognized action!")}};const L=o.default({hid:"fight_lost_any",uuid:"uu1de1~EVAdXlW5_p23Ro4OH",good:!0,encounter:m.DEMO_MONSTER_01,gains:{level:0,health:0,mana:0,strength:0,agility:0,charisma:0,wisdom:0,luck:1,coin:0,token:0,armor:null,weapon:null,armor_improvement:!1,weapon_improvement:!1}});t.DEMO_ADVENTURE_01=L;const j=o.default({hid:"dying_man",uuid:"uu1de2~p23Ro4OH_EVAdXlW5",good:!0,gains:{level:0,health:0,mana:0,strength:0,agility:0,charisma:0,wisdom:0,luck:0,coin:1234,token:0,weapon:null,armor:null,weapon_improvement:!1,armor_improvement:!1}});t.DEMO_ADVENTURE_02=j;const R=o.default({hid:"rare_goods_seller",uuid:"uu1de2~p23Ro4OH_EVAdXlW5",good:!0,gains:{level:0,health:0,mana:0,strength:0,agility:0,charisma:0,wisdom:0,luck:0,coin:0,token:0,weapon:f.DEMO_WEAPON_1,armor:null,weapon_improvement:!1,armor_improvement:!1}});t.DEMO_ADVENTURE_03=R;const C=o.default({hid:"princess",uuid:"uu1de2~p23Ro4OH_EVAdXlW5",good:!0,gains:{level:0,health:0,mana:0,strength:0,agility:0,charisma:0,wisdom:0,luck:0,coin:123,token:0,weapon:null,armor:null,weapon_improvement:!1,armor_improvement:!0}});t.DEMO_ADVENTURE_04=C;const A=o.default({schema_version:4,revision:203,avatar:a.DEMO_STATE,inventory:u.DEMO_STATE,wallet:c.DEMO_STATE,prng:h.DEMO_STATE,last_adventure:L,click_count:86,good_click_count:86,meaningful_interaction_count:86});t.DEMO_STATE=A;const I=o.default({schema_version:4,revision:203,avatar:{schema_version:2,revision:42,name:"Perte",klass:"paladin",attributes:{level:13,health:12,mana:23,strength:4,agility:5,charisma:6,wisdom:7,luck:8}},inventory:{schema_version:1,revision:42,unslotted_capacity:20,slotted:{armor:{uuid:"uu1~test~demo~armor~0002",element_type:"item",slot:"armor",base_hid:"belt",qualifier1_hid:"brass",qualifier2_hid:"apprentice",quality:"legendary",base_strength:19,enhancement_level:8},weapon:{uuid:"uu1~test~demo~weapon~001",element_type:"item",slot:"weapon",base_hid:"axe",qualifier1_hid:"admirable",qualifier2_hid:"adjudicator",quality:"uncommon",base_strength:2,enhancement_level:0}},unslotted:[{uuid:"uu1~test~demo~weapon~002",element_type:"item",slot:"weapon",base_hid:"bow",qualifier1_hid:"arcanic",qualifier2_hid:"ambassador",quality:"legendary",base_strength:19,enhancement_level:8},{uuid:"uu1~test~demo~armor~0001",element_type:"item",slot:"armor",base_hid:"armguards",qualifier1_hid:"bone",qualifier2_hid:"ancients",quality:"uncommon",base_strength:2,enhancement_level:0},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]},wallet:{schema_version:1,revision:42,coin_count:23456,token_count:89},prng:{schema_version:1,revision:108,seed:1234,use_count:107},last_adventure:{hid:"fight_lost_any",uuid:"uu1de1~EVAdXlW5_p23Ro4OH",good:!0,encounter:{name:"chicken",level:7,rank:"elite",possible_emoji:"🐓"},gains:{level:0,health:0,mana:0,strength:0,agility:0,charisma:0,wisdom:0,luck:1,coin:0,token:0,armor:null,weapon:null,armor_improvement:!1,weapon_improvement:!1}},click_count:86,good_click_count:86,meaningful_interaction_count:86});t.OLDEST_LEGACY_STATE_FOR_TESTS=I;const M=o.default({to_v5:{},avatar:a.MIGRATION_HINTS_FOR_TESTS,inventory:u.MIGRATION_HINTS_FOR_TESTS,wallet:c.MIGRATION_HINTS_FOR_TESTS,prng:h.MIGRATION_HINTS_FOR_TESTS});t.MIGRATION_HINTS_FOR_TESTS=M},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0).__importStar(n(3));t.render_monster=function(e){const t=r.span().addClass("monster","monster--rank--"+e.rank).pushText("{{level}} {{rank}} {{name||Capitalize}}").pushRawNode(r.span().pushText("L").pushText(""+e.level).done(),"level").pushRawNode(r.span().addClass("rank--"+e.rank).pushText(e.rank).done(),"rank").pushRawNode(r.span().addClass("monster__name").pushText(e.name).done(),"name").done();return t.$hints.possible_emoji=e.possible_emoji,t}},function(e,t,n){"use strict";const r=n(104),o=e=>{let t=0;for(const n of e.values())t+=n;return t};class i extends Promise{static fn(e){return(...t)=>new i((n,r,o)=>{t.push(o),e(...t).then(n,r)})}static all(e,t){return i.fn(n=>{const a=new Map,s=e[Symbol.iterator](),c=()=>{n(o(a)/e.length)};return r(new Array(e.length),async()=>{const e=s.next().value;a.set(e,0),e instanceof i&&e.onProgress(t=>{a.set(e,t),c()});const t=await e;return a.set(e,1),c(),t},t)})()}constructor(e){const t=e=>{if(e>1||e<0)throw new TypeError("The progress percentage should be a number between 0 and 1");Promise.resolve().then(()=>{if(e!==this._progress){if(e<this._progress)throw new Error("The progress percentage can't be lower than the last progress event");this._progress=e;for(const t of this._listeners)t(e)}})};super((n,r)=>{e(e=>{t(1),n(e)},r,e=>{1!==e&&t(e)})}),this._listeners=new Set,this._progressFn=t,this._progress=0}get progress(){return this._progress}onProgress(e){if("function"!=typeof e)throw new TypeError(`Expected a \`Function\`, got \`${typeof e}\``);return this._listeners.add(e),this}}e.exports=i},function(e,t,n){"use strict";const r=n(44),o=n(5),i=n(31);const a=n(27);const s=n(55);const c=n(62);e.exports={PromiseWithProgress:r,stylize_string:o,prettify_json:function(e,t){return i.render(e,t)},indent_string:function(e,t,n={}){let r=a(e,t,n);if(!n||!n.indent||" "===n.indent)return r;const o=Array(t).fill(n.indent).join("");return r.split("\n").map(e=>e.startsWith(o)?e:o+e).join("\n")},wrap_string:function(e,t){return s(t,{skipScheme:"ansi-color"})(e)},enclose_in_box:c}},function(e,t,n){"use strict";e.exports=process},function(e,t,n){"use strict";var r=n(52)();e.exports=function(e){return"string"==typeof e?e.replace(r,""):e}},function(e,t,n){"use strict";var r=n(25),o=n(47);e.exports=function(e,t){if(0===r(e))return e;if(t<=0)return"";if(r(e)<=t)return e;var n=o(e),i=e.length+n.length,a=e.slice(0,t+i);for(;r(a)>t;)a=a.slice(0,-1);return a}},function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,a,s=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))o.call(n,l)&&(s[l]=n[l]);if(r){a=r(n);for(var u=0;u<a.length;u++)i.call(n,a[u])&&(s[a[u]]=n[a[u]])}}return s}},function(e,t,n){"use strict";var r=n(116);e.exports=function(e){return!r(e)&&(e>=4352&&(e<=4447||9001===e||9002===e||11904<=e&&e<=12871&&12351!==e||12880<=e&&e<=19903||19968<=e&&e<=42182||43360<=e&&e<=43388||44032<=e&&e<=55203||63744<=e&&e<=64255||65040<=e&&e<=65049||65072<=e&&e<=65131||65281<=e&&e<=65376||65504<=e&&e<=65510||110592<=e&&e<=110593||127488<=e&&e<=127569||131072<=e&&e<=262141))}},function(e,t,n){"use strict";e.exports=function(e,t){if(null===e||void 0===e)throw TypeError();var n=(e=String(e)).length,r=t?Number(t):0;if(Number.isNaN(r)&&(r=0),!(r<0||r>=n)){var o=e.charCodeAt(r);if(o>=55296&&o<=56319&&n>r+1){var i=e.charCodeAt(r+1);if(i>=56320&&i<=57343)return 1024*(o-55296)+i-56320+65536}return o}}},function(e,t,n){"use strict";e.exports=function(){return/[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-PRZcf-nqry=><]/g}},function(e,t,n){"use strict";var r=n(119),o=n(26),i=n(49),a=n(48),s=n(115),c=n(114);function l(e){return function(t){return function(e,t){var n=e.getBaseLength(),i="function"==typeof e.value?function(e,t,n){return o("OON",arguments),e.type?e.value(t,t[e.type+"Theme"]||{},n):e.value(t,{},n)}(e,t,n):e.value;if(null==i||""===i)return"";var s=r[e.align]||r.left,c=e.padLeft?r.left("",e.padLeft):"",l=e.padRight?r.right("",e.padRight):"",u=a(String(i),n),h=s(u,n);return c+h+l}(t,e)}}var u=e.exports=function(e,t,n){var o=function(e,t,n){var r=t.map(function(t,r,o){var a=new c(t,e),l=a.type;if(null==a.value)if(l in n)a.value=n[l];else{if(null==a.default)throw new s.MissingTemplateValue(a,n);a.value=a.default}if(null==a.value||""===a.value)return null;a.index=r,a.first=0===r,a.last=r===o.length-1,function(e,t){if(e.type)return t[h(e)]||t[p(e)]}(a,n)&&(a.value=function(e,t){var n=i({},e),r=Object.create(t),o=[],a=h(n),s=p(n);r[a]&&(o.push({value:r[a]}),r[a]=null);n.minLength=null,n.length=null,n.maxLength=null,o.push(n),r[n.type]=r[n.type],r[s]&&(o.push({value:r[s]}),r[s]=null);return function(e,t,n){return u(n,o,r)}}(a,n));return a}).filter(function(e){return null!=e}),o=e,a=r.length;function l(e,t){if(e.finished)throw new s.Internal("Tried to finish template item that was already finished");if(t===1/0)throw new s.Internal("Length of template item cannot be infinity");if(null!=t&&(e.length=t),e.minLength=null,e.maxLength=null,--a,e.finished=!0,null==e.length&&(e.length=e.getBaseLength()),null==e.length)throw new s.Internal("Finished template items must have a length");!function(e){e>o&&(e=o);e,o-=e}(e.getLength())}r.forEach(function(e){if(e.kerning){var t=e.first?0:r[e.index-1].padRight;!e.first&&t<e.kerning&&(e.padLeft=e.kerning-t),e.last||(e.padRight=e.kerning)}}),r.forEach(function(e){null!=e.getBaseLength()&&l(e)});var f,d,m=0;do{f=!1,d=Math.round(o/a),r.forEach(function(e){e.finished||e.maxLength&&e.getMaxLength()<d&&(l(e,e.maxLength),f=!0)})}while(f&&m++<r.length);if(f)throw new s.Internal("Resize loop iterated too many times while determining maxLength");m=0;do{f=!1,d=Math.round(o/a),r.forEach(function(e){e.finished||e.minLength&&e.getMinLength()>=d&&(l(e,e.minLength),f=!0)})}while(f&&m++<r.length);if(f)throw new s.Internal("Resize loop iterated too many times while determining minLength");return d=Math.round(o/a),r.forEach(function(e){e.finished||l(e,d)}),r}(e,t,n).map(l(n)).join("");return r.left(a(o,e),e)};function h(e){return"pre"+(e.type[0].toUpperCase()+e.type.slice(1))}function p(e){return"post"+(e.type[0].toUpperCase()+e.type.slice(1))}},function(e,t,n){"use strict";t.up=function(e){return"["+(e||"")+"A"},t.down=function(e){return"["+(e||"")+"B"},t.forward=function(e){return"["+(e||"")+"C"},t.back=function(e){return"["+(e||"")+"D"},t.nextLine=function(e){return"["+(e||"")+"E"},t.previousLine=function(e){return"["+(e||"")+"F"},t.horizontalAbsolute=function(e){if(null==e)throw new Error("horizontalAboslute requires a column to position to");return"["+e+"G"},t.eraseData=function(){return"[J"},t.eraseLine=function(){return"[K"},t.goto=function(e,t){return"["+t+";"+e+"H"},t.gotoSOL=function(){return"\r"},t.beep=function(){return""},t.hideCursor=function(){return"[?25l"},t.showCursor=function(){return"[?25h"};var r={reset:0,bold:1,italic:3,underline:4,inverse:7,stopBold:22,stopItalic:23,stopUnderline:24,stopInverse:27,white:37,black:30,blue:34,cyan:36,green:32,magenta:35,red:31,yellow:33,bgWhite:47,bgBlack:40,bgBlue:44,bgCyan:46,bgGreen:42,bgMagenta:45,bgRed:41,bgYellow:43,grey:90,brightBlack:90,brightRed:91,brightGreen:92,brightYellow:93,brightBlue:94,brightMagenta:95,brightCyan:96,brightWhite:97,bgGrey:100,bgBrightBlack:100,bgBrightRed:101,bgBrightGreen:102,bgBrightYellow:103,bgBrightBlue:104,bgBrightMagenta:105,bgBrightCyan:106,bgBrightWhite:107};function o(e){if(null!=r[e])return r[e];throw new Error("Unknown color or style name: "+e)}t.color=function(e){return 1===arguments.length&&Array.isArray(e)||(e=Array.prototype.slice.call(arguments)),"["+e.map(o).join(";")+"m"}},function(e,t){var n={html:{skipScheme:"html",lineBreakScheme:"html",whitespace:"collapse"}},r=/<\s*br(?:[\s/]*|\s[^>]*)>/gi,o={unix:[/\n/g,"\n"],dos:[/\r\n/g,"\r\n"],mac:[/\r/g,"\r"],html:[r,"<br>"],xhtml:[r,"<br/>"]},i={"ansi-color":/\x1B\[[^m]*m/g,html:/<[^>]*>/g,bbcode:/\[[^]]*\]/g},a={soft:1,hard:1},s={collapse:1,default:1,line:1,all:1},c={all:1,multi:1,none:1},l=/([sm])(\d+)/,u=/[-/\\^$*+?.()|[\]{}]/g;function h(e){return e.replace(u,"\\$&")}var p=e.exports=function(e,t,r){"object"==typeof e&&(e=(r=e).start,t=r.stop),"object"==typeof t&&(r=t,e=e||r.start,t=void 0),t||(t=e,e=0),r||(r={});var u,p,f,d,m,g,_,y,v,b,w,E,x,T,k,O,S,L,j="soft",R="default",C=4,A="all",I="",M="";if(u=r.preset)for(u instanceof Array||(u=[u]),L=0;L<u.length;L++){if(!(O=n[u[L]]))throw new TypeError('preset must be one of "'+Object.keys(n).join('", "')+'"');O.mode&&(j=O.mode),O.whitespace&&(R=O.whitespace),void 0!==O.tabWidth&&(C=O.tabWidth),O.skip&&(p=O.skip),O.skipScheme&&(f=O.skipScheme),O.lineBreak&&(d=O.lineBreak),O.lineBreakScheme&&(m=O.lineBreakScheme),O.respectLineBreaks&&(A=O.respectLineBreaks),void 0!==O.preservedLineIndent&&(_=O.preservedLineIndent),void 0!==O.wrapLineIndent&&(y=O.wrapLineIndent),O.wrapLineIndentBase&&(v=O.wrapLineIndentBase)}if(r.mode){if(!a[r.mode])throw new TypeError('mode must be one of "'+Object.keys(a).join('", "')+'"');j=r.mode}if(r.whitespace){if(!s[r.whitespace])throw new TypeError('whitespace must be one of "'+Object.keys(s).join('", "')+'"');R=r.whitespace}if(void 0!==r.tabWidth){if(!(parseInt(r.tabWidth,10)>=0))throw new TypeError("tabWidth must be a non-negative integer");C=parseInt(r.tabWidth,10)}if(k=new Array(C+1).join(" "),r.respectLineBreaks){if(!c[r.respectLineBreaks]&&!l.test(r.respectLineBreaks))throw new TypeError('respectLineBreaks must be one of "'+Object.keys(c).join('", "')+'", "m<num>", "s<num>"');A=r.respectLineBreaks}if("multi"===A)A="m",g=2;else if(!c[A]){var N=l.exec(A);A=N[1],g=parseInt(N[2],10)}if(void 0!==r.preservedLineIndent){if(!(parseInt(r.preservedLineIndent,10)>=0))throw new TypeError("preservedLineIndent must be a non-negative integer");_=parseInt(r.preservedLineIndent,10)}if(_>0&&(I=new Array(_+1).join(" ")),void 0!==r.wrapLineIndent){if(isNaN(parseInt(r.wrapLineIndent,10)))throw new TypeError("wrapLineIndent must be an integer");y=parseInt(r.wrapLineIndent,10)}if(r.wrapLineIndentBase&&(v=r.wrapLineIndentBase),v){if(void 0===y)throw new TypeError("wrapLineIndent must be specified when wrapLineIndentBase is specified");if(v instanceof RegExp)T=v;else{if("string"!=typeof v)throw new TypeError("wrapLineIndentBase must be either a RegExp object or a string");T=new RegExp(h(v))}}else if(y>0)M=new Array(y+1).join(" ");else if(y<0)throw new TypeError("wrapLineIndent must be non-negative when a base is not specified");if(r.skipScheme){if(!i[r.skipScheme])throw new TypeError('skipScheme must be one of "'+Object.keys(i).join('", "')+'"');f=r.skipScheme}if(r.skip&&(p=r.skip),p)if(p instanceof RegExp)(b=p).global||(S="g",b.ignoreCase&&(S+="i"),b.multiline&&(S+="m"),b=new RegExp(b.source,S));else{if("string"!=typeof p)throw new TypeError("skip must be either a RegExp object or a string");b=new RegExp(h(p),"g")}if(!b&&f&&(b=i[f]),r.lineBreakScheme){if(!o[r.lineBreakScheme])throw new TypeError('lineBreakScheme must be one of "'+Object.keys(o).join('", "')+'"');m=r.lineBreakScheme}if(r.lineBreak&&(d=r.lineBreak),m&&(O=o[m])&&(w=O[0],E=O[1]),d)if(d instanceof Array&&(1===d.length?d=d[0]:d.length>=2&&(d[0]instanceof RegExp?(w=d[0],"string"==typeof d[1]&&(E=d[1])):d[1]instanceof RegExp?(w=d[1],"string"==typeof d[0]&&(E=d[0])):"string"==typeof d[0]&&"string"==typeof d[1]?(w=new RegExp(h(d[0]),"g"),E=d[1]):d=d[0])),"string"==typeof d)E=d,w||(w=new RegExp(h(d),"g"));else if(d instanceof RegExp)w=d;else if(!(d instanceof Array))throw new TypeError("lineBreak must be a RegExp object, a string, or an array consisted of a RegExp object and a string");w||(w=/\n/g,E="\n"),S="g",w.ignoreCase&&(S+="i"),w.multiline&&(S+="m"),x=new RegExp("\\s*(?:"+w.source+")(?:"+w.source+"|\\s)*",S),w.global||(w=new RegExp(w.source,S));var P="hard"===j?/\b/:/(\S+\s+)/,$=new Array(e+1).join(" "),q="default"===R||"collapse"===R,D="collapse"===R,B="line"===R,Y="all"===R,U=/\t/g,G=/  +/g,F=/^\s+/,H=/\s+$/,V=/\S/,z=/\s/,W=t-e;return function(n){var r;if(n=n.toString().replace(U,k),!E){if(w.lastIndex=0,!(r=w.exec(n)))throw new TypeError("Line break string for the output not specified");E=r[0]}var o,i,a,s,c,l,u,h,p,f=0;for(o=[],x.lastIndex=0,r=x.exec(n);r;){if(o.push(n.substring(f,r.index)),"none"!==A){for(a=[],s=0,w.lastIndex=0,i=w.exec(r[0]);i;)a.push(r[0].substring(s,i.index)),s=i.index+i[0].length,i=w.exec(r[0]);a.push(r[0].substring(s)),o.push({type:"break",breaks:a})}else c=D?" ":r[0].replace(w,""),o.push({type:"break",remaining:c});f=r.index+r[0].length,r=x.exec(n)}if(o.push(n.substring(f)),b)for(p=[],l=0;l<o.length;l++){var d=o[l];if("string"!=typeof d)p.push(d);else{for(f=0,b.lastIndex=0,r=b.exec(d);r;)p.push(d.substring(f,r.index)),p.push({type:"skip",value:r[0]}),f=r.index+r[0].length,r=b.exec(d);p.push(d.substring(f))}}else p=o;var m=[];for(l=0;l<p.length;l++){var _=p[l];if("string"!=typeof _)m.push(_);else{D&&(_=_.replace(G," "));var v=_.split(P),O=[];for(u=0;u<v.length;u++){var S=v[u];if("hard"===j)for(h=0;h<S.length;h+=W)O.push(S.slice(h,h+W));else O.push(S)}m=m.concat(O)}}var L,R=0,C=e+I.length,N=[$+I],K=0,Q=!0,X=!0,Z=M;function J(n){var r,o,i,a=N[R];if(Y)C>t&&(K=K||t,i=a.length-(C-K),N[R]=a.substring(0,i)),K=0;else{for(r=a.length-1;r>=e&&" "===a[r];)r--;for(;r>=e&&z.test(a[r]);)r--;++r!==a.length&&(N[R]=a.substring(0,r)),X&&Q&&B&&C>t&&(i=a.length-(C-t))<r&&(i=r)}if(X&&(X=!1,T&&(r=N[R].substring(e).search(T),Z=r>=0&&r+y>0?new Array(r+y+1).join(" "):"")),i){for(;i+W<a.length;)Y?(o=a.substring(i,i+W),N.push($+Z+o)):N.push($+Z),i+=W,R++;if(!n)return o=a.substring(i),Z+o;Y?(o=a.substring(i),N.push($+Z+o)):N.push($+Z),R++}return""}for(l=0;l<m.length;l++){var ee=m[l];if(""!==ee)if("string"==typeof ee){for(var te;;){if(te=void 0,C+ee.length>t&&C+(te=ee.replace(H,"")).length>t&&""!==te&&C>e){if(L=J(!1),N.push($+Z),R++,C=e+Z.length,L){N[R]+=L,C+=L.length,Q=!0;continue}!q&&(!B||X&&Q)||(ee=ee.replace(F,"")),Q=!1}else Q&&(q||B&&(!X||!Q)?""!==(ee=ee.replace(F,""))&&(Q=!1):V.test(ee)&&(Q=!1));break}Y&&te&&C+te.length>t&&(K=C+te.length),N[R]+=ee,C+=ee.length}else if("break"===ee.type)if("none"!==A){var ne=ee.breaks,re=ne.length-1;if("s"===A){for(u=0;u<re;u++)ne[u+1].length<g?ne[u+1]=D?" ":ne[u]+ne[u+1]:(Y&&(N[R]+=ne[u],C+=ne[u].length),J(!0),N.push($+I),R++,C=e+I.length,X=Q=!0);(!Q||Y||B&&X)&&((D||!Q&&""===ne[re])&&(ne[re]=" "),N[R]+=ne[re],C+=ne[re].length)}else if("m"===A&&re<g)(!Q||Y||B&&X)&&(D?ee=" ":(ee=ne.join(""),Q||""!==ee||(ee=" ")),N[R]+=ee,C+=ee.length);else if(q){for(J(!0),u=0;u<re;u++)N.push($+I),R++;C=e+I.length,X=Q=!0}else for((Y||X&&Q)&&(N[R]+=ne[0],C+=ne[0].length),u=0;u<re;u++)J(!0),N.push($+I+ne[u+1]),R++,C=e+I.length+ne[u+1].length,X=Q=!0}else(!Q||Y||B&&X)&&(ee=ee.remaining,(D||!Q&&""===ee)&&(ee=" "),N[R]+=ee,C+=ee.length);else"skip"===ee.type&&(C>t&&(L=J(!1),N.push($+Z),R++,C=e+Z.length,L&&(N[R]+=L,C+=L.length),Q=!0),N[R]+=ee.value)}return J(!0),N.join(E)}};p.soft=p,p.hard=function(){var e=[].slice.call(arguments),t=e.length-1;return"object"==typeof e[t]?e[t].mode="hard":e.push({mode:"hard"}),p.apply(null,e)},p.wrap=function(e){var t=[].slice.call(arguments);return t.shift(),p.apply(null,t)(e)}},function(e,t,n){"use strict";e.exports=((e,t)=>(t=t||(()=>{}),e.then(e=>new Promise(e=>{e(t())}).then(()=>e),e=>new Promise(e=>{e(t())}).then(()=>{throw e}))))},function(e,t,n){"use strict";e.exports=function(e,t){return e=""+e,e=t?'"'+(e=(e=e.replace(/(\\*)"/g,'$1$1\\"')).replace(/(\\*)$/,"$1$1"))+'"':e.replace(/([()%!^<>&|;,"'\s])/g,"^$1")}},function(e,t,n){"use strict";e.exports=_;var r,o=n(154),i=n(16),a=n(152),s=(r="function"==typeof Symbol?function(e){return Symbol.for(e)}:function(e){return"_"+e})("max"),c=r("length"),l=r("lengthCalculator"),u=r("allowStale"),h=r("maxAge"),p=r("dispose"),f=r("noDisposeOnSet"),d=r("lruList"),m=r("cache");function g(){return 1}function _(e){if(!(this instanceof _))return new _(e);"number"==typeof e&&(e={max:e}),e||(e={});var t=this[s]=e.max;(!t||"number"!=typeof t||t<=0)&&(this[s]=1/0);var n=e.length||g;"function"!=typeof n&&(n=g),this[l]=n,this[u]=e.stale||!1,this[h]=e.maxAge||0,this[p]=e.dispose,this[f]=e.noDisposeOnSet||!1,this.reset()}function y(e,t,n,r){var o=n.value;b(e,o)&&(E(e,n),e[u]||(o=void 0)),o&&t.call(r,o.value,o.key,e)}function v(e,t,n){var r=e[m].get(t);if(r){var o=r.value;b(e,o)?(E(e,r),e[u]||(o=void 0)):n&&e[d].unshiftNode(r),o&&(o=o.value)}return o}function b(e,t){if(!t||!t.maxAge&&!e[h])return!1;var n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[h]&&n>e[h]}function w(e){if(e[c]>e[s])for(var t=e[d].tail;e[c]>e[s]&&null!==t;){var n=t.prev;E(e,t),t=n}}function E(e,t){if(t){var n=t.value;e[p]&&e[p](n.key,n.value),e[c]-=n.length,e[m].delete(n.key),e[d].removeNode(t)}}Object.defineProperty(_.prototype,"max",{set:function(e){(!e||"number"!=typeof e||e<=0)&&(e=1/0),this[s]=e,w(this)},get:function(){return this[s]},enumerable:!0}),Object.defineProperty(_.prototype,"allowStale",{set:function(e){this[u]=!!e},get:function(){return this[u]},enumerable:!0}),Object.defineProperty(_.prototype,"maxAge",{set:function(e){(!e||"number"!=typeof e||e<0)&&(e=0),this[h]=e,w(this)},get:function(){return this[h]},enumerable:!0}),Object.defineProperty(_.prototype,"lengthCalculator",{set:function(e){"function"!=typeof e&&(e=g),e!==this[l]&&(this[l]=e,this[c]=0,this[d].forEach(function(e){e.length=this[l](e.value,e.key),this[c]+=e.length},this)),w(this)},get:function(){return this[l]},enumerable:!0}),Object.defineProperty(_.prototype,"length",{get:function(){return this[c]},enumerable:!0}),Object.defineProperty(_.prototype,"itemCount",{get:function(){return this[d].length},enumerable:!0}),_.prototype.rforEach=function(e,t){t=t||this;for(var n=this[d].tail;null!==n;){var r=n.prev;y(this,e,n,t),n=r}},_.prototype.forEach=function(e,t){t=t||this;for(var n=this[d].head;null!==n;){var r=n.next;y(this,e,n,t),n=r}},_.prototype.keys=function(){return this[d].toArray().map(function(e){return e.key},this)},_.prototype.values=function(){return this[d].toArray().map(function(e){return e.value},this)},_.prototype.reset=function(){this[p]&&this[d]&&this[d].length&&this[d].forEach(function(e){this[p](e.key,e.value)},this),this[m]=new o,this[d]=new a,this[c]=0},_.prototype.dump=function(){return this[d].map(function(e){if(!b(this,e))return{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}},this).toArray().filter(function(e){return e})},_.prototype.dumpLru=function(){return this[d]},_.prototype.inspect=function(e,t){var n="LRUCache {",r=!1;this[u]&&(n+="\n  allowStale: true",r=!0);var o=this[s];o&&o!==1/0&&(r&&(n+=","),n+="\n  max: "+i.inspect(o,t),r=!0);var a=this[h];a&&(r&&(n+=","),n+="\n  maxAge: "+i.inspect(a,t),r=!0);var p=this[l];p&&p!==g&&(r&&(n+=","),n+="\n  length: "+i.inspect(this[c],t),r=!0);var f=!1;return this[d].forEach(function(e){f?n+=",\n  ":(r&&(n+=",\n"),f=!0,n+="\n  ");var o=i.inspect(e.key).split("\n").join("\n  "),s={value:e.value};e.maxAge!==a&&(s.maxAge=e.maxAge),p!==g&&(s.length=e.length),b(this,e)&&(s.stale=!0),s=i.inspect(s,t).split("\n").join("\n  "),n+=o+" => "+s}),(f||r)&&(n+="\n"),n+="}"},_.prototype.set=function(e,t,n){var r=(n=n||this[h])?Date.now():0,o=this[l](t,e);if(this[m].has(e)){if(o>this[s])return E(this,this[m].get(e)),!1;var i=this[m].get(e).value;return this[p]&&(this[f]||this[p](e,i.value)),i.now=r,i.maxAge=n,i.value=t,this[c]+=o-i.length,i.length=o,this.get(e),w(this),!0}var a=new function(e,t,n,r,o){this.key=e,this.value=t,this.length=n,this.now=r,this.maxAge=o||0}(e,t,o,r,n);return a.length>this[s]?(this[p]&&this[p](e,t),!1):(this[c]+=a.length,this[d].unshift(a),this[m].set(e,this[d].head),w(this),!0)},_.prototype.has=function(e){return!!this[m].has(e)&&!b(this,this[m].get(e).value)},_.prototype.get=function(e){return v(this,e,!0)},_.prototype.peek=function(e){return v(this,e,!1)},_.prototype.pop=function(){var e=this[d].tail;return e?(E(this,e),e.value):null},_.prototype.del=function(e){E(this,this[m].get(e))},_.prototype.load=function(e){this.reset();for(var t=Date.now(),n=e.length-1;n>=0;n--){var r=e[n],o=r.e||0;if(0===o)this.set(r.k,r.v);else{var i=o-t;i>0&&this.set(r.k,r.v,i)}}},_.prototype.prune=function(){var e=this;this[m].forEach(function(t,n){v(e,n,!1)})}},function(e,t,n){"use strict";var r=n(11),o=n(158),i=new(n(58))({max:50,maxAge:3e4});e.exports=function(e,t){var n;if(t=!!t,n=i.get(e+"!"+t),i.has(e))return i.get(e);try{n=t?o.sync(e,{pathExt:r.delimiter+(process.env.PATHEXT||"")}):o.sync(e)}catch(e){}return i.set(e+"!"+t,n),n}},function(e,t,n){"use strict";(function(t){const r=n(11),o=n(161),i=(e,t)=>({columns:parseInt(e,10),rows:parseInt(t,10)});e.exports=(()=>{const e=process.env,n=process.stdout,a=process.stderr;if(n&&n.columns&&n.rows)return i(n.columns,n.rows);if(a&&a.columns&&a.rows)return i(a.columns,a.rows);if(e.COLUMNS&&e.LINES)return i(e.COLUMNS,e.LINES);if("win32"===process.platform)try{const e=o.sync(r.join(t,"vendor/windows/term-size.exe")).stdout.split(/\r?\n/);if(2===e.length)return i(e[0],e[1])}catch(e){}else{if("darwin"===process.platform)try{const e=o.shellSync(r.join(t,"vendor/macos/term-size")).stdout.split(/\r?\n/);if(2===e.length)return i(e[0],e[1])}catch(e){}try{const e=o.sync("resize",["-u"]).stdout.match(/\d+/g);if(2===e.length)return i(e[0],e[1])}catch(e){}try{const e=o.sync("tput",["cols"]).stdout,t=o.sync("tput",["lines"]).stdout;if(e&&t)return i(e,t)}catch(e){}}return i(80,24)})}).call(this,"/")},function(e,t,n){"use strict";const r=n(168);e.exports=(e=>"string"==typeof e?e.replace(r(),""):e)},function(e,t,n){"use strict";const r=n(30),o=n(5),i=n(166),a=n(165),s=n(163),c=n(162),l=n(60),u=e=>{let t;return t="number"==typeof e?{top:e,right:3*e,bottom:e,left:3*e}:Object.assign({top:0,right:0,bottom:0,left:0},e)};e.exports=((e,t)=>{if((t=Object.assign({padding:0,borderStyle:"single",dimBorder:!1,align:"left",float:"left"},t)).backgroundColor&&(t.backgroundColor=(e=>s("bg",e))(t.backgroundColor)),t.borderColor&&!o[t.borderColor])throw new Error(`${t.borderColor} is not a valid borderColor`);if(t.backgroundColor&&!o[t.backgroundColor])throw new Error(`${t.backgroundColor} is not a valid backgroundColor`);const n=(e=>{const t=["topLeft","topRight","bottomRight","bottomLeft","vertical","horizontal"];let n;if("string"==typeof e){if(!(n=a[e]))throw new TypeError(`Invalid border style: ${e}`)}else t.forEach(t=>{if(!e[t]||"string"!=typeof e[t])throw new TypeError(`Invalid border style: ${t}`)}),n=e;return n})(t.borderStyle),h=u(t.padding),p=u(t.margin),f=e=>{const n=t.borderColor?o[t.borderColor](e):e;return t.dimBorder?o.dim(n):n},d="\n";let m=(e=c(e,{align:t.align})).split(d);h.top>0&&(m=Array(h.top).fill("").concat(m)),h.bottom>0&&(m=m.concat(Array(h.bottom).fill("")));const g=i(e)+h.left+h.right,_=" ".repeat(h.left),y=l().columns;let v=" ".repeat(p.left);if("center"===t.float){const e=Math.max((y-g)/2,0);v=" ".repeat(e)}else if("right"===t.float){const e=Math.max(y-g-p.right-2,0);v=" ".repeat(e)}const b=n.horizontal.repeat(g),w=f(d.repeat(p.top)+v+n.topLeft+b+n.topRight),E=f(v+n.bottomLeft+b+n.bottomRight+d.repeat(p.bottom)),x=f(n.vertical);return w+d+m.map(e=>{const n=" ".repeat(g-r(e)-h.left);return v+x+(e=>t.backgroundColor?o[t.backgroundColor](e):e)(_+e+n)+x}).join(d)+d+E}),e.exports._borderStyles=a},function(e,t,n){"use strict";const{prettify_json:r,indent_string:o}=n(17);e.exports={prettify_json_for_debug:function(){return"\n{{{{{{{"+o("\n"+r.apply(null,arguments),1,{indent:"\t"})+"\n}}}}}}}"}}},function(e,t,n){var r=n(185),o={};for(var i in r)r.hasOwnProperty(i)&&(o[r[i]]=i);var a=e.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var s in a)if(a.hasOwnProperty(s)){if(!("channels"in a[s]))throw new Error("missing channels property: "+s);if(!("labels"in a[s]))throw new Error("missing channel labels property: "+s);if(a[s].labels.length!==a[s].channels)throw new Error("channel and label counts mismatch: "+s);var c=a[s].channels,l=a[s].labels;delete a[s].channels,delete a[s].labels,Object.defineProperty(a[s],"channels",{value:c}),Object.defineProperty(a[s],"labels",{value:l})}a.rgb.hsl=function(e){var t,n,r=e[0]/255,o=e[1]/255,i=e[2]/255,a=Math.min(r,o,i),s=Math.max(r,o,i),c=s-a;return s===a?t=0:r===s?t=(o-i)/c:o===s?t=2+(i-r)/c:i===s&&(t=4+(r-o)/c),(t=Math.min(60*t,360))<0&&(t+=360),n=(a+s)/2,[t,100*(s===a?0:n<=.5?c/(s+a):c/(2-s-a)),100*n]},a.rgb.hsv=function(e){var t,n,r=e[0],o=e[1],i=e[2],a=Math.min(r,o,i),s=Math.max(r,o,i),c=s-a;return n=0===s?0:c/s*1e3/10,s===a?t=0:r===s?t=(o-i)/c:o===s?t=2+(i-r)/c:i===s&&(t=4+(r-o)/c),(t=Math.min(60*t,360))<0&&(t+=360),[t,n,s/255*1e3/10]},a.rgb.hwb=function(e){var t=e[0],n=e[1],r=e[2];return[a.rgb.hsl(e)[0],100*(1/255*Math.min(t,Math.min(n,r))),100*(r=1-1/255*Math.max(t,Math.max(n,r)))]},a.rgb.cmyk=function(e){var t,n=e[0]/255,r=e[1]/255,o=e[2]/255;return[100*((1-n-(t=Math.min(1-n,1-r,1-o)))/(1-t)||0),100*((1-r-t)/(1-t)||0),100*((1-o-t)/(1-t)||0),100*t]},a.rgb.keyword=function(e){var t=o[e];if(t)return t;var n,i,a,s=1/0;for(var c in r)if(r.hasOwnProperty(c)){var l=r[c],u=(i=e,a=l,Math.pow(i[0]-a[0],2)+Math.pow(i[1]-a[1],2)+Math.pow(i[2]-a[2],2));u<s&&(s=u,n=c)}return n},a.keyword.rgb=function(e){return r[e]},a.rgb.xyz=function(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255;return[100*(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)),100*(.2126*t+.7152*n+.0722*r),100*(.0193*t+.1192*n+.9505*r)]},a.rgb.lab=function(e){var t=a.rgb.xyz(e),n=t[0],r=t[1],o=t[2];return r/=100,o/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(n-r),200*(r-(o=o>.008856?Math.pow(o,1/3):7.787*o+16/116))]},a.hsl.rgb=function(e){var t,n,r,o,i,a=e[0]/360,s=e[1]/100,c=e[2]/100;if(0===s)return[i=255*c,i,i];t=2*c-(n=c<.5?c*(1+s):c+s-c*s),o=[0,0,0];for(var l=0;l<3;l++)(r=a+1/3*-(l-1))<0&&r++,r>1&&r--,i=6*r<1?t+6*(n-t)*r:2*r<1?n:3*r<2?t+(n-t)*(2/3-r)*6:t,o[l]=255*i;return o},a.hsl.hsv=function(e){var t=e[0],n=e[1]/100,r=e[2]/100,o=n,i=Math.max(r,.01);return n*=(r*=2)<=1?r:2-r,o*=i<=1?i:2-i,[t,100*(0===r?2*o/(i+o):2*n/(r+n)),100*((r+n)/2)]},a.hsv.rgb=function(e){var t=e[0]/60,n=e[1]/100,r=e[2]/100,o=Math.floor(t)%6,i=t-Math.floor(t),a=255*r*(1-n),s=255*r*(1-n*i),c=255*r*(1-n*(1-i));switch(r*=255,o){case 0:return[r,c,a];case 1:return[s,r,a];case 2:return[a,r,c];case 3:return[a,s,r];case 4:return[c,a,r];case 5:return[r,a,s]}},a.hsv.hsl=function(e){var t,n,r,o=e[0],i=e[1]/100,a=e[2]/100,s=Math.max(a,.01);return r=(2-i)*a,n=i*s,[o,100*(n=(n/=(t=(2-i)*s)<=1?t:2-t)||0),100*(r/=2)]},a.hwb.rgb=function(e){var t,n,r,o,i,a,s,c=e[0]/360,l=e[1]/100,u=e[2]/100,h=l+u;switch(h>1&&(l/=h,u/=h),n=1-u,r=6*c-(t=Math.floor(6*c)),0!=(1&t)&&(r=1-r),o=l+r*(n-l),t){default:case 6:case 0:i=n,a=o,s=l;break;case 1:i=o,a=n,s=l;break;case 2:i=l,a=n,s=o;break;case 3:i=l,a=o,s=n;break;case 4:i=o,a=l,s=n;break;case 5:i=n,a=l,s=o}return[255*i,255*a,255*s]},a.cmyk.rgb=function(e){var t=e[0]/100,n=e[1]/100,r=e[2]/100,o=e[3]/100;return[255*(1-Math.min(1,t*(1-o)+o)),255*(1-Math.min(1,n*(1-o)+o)),255*(1-Math.min(1,r*(1-o)+o))]},a.xyz.rgb=function(e){var t,n,r,o=e[0]/100,i=e[1]/100,a=e[2]/100;return n=-.9689*o+1.8758*i+.0415*a,r=.0557*o+-.204*i+1.057*a,t=(t=3.2406*o+-1.5372*i+-.4986*a)>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,[255*(t=Math.min(Math.max(0,t),1)),255*(n=Math.min(Math.max(0,n),1)),255*(r=Math.min(Math.max(0,r),1))]},a.xyz.lab=function(e){var t=e[0],n=e[1],r=e[2];return n/=100,r/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(t-n),200*(n-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]},a.lab.xyz=function(e){var t,n,r,o=e[0],i=e[1],a=e[2];t=i/500+(n=(o+16)/116),r=n-a/200;var s=Math.pow(n,3),c=Math.pow(t,3),l=Math.pow(r,3);return n=s>.008856?s:(n-16/116)/7.787,t=c>.008856?c:(t-16/116)/7.787,r=l>.008856?l:(r-16/116)/7.787,[t*=95.047,n*=100,r*=108.883]},a.lab.lch=function(e){var t,n=e[0],r=e[1],o=e[2];return(t=360*Math.atan2(o,r)/2/Math.PI)<0&&(t+=360),[n,Math.sqrt(r*r+o*o),t]},a.lch.lab=function(e){var t,n=e[0],r=e[1];return t=e[2]/360*2*Math.PI,[n,r*Math.cos(t),r*Math.sin(t)]},a.rgb.ansi16=function(e){var t=e[0],n=e[1],r=e[2],o=1 in arguments?arguments[1]:a.rgb.hsv(e)[2];if(0===(o=Math.round(o/50)))return 30;var i=30+(Math.round(r/255)<<2|Math.round(n/255)<<1|Math.round(t/255));return 2===o&&(i+=60),i},a.hsv.ansi16=function(e){return a.rgb.ansi16(a.hsv.rgb(e),e[2])},a.rgb.ansi256=function(e){var t=e[0],n=e[1],r=e[2];return t===n&&n===r?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},a.ansi16.rgb=function(e){var t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),[t=t/10.5*255,t,t];var n=.5*(1+~~(e>50));return[(1&t)*n*255,(t>>1&1)*n*255,(t>>2&1)*n*255]},a.ansi256.rgb=function(e){if(e>=232){var t=10*(e-232)+8;return[t,t,t]}var n;return e-=16,[Math.floor(e/36)/5*255,Math.floor((n=e%36)/6)/5*255,n%6/5*255]},a.rgb.hex=function(e){var t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},a.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var n=t[0];3===t[0].length&&(n=n.split("").map(function(e){return e+e}).join(""));var r=parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},a.rgb.hcg=function(e){var t,n,r=e[0]/255,o=e[1]/255,i=e[2]/255,a=Math.max(Math.max(r,o),i),s=Math.min(Math.min(r,o),i),c=a-s;return t=c<1?s/(1-c):0,n=c<=0?0:a===r?(o-i)/c%6:a===o?2+(i-r)/c:4+(r-o)/c+4,n/=6,[360*(n%=1),100*c,100*t]},a.hsl.hcg=function(e){var t=e[1]/100,n=e[2]/100,r=1,o=0;return(r=n<.5?2*t*n:2*t*(1-n))<1&&(o=(n-.5*r)/(1-r)),[e[0],100*r,100*o]},a.hsv.hcg=function(e){var t=e[1]/100,n=e[2]/100,r=t*n,o=0;return r<1&&(o=(n-r)/(1-r)),[e[0],100*r,100*o]},a.hcg.rgb=function(e){var t=e[0]/360,n=e[1]/100,r=e[2]/100;if(0===n)return[255*r,255*r,255*r];var o,i=[0,0,0],a=t%1*6,s=a%1,c=1-s;switch(Math.floor(a)){case 0:i[0]=1,i[1]=s,i[2]=0;break;case 1:i[0]=c,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=s;break;case 3:i[0]=0,i[1]=c,i[2]=1;break;case 4:i[0]=s,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=c}return o=(1-n)*r,[255*(n*i[0]+o),255*(n*i[1]+o),255*(n*i[2]+o)]},a.hcg.hsv=function(e){var t=e[1]/100,n=t+e[2]/100*(1-t),r=0;return n>0&&(r=t/n),[e[0],100*r,100*n]},a.hcg.hsl=function(e){var t=e[1]/100,n=e[2]/100*(1-t)+.5*t,r=0;return n>0&&n<.5?r=t/(2*n):n>=.5&&n<1&&(r=t/(2*(1-n))),[e[0],100*r,100*n]},a.hcg.hwb=function(e){var t=e[1]/100,n=t+e[2]/100*(1-t);return[e[0],100*(n-t),100*(1-n)]},a.hwb.hcg=function(e){var t=e[1]/100,n=1-e[2]/100,r=n-t,o=0;return r<1&&(o=(n-r)/(1-r)),[e[0],100*r,100*o]},a.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},a.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},a.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},a.gray.hsl=a.gray.hsv=function(e){return[0,0,e[0]]},a.gray.hwb=function(e){return[0,100,e[0]]},a.gray.cmyk=function(e){return[0,0,0,e[0]]},a.gray.lab=function(e){return[e[0],0,0]},a.gray.hex=function(e){var t=255&Math.round(e[0]/100*255),n=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(n.length)+n},a.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),o=n(192),i=n(32),a=n(66);function s(e){if(!r.Enum.isType(i.LogLevel,e))throw new Error(`Not a valid log level: "${e}"!`)}t.createLogger=function({name:e,level:t=i.LogLevel.info,details:n={},outputFn:r=console.log}){if(!e)throw new Error("universal-logger-core›create(): you must provide a name!");const c={name:e,level:t,details:Object.assign({},n),outputFn:r};let l=0;const u=a.ALL_LOG_LEVELS.reduce((t,n)=>(t[n]=((t,i)=>{p(n)&&(i||"object"!=typeof t||(t=(i=t).err?i.err.message:""),r(function(t,n,r){return{details:Object.assign({},c.details,r),level:t,name:e,time:o.get_human_readable_UTC_timestamp_ms_v1(),msg:n}}(n,t=t||"",i)))}),t),{_:c,isLevelEnabled:p,setLevel:h,getLevel:function(){return c.level},addDetails:function(e){c.details=Object.assign({},c.details,e)}});function h(e){s(e),c.level=e,l=a.LEVEL_TO_INTEGER[e]}function p(e){return s(e),a.LEVEL_TO_INTEGER[e]>=l}return h(t),u}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),o=n(32),i=r.Enum.keys(o.LogLevel);t.ALL_LOG_LEVELS=i;const a={[o.LogLevel.fatal]:60,[o.LogLevel.emerg]:59,[o.LogLevel.alert]:52,[o.LogLevel.crit]:51,[o.LogLevel.error]:50,[o.LogLevel.warning]:40,[o.LogLevel.warn]:40,[o.LogLevel.notice]:35,[o.LogLevel.info]:30,[o.LogLevel.verbose]:22,[o.LogLevel.log]:21,[o.LogLevel.debug]:20,[o.LogLevel.trace]:10,[o.LogLevel.silly]:1};if(t.LEVEL_TO_INTEGER=a,i.length!==Object.keys(a).length)throw new Error("universal-logger-core: LEVEL_TO_INTEGER needs an update");const s={[o.LogLevel.fatal]:"fatal",[o.LogLevel.emerg]:"emergency",[o.LogLevel.alert]:"alert",[o.LogLevel.crit]:"critical",[o.LogLevel.error]:"error",[o.LogLevel.warning]:"warn",[o.LogLevel.warn]:"warn",[o.LogLevel.notice]:"note",[o.LogLevel.info]:"info",[o.LogLevel.verbose]:"verbose",[o.LogLevel.log]:"log",[o.LogLevel.debug]:"debug",[o.LogLevel.trace]:"trace",[o.LogLevel.silly]:"silly"};if(t.LEVEL_TO_HUMAN=s,i.length!==Object.keys(s).length)throw new Error("universal-logger-core: LEVEL_TO_HUMAN needs an update")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(193);t.createChildLogger=o.createChildLogger;const i=n(190),a=r.__importDefault(n(5)),s=n(31);const c=7;function l(e){let t=e.toUpperCase();return t.length<c&&(t=(t+"         ").slice(0,c)),t}const u={[o.LogLevel.fatal]:a.default.bgRed.white.bold(l(" "+o.LEVEL_TO_HUMAN[o.LogLevel.fatal])),[o.LogLevel.emerg]:a.default.bgRed.white.bold(l(o.LEVEL_TO_HUMAN[o.LogLevel.emerg])),[o.LogLevel.alert]:a.default.bgRed.white.bold(l(" "+o.LEVEL_TO_HUMAN[o.LogLevel.alert])),[o.LogLevel.crit]:a.default.bgRed.white.bold(l(o.LEVEL_TO_HUMAN[o.LogLevel.crit])),[o.LogLevel.error]:a.default.red.bold(l(o.LEVEL_TO_HUMAN[o.LogLevel.error])),[o.LogLevel.warning]:a.default.yellow.bold(l(o.LEVEL_TO_HUMAN[o.LogLevel.warning])),[o.LogLevel.warn]:a.default.yellow.bold(l(o.LEVEL_TO_HUMAN[o.LogLevel.warn])),[o.LogLevel.notice]:a.default.blue(l(o.LEVEL_TO_HUMAN[o.LogLevel.notice])),[o.LogLevel.info]:a.default.blue(l(o.LEVEL_TO_HUMAN[o.LogLevel.info])),[o.LogLevel.verbose]:l(o.LEVEL_TO_HUMAN[o.LogLevel.verbose]),[o.LogLevel.log]:l(o.LEVEL_TO_HUMAN[o.LogLevel.log]),[o.LogLevel.debug]:l(o.LEVEL_TO_HUMAN[o.LogLevel.debug]),[o.LogLevel.trace]:a.default.dim(l(o.LEVEL_TO_HUMAN[o.LogLevel.trace])),[o.LogLevel.silly]:a.default.dim(l(o.LEVEL_TO_HUMAN[o.LogLevel.silly]))},h={[o.LogLevel.fatal]:e=>a.default.red.bold(e),[o.LogLevel.emerg]:e=>a.default.red.bold(e),[o.LogLevel.alert]:e=>a.default.red.bold(e),[o.LogLevel.crit]:e=>a.default.red.bold(e),[o.LogLevel.error]:e=>a.default.red.bold(e),[o.LogLevel.warning]:e=>a.default.yellow(e),[o.LogLevel.warn]:e=>a.default.yellow(e),[o.LogLevel.notice]:e=>a.default.blue(e),[o.LogLevel.info]:e=>a.default.blue(e),[o.LogLevel.verbose]:e=>e,[o.LogLevel.log]:e=>e,[o.LogLevel.debug]:e=>e,[o.LogLevel.trace]:e=>a.default.dim(e),[o.LogLevel.silly]:e=>a.default.dim(e)};t.LEVEL_TO_STYLIZE=h,t.createLogger=function(e){return o.createLogger(Object.assign({},e,{outputFn:function(e){const{level:t,name:n,msg:o,time:c,details:l}=e,{err:p}=l,f=r.__rest(l,["err"]);let d=a.default.dim(c)+" "+u[t]+"› "+h[t](n+"›"+(o?" ":"")+o+" "+(m=f,s.render(m,{keysColor:"dim"})));var m;console.log(d),p&&i.displayError(p)}}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(33),o=n(19);t.NodeType=o.NodeType;const i=n(203);const a={$type:"br"},s={$type:"hr"};function c(e,t,{$parent_node:n,$id:l="root",depth:u=0}={}){const h=i.normalize_node(e),{$type:p,$classes:f,$sub:d}=h;let m=t;!n&&(m=Object.assign({},function(){function e({state:e}){return e}return{on_root_enter:function(){},on_root_exit:e,on_node_enter:e,on_node_exit:e,on_concatenate_str:e,on_concatenate_sub_node:e,on_sub_node_id:e,on_filter:e,on_filter_Capitalize:({state:e})=>{if("string"==typeof e&&e){const t=""+e;return t[0].toUpperCase()+t.slice(1)}return e},on_class_before:e,on_class_after:e,on_type:e}}(),m)).on_root_enter();let g=m.on_node_enter({$node:h,$id:l,depth:u});if(g=f.reduce((e,t)=>m.on_class_before({$class:t,state:e,$node:h,depth:u}),g),"ul"===p||"ol"===p){Object.keys(d).sort().forEach(e=>{const t={$type:o.NodeType.li,$content:`{{${e}}}`,$sub:{[e]:d[e]}};let n=c(t,m,{$parent_node:h,depth:u+1,$id:e});g=m.on_concatenate_sub_node({state:g,sub_state:n,$id:e,$node:i.normalize_node(t),$parent_node:h,depth:u})})}else g=function(e,t,n,o){const{$content:l,$sub:u}=e,h=l.split("{{");return n=t.on_concatenate_str({str:h.shift(),state:n,$node:e,depth:o}),n=h.reduce((n,h)=>{const p=h.split("}}");if(2!==p.length)throw new Error(`${r.LIB}: syntax error in content "${l}"!`);const[f,...d]=p.shift().split("|");let m=u[f];if(m||"br"!==f||(m=a),m||"hr"!==f||(m=s),!m)throw new Error(`${r.LIB}: syntax error in content "${l}", it's referring to an unknown sub-node "${f}"!`);let g=c(m,t,{$parent_node:e,$id:f,depth:o+1});return g=d.reduce((n,r)=>{const i=`on_filter_${r}`;return t[i]?t[i]({$filter:r,$filters:d,state:n,$node:e,depth:o}):t.on_filter({$filter:r,$filters:d,state:n,$node:e,depth:o})},g),n=t.on_concatenate_sub_node({sub_state:g,$id:f,$parent_node:e,state:n,$node:i.normalize_node(m),depth:o}),n=t.on_concatenate_str({str:p[0],state:n,$node:e,depth:o})},n)}(h,m,g,u);g=f.reduce((e,t)=>m.on_class_after({$class:t,state:e,$node:h,depth:u}),g);const _=`on_type_${p}`;return g=m[_]?m[_]({$type:p,state:g,$node:h,depth:u}):m.on_type({$type:p,state:g,$node:h,depth:u}),g=m.on_node_exit({$node:h,$id:l,state:g,depth:u}),n||(g=m.on_root_exit({state:g,$node:h,depth:0})),g}t.walk=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=r.__importStar(n(9)),i=r.__importStar(n(8)),a=r.__importStar(n(13)),s=r.__importStar(n(12)),c=n(21),l=n(42),u=n(34);t.migrate_to_latest=function(e,t,n={}){return u.get_SEC(e).xTry("migrate_to_latest",({SEC:e,logger:r})=>{const u=t&&t.schema_version||0;let h=l.create();if(t&&0!==Object.keys(t).length)if(u===c.SCHEMA_VERSION)h=t;else{if(u>c.SCHEMA_VERSION)throw new Error("Your data is from a more recent version of this lib. Please update!");try{console.warn(`${c.LIB}: attempting to migrate schema from v${u} to v${c.SCHEMA_VERSION}:`),h=function(e,t,n){return e.xTry("migrate_to_4",({logger:e})=>{throw new Error("Alpha release schema, won't migrate, would take too much time and schema is still unstable!")})}(e),console.info(`${c.LIB}: schema migration successful.`)}catch(e){console.error(`${c.LIB}: failed migrating schema, performing full reset !`,e),h=l.create()}}return h.prng.seed===s.DEFAULT_SEED&&(h=l.reseed(h)),h.avatar=o.migrate_to_latest(e,h.avatar,n.avatar),h.inventory=a.migrate_to_latest(h.inventory,n.inventory),h.wallet=i.migrate_to_latest(h.wallet,n.wallet),h.prng=s.migrate_to_latest(h.prng,n.prng),h})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),o=r.Enum("none","small","medium","big","huge");t.CoinsGain=o;const i=r.Enum("story","fight");t.AdventureType=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4),o=n(70);t.CoinsGain=o.CoinsGain,t.AdventureType=o.AdventureType;const i=n(206);t.i18n_messages=i.i18n_messages;const a=i.ENTRIES.map(e=>{const t=e.outcome||{},n={level:!!t.level,agility:!!t.agility,health:!!t.health,luck:!!t.luck,mana:!!t.mana,strength:!!t.strength,charisma:!!t.charisma,wisdom:!!t.wisdom,random_attribute:!!t.random_attribute,lowest_attribute:!!t.lowest_attribute,class_primary_attribute:!!t.class_primary_attribute,class_secondary_attribute:!!t.class_secondary_attribute,coin:t.coin||o.CoinsGain.none,token:t.token||0,armor:!!t.armor,weapon:!!t.weapon,armor_or_weapon:!!t.armor_or_weapon,armor_improvement:!!t.armor_improvement,weapon_improvement:!!t.weapon_improvement,armor_or_weapon_improvement:!!t.armor_or_weapon_improvement};return{hid:e.hid,good:e.good,type:e.type,outcome:n}});t.ALL_ADVENTURE_ARCHETYPES=a;const s=a.filter(e=>!e.good);t.ALL_BAD_ADVENTURE_ARCHETYPES=s;const c=a.filter(e=>e.good);t.ALL_GOOD_ADVENTURE_ARCHETYPES=c;const l={story:c.filter(e=>e.type===o.AdventureType.story),fight:c.filter(e=>e.type===o.AdventureType.fight)};t.GOOD_ADVENTURE_ARCHETYPES_BY_TYPE=l;const u=1.1,h={none:[0,0],small:[1,20],medium:[50,100],big:[500,700],huge:[900,2e3]};!function(){if(a.length<20)throw console.error(a),new Error("Data sanity failure: ALL_ADVENTURE_ARCHETYPES");if(1!==s.length)throw new Error("Data sanity failure: ALL_BAD_ADVENTURE_ARCHETYPES");if(c.length<20)throw new Error("Data sanity failure: ALL_GOOD_ADVENTURE_ARCHETYPES");if(5!==l.fight.length)throw console.error(l.fight),new Error("Data sanity failure: GOOD_ADVENTURE_ARCHETYPES_BY_TYPE.fight");if(l.story.length<20)throw new Error("Data sanity failure: GOOD_ADVENTURE_ARCHETYPES_BY_TYPE.story")}(),t.get_archetype=function(e){const t=a.find(t=>t.hid===e);if(!t)throw new Error(`logic-adventures, get_archetype(): couldn't find archetype "${e}" !`);return t};const p=.33;t.pick_random_good_archetype=function(e){return r.Random.bool(p)(e)?r.Random.pick(e,l.fight):r.Random.pick(e,l.story)},t.pick_random_bad_archetype=function(e){return r.Random.pick(e,s)},t.generate_random_coin_gain=function(e,t,n){if(t===o.CoinsGain.none)return 0;const i=n*u,a=h[t];return r.Random.integer(a[0]*i,a[1]*i)(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1).Enum("common","elite","boss");t.MonsterRank=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);r.__exportStar(n(72),t),r.__exportStar(n(213),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4),o=n(36),i=987;t.DEFAULT_SEED=i,t.create=function(){return{schema_version:o.SCHEMA_VERSION,revision:0,seed:i,use_count:0,recently_encountered_by_id:{}}},t.set_seed=function(e,t){return e.seed=t,e.use_count=0,e},t.update_use_count=function(e,t,n={}){const r=t.getUseCount();if(r<e.use_count)throw new Error("update PRNG state: count is lower than previous count, this is unexpected! Check your code!");if(n.I_swear_I_really_cant_know_whether_the_rng_was_used||r!==e.use_count||console.warn("update PRNG state: count hasn't changed = no random was generated! This is most likely a bug, check your code!"),t!==a)throw new Error("update PRNG state: passed prng is not the cached one, this is unexpected!");return e.use_count=r,e},t.register_recently_used=function(e,t,n,r){return e.recently_encountered_by_id[t]=e.recently_encountered_by_id[t]||[],e.recently_encountered_by_id[t]=e.recently_encountered_by_id[t].concat(n).slice(-r),e};let a="foo",s=!1;function c(){(a=r.Random.engines.mt19937().seed(i))._seed=i,s=!1}c(),t.get_prng=function(e){let t=!1;if(a._seed!==e.seed&&(a.seed(e.seed),a._seed=e.seed,t=!0),a.getUseCount()!==e.use_count){if(0!==a.getUseCount())throw new Error("state-prng get_prng() unexpected case: cached implementation need to be fast forwarded!");a.discard(e.use_count),t=!0}if(t){if(s)throw new Error("state-prng unexpected case: need to update again the prng!");s=!0}return a},t.xxx_internal_reset_prng_cache=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0).__importDefault(n(15)),o=n(2);t.InventorySlot=o.InventorySlot;const i=n(6),a=n(7),s=n(37),c=n(76);function l(e){return e.unslotted.sort(c.compare_items),e}function u(e,t){const n=e.unslotted.filter(e=>e.uuid!==t);if(n.length===e.unslotted.length)throw new Error(`state-inventory: can't remove item #${t}, not found!`);return e.unslotted=n,e}function h(e){return Object.keys(e.slotted).length}function p(e){return e.unslotted.filter(e=>!!e).length}function f(e,t){let n=e.unslotted.find(e=>e.uuid===t);return n||null}function d(e,t){return e.slotted[t]||null}t.create=function(){return{schema_version:s.SCHEMA_VERSION,revision:0,unslotted_capacity:20,slotted:{},unslotted:[]}},t.add_item=function(e,t){if(e.unslotted.length>=e.unslotted_capacity)throw new Error("state-inventory: can't add item, inventory is full!");return e.unslotted.push(t),l(e)},t.remove_item_from_unslotted=u,t.equip_item=function(e,t){const n=e.unslotted.find(e=>e.uuid===t);if(!n)throw new Error(`state-inventory: can't equip item #${t}, not found!`);const r=n.slot,o=d(e,r);return e.slotted[r]=n,e=u(e,n.uuid),o&&e.unslotted.push(o),l(e)},t.get_equipped_item_count=h,t.get_unequipped_item_count=p,t.get_item_count=function(e){return h(e)+p(e)},t.get_unslotted_item=f,t.get_item=function(e,t){let n=f(e,t);return(n=n||Object.values(e.slotted).find(e=>!!e&&e.uuid===t))||null},t.get_item_in_slot=d,t.iterables_unslotted=function*(e){yield*e.unslotted};const m=r.default({schema_version:1,revision:42,unslotted_capacity:20,slotted:{armor:a.DEMO_ARMOR_2,weapon:i.DEMO_WEAPON_1},unslotted:[i.DEMO_WEAPON_2,a.DEMO_ARMOR_1]});t.DEMO_STATE=m;const g=r.default({unslotted_capacity:20,slotted:{armor:a.DEMO_ARMOR_2,weapon:i.DEMO_WEAPON_1},unslotted:[i.DEMO_WEAPON_2,a.DEMO_ARMOR_1]});t.OLDEST_LEGACY_STATE_FOR_TESTS=g;const _=r.default({to_v1:{revision:42}});t.MIGRATION_HINTS_FOR_TESTS=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),o=n(7),i=n(6),a=n(37);t.compare_items=function(e,t){if(e.slot!==t.slot)return r.compare_items_by_slot(e,t);switch(e.slot){case r.InventorySlot.armor:{const n=o.compare_armors_by_strength(e,t);if(!Number.isInteger(n))throw new Error(`${a.LIB}: compare():  error sorting armors!`);return n}case r.InventorySlot.weapon:{const n=i.compare_weapons_by_strength(e,t);if(!Number.isInteger(n))throw new Error(`${a.LIB}: compare():  error sorting weapons!`);return n}default:throw new Error(`${a.LIB}: compare(): unhandled item slot "${e.slot}"!`)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.LIB="@oh-my-rpg/state-wallet";t.SCHEMA_VERSION=1},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0).__importDefault(n(15)),o=n(77),i=n(227);t.Currency=i.Currency;const a=[i.Currency.coin,i.Currency.token];function s(e,t,n){switch(t){case i.Currency.coin:e.coin_count+=n;break;case i.Currency.token:e.token_count+=n;break;default:throw new Error(`state-wallet: unrecognized currency: "${t}`)}return e}function c(e,t){return e[function(e){return`${e}_count`}(t)]}t.ALL_CURRENCIES=a,t.create=function(){return{schema_version:o.SCHEMA_VERSION,revision:0,coin_count:0,token_count:0}},t.add_amount=function(e,t,n){if(n<=0)throw new Error("state-wallet: can't add a <= 0 amount");return s(e,t,n)},t.remove_amount=function(e,t,n){if(n<=0)throw new Error("state-wallet: can't remove a <= 0 amount");if(n>c(e,t))throw new Error("state-wallet: can't remove more than available, no credit !");return s(e,t,-n)},t.get_currency_amount=c,t.iterables_currency=function*(e){yield*a};const l=r.default({schema_version:1,revision:42,coin_count:23456,token_count:89});t.DEMO_STATE=l;const u=r.default({coin_count:23456,token_count:89});t.OLDEST_LEGACY_STATE_FOR_TESTS=u;const h=r.default({to_v1:{revision:42}});t.MIGRATION_HINTS_FOR_TESTS=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),o=n(38);t.get_SEC=function(e){return r.oh_my_rpg_get_SEC({module:o.LIB,parent_SEC:e})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(1),i=r.__importDefault(n(15)),a=n(38),s=n(229);t.CharacterAttribute=s.CharacterAttribute,t.CharacterClass=s.CharacterClass;const c=n(79),l=o.Enum.keys(s.CharacterAttribute);t.CHARACTER_ATTRIBUTES=l;const u=["level","health","mana","strength","agility","charisma","wisdom","luck"];t.CHARACTER_ATTRIBUTES_SORTED=u,c.get_SEC().xTry("boot checks",()=>{if(l.length!==u.length)throw new Error("CHARACTER_ATTRIBUTES to update!")});const h=o.Enum.keys(s.CharacterClass);t.CHARACTER_CLASSES=h,t.create=function(e){return c.get_SEC(e).xTry("create",({enforce_immutability:e})=>e({schema_version:a.SCHEMA_VERSION,revision:0,name:"[anonymous]",klass:s.CharacterClass.novice,attributes:{level:1,health:1,mana:0,strength:1,agility:1,charisma:1,wisdom:1,luck:1}}))},t.rename=function(e,t,n){return c.get_SEC(e).xTry("rename",({enforce_immutability:e})=>{if(!n)throw new Error(`Error while renaming to "${n}: invalid target value!`);return n===t.name?t:e(Object.assign({},t,{name:n,revision:t.revision+1}))})},t.switch_class=function(e,t,n){return c.get_SEC(e).xTry("switch_class",({enforce_immutability:e})=>n===t.klass?t:e(Object.assign({},t,{klass:n,revision:t.revision+1})))},t.increase_stat=function(e,t,n,r=1){return c.get_SEC(e).xTry("increase_stat",({enforce_immutability:e})=>{if(r<=0)throw new Error(`Error while increasing stat "${n}": invalid amount!`);return e(Object.assign({},t,{attributes:Object.assign({},t.attributes,{[n]:t.attributes[n]+r}),revision:t.revision+1}))})};const p=i.default({schema_version:2,revision:42,name:"Perte",klass:s.CharacterClass.paladin,attributes:{level:13,health:12,mana:23,strength:4,agility:5,charisma:6,wisdom:7,luck:8}});t.DEMO_STATE=p;const f=i.default({name:"Perte",klass:"paladin",characteristics:{level:13,health:12,mana:23,strength:4,agility:5,charisma:6,wisdom:7,luck:8}});t.OLDEST_LEGACY_STATE_FOR_TESTS=f;const d=i.default({to_v2:{revision:42}});t.MIGRATION_HINTS_FOR_TESTS=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);r.__exportStar(n(231),t),r.__exportStar(n(230),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCatcher=function({decorators:e=[],onError:t,debugId:n="?"}={}){return r=>{if(r=e.reduce((e,t)=>{try{if(!(e=t(e)).message)throw new Error}catch(t){console.error(`catchFactory exec from ${n}: bad decorator!`,e,t)}return e},r),t)return t(r);throw r}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(20);t.LIB=r.LIB,t.INTERNAL_PROP=r.INTERNAL_PROP;const o=n(82);t.createCatcher=o.createCatcher;const i=n(237);t.isSEC=i.isSEC,t.setRoot=i.setRoot,t.getContext=i.getContext;const a={create:function(...e){return i.create(...e)}};t.isomorphic=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(85);t.create_element_base=function(e,t={}){return{element_type:e,uuid:t.uuid||r.generate_uuid()}},t.xxx_test_unrandomize_element=function(e,t){return Object.assign({},e,{uuid:t||"uu1~test~test~test~test~"})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=r.__importDefault(n(243)),i=r.__importDefault(n(241)),a=r.__importDefault(n(240)),s=n(4),c="uu1",l=21,u=c.length+l;t.UUID_LENGTH=u,t.generate_uuid=function({length:e=l,rng:t}={}){return c+(t?i.default(e=>{let n=[];const r=s.Random.integer(0,255);for(let o=0;o<e;o++)n.push(r(t));return n},a.default,e):o.default(e))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),o=n(41),i=r.Enum.keys(o.ItemQuality);t.ITEM_QUALITIES=i;const a={[o.ItemQuality.common]:6,[o.ItemQuality.uncommon]:5,[o.ItemQuality.rare]:4,[o.ItemQuality.epic]:3,[o.ItemQuality.legendary]:2,[o.ItemQuality.artifact]:1};t.ITEM_QUALITIES_TO_INT=a;const s=r.Enum.keys(o.InventorySlot);t.ITEM_SLOTS=s;const c={[o.InventorySlot.armor]:2,[o.InventorySlot.weapon]:1};t.ITEM_SLOTS_TO_INT=c;t.MIN_LEVEL=1;t.MAX_LEVEL=9999},function(e,t){e.exports=require("conf")},function(e,t){e.exports=require("assert")},function(e,t){e.exports=require("stream")},function(e,t,n){"use strict";var r=n(10);e.exports=function(e){if(null===e||"object"!=typeof e)return e;if(e instanceof Object)var t={__proto__:e.__proto__};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}),t}(r)},function(e,t,n){"use strict";const{stylize_string:r}=n(17);e.exports={render_header:function({may_clear_screen:e,version:t}){console.log("--------------------------------------------------------------------------------"),console.log(r.dim(r.bold("The npm RPG")+` - v${t} - `+r.underline("http://www.online-adventur.es/the-npm-rpg")+"\n"))}}},function(e,t,n){"use strict";const{stylize_string:r}=n(17),o="rich_text_to_ansi",i=" ";const a={on_node_enter:()=>"",on_concatenate_str:({state:e,str:t})=>e+t,on_concatenate_sub_node:function({state:e,sub_state:t,$id:n,$parent_node:o}){return"ul"===o.$type?e+"\n - "+t:"ol"===o.$type?e+`\n ${(" "+n).slice(-2)}. `+t:"strong"===o.$type?e+r.bold(t):e+t},on_class_after:({state:e,$class:t,$node:n})=>(function(e,t,n={}){switch(e){case"item__name":case"avatar__name":case"avatar__class":case"monster__name":return r.bold(t);case"item--quality--common":return t;case"item--quality--uncommon":return r.green(t);case"item--quality--rare":return r.blue(t);case"item--quality--epic":return r.magenta(t);case"item--quality--legendary":return r.red(t);case"item--quality--artifact":return r.yellow(t);case"item--armor":return"🛡 "+i+t;case"item--weapon":return"⚔ "+i+t;case"currency--coin":return"💰 "+i+t;case"currency--token":return"💠 "+i+t;case"attribute--level":return"👶 "+i+t;case"attribute--health":return"💗 "+i+t;case"attribute--mana":return"💙 "+i+t;case"attribute--agility":return"🤸 "+i+t;case"attribute--luck":return"🤹 "+i+t;case"attribute--strength":return"🏋 "+i+t;case"attribute--charisma":return"👨‍🎤 "+i+t;case"attribute--wisdom":return"👵 "+i+t;case"monster":return t+" "+n.possible_emoji+i;case"monster--rank--common":return t;case"monster--rank--elite":return r.yellow(t);case"monster--rank--boss":return r.red(t);case"rank--common":return t;case"rank--elite":return r.bold(t+"★");case"rank--boss":return r.bold(t+" 👑"+i);case"item--enhancement":case"armor--values":case"weapon--values":case"item":case"attributes":case"inventory--equipment":case"inventory--wallet":case"inventory--backpack":case"":return t;default:return console.warn(`${o}: unknown class "${e}", ignored.`),t}})(t,e,n.$hints),on_type:({state:e,$type:t})=>(function(e,t){switch(e){case"li":case"span":case"section":return t;case"ol":case"ul":return t;case"strong":return r.bold(t);case"heading":return"\n"+r.bold(t);case"em":return r.italic(t);default:return console.warn(`${o}: unknown type "${e}", ignored.`),t}})(t,e),on_root_exit:({state:e})=>(e=e,e),on_type_br:({state:e})=>e+"\n",on_type_hr:({state:e})=>e+"\n------------------------------------------------------------\n"};var s;e.exports=a},function(e,t,n){"use strict";const r=n(3),o=n(92);e.exports={rich_text_to_ansi:function(e){return r.walk(e,o)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0).__importStar(n(3));t.render_account_info=function(e,t={}){const n=t;return r.span().pushNode(r.heading().pushText("Account infos:").done(),"header").pushNode(function(e){const t=r.unordered_list();return Object.keys(e).forEach(n=>{t.pushRawNode(r.span().pushText(n+": "+e[n]).done(),n)}),t.done()}(n),"list").done()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(2),i=n(13),a=r.__importStar(n(3)),s=n(24),c=n(23);function l(e){const t=a.ordered_list().addClass("inventory--equipment").done();return o.ITEM_SLOTS.forEach((n,r)=>{const c=i.get_item_in_slot(e,n),l=a.span().pushText((n+"   ").slice(0,6)).pushText(": ").pushNode(c?s.render_item(c):a.span().pushText("-").done()).done();t.$sub[o.ITEM_SLOTS_TO_INT[n]]=l}),a.section().pushNode(a.heading().pushText("Active equipment:").done(),"header").pushNode(t,"list").done()}function u(e){let t=a.ordered_list().addClass("inventory--backpack").done();return Array.from(i.iterables_unslotted(e)).filter(e=>!!e).forEach((e,n)=>{e&&(t.$sub[n]=s.render_item(e))}),0===Object.keys(t.$sub).length&&(t.$type=a.NodeType.ul,t.$sub["-"]=a.span().pushText("(empty)").done()),a.section().pushNode(a.heading().pushText("backpack:").done(),"header").pushNode(t,"list").done()}t.render_equipment=l,t.render_backpack=u,t.render_full_inventory=function(e,t){return a.section().pushNode(l(e),"equipped").pushLineBreak().pushNode(c.render_wallet(t),"wallet").pushLineBreak().pushNode(u(e),"backpack").done()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0).__importStar(n(3)),o=n(9);function i(e){return r.section().pushNode(r.heading().pushText("Identity:{{br}}").done(),"header").pushText("name:  {{name}}{{br}}").pushText("class: {{class}}").pushRawNode(r.span().addClass("avatar__name").pushText(e.name).done(),"name").pushRawNode(r.span().addClass("avatar__class").pushText(e.klass).done(),"class").done()}function a(e){const t=r.unordered_list().addClass("attributes").done();return o.CHARACTER_ATTRIBUTES_SORTED.forEach((n,o)=>{const i=n,a=e.attributes[n],s=`${i}............`.slice(0,11),c=`.......${a}`.slice(-4),l=r.span().addClass("attribute--"+n).pushText(s+c).done();t.$sub[""+o]=l}),r.section().pushNode(r.heading().pushText("Attributes:").done(),"header").pushNode(t,"list").done()}t.render_avatar=i,t.render_attributes=a,t.render_character_sheet=function(e){return r.section().pushNode(i(e),"avatar").pushLineBreak().pushNode(a(e),"attributes").done()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(2),i=n(9),a=n(71),s=n(8),c=r.__importStar(n(3)),l=n(24),u=n(23),h=n(43);t.render_adventure=function(e){const t=e.gains,n={};let r=c.span().done(),p=c.span().done(),f=c.span().done();const d=new Set;!function(){const e=c.unordered_list().done();o.ITEM_SLOTS.forEach(r=>{if(!t[r])return;const o=l.render_item(t[r]);n.item=o,n.item_slot=c.span().pushText(r).done(),n[r]=o,e.$sub[r]=o,d.add(r)}),s.ALL_CURRENCIES.forEach(r=>{if(!t[r])return;const o=u.render_currency_amount(r,t[r]);e.$sub[r]=n[r]=o,d.add(r)}),Object.keys(e.$sub).length&&(r=c.section().pushLineBreak().pushText("Loot:").pushNode(e,"list").done())}(),function(){const e=c.unordered_list().done();i.CHARACTER_ATTRIBUTES.forEach(r=>{if(!t[r])return;n.attr_name=c.span().pushText(r).done();const o=c.span().pushText(""+t[r]).done();n.attr=o,n[r]=o,e.$sub[r]="level"===r?c.span().pushText("🆙 You leveled up!").done():c.span().pushText(`You improved your ${r} by ${t[r]}!`).done(),d.add(r)}),Object.keys(e.$sub).length&&(p=c.section().pushLineBreak().pushText("Character improvement:").pushNode(e,"list").done())}(),function(){const e=t.armor_improvement||t.weapon_improvement,n=c.unordered_list().done();t.armor_improvement&&d.add("armor_improvement"),t.weapon_improvement&&d.add("weapon_improvement"),e&&(f=c.section().pushLineBreak().pushText("Item improvement:").pushNode(n,"list").done())}(),e.encounter&&(n.encounter=h.render_monster(e.encounter));const m=Object.keys(t).filter(e=>!!t[e]).filter(e=>!d.has(e));if(m.length)throw console.error(`render_adventure(): *UN*handled outcome properties: "${m}"!`),console.info(`render_adventure(): handled outcome properties: "${Array.from(d.values())}"`),new Error("render_adventure(): unhandled outcome properties!");const g=a.i18n_messages.en.adventures[e.hid],_=c.section().pushText(g).done();return _.$sub=Object.assign({},_.$sub,n),_}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1).Enum("person","item","place");t.TextClass=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);r.__exportStar(n(98),t),r.__exportStar(n(97),t),r.__exportStar(n(96),t),r.__exportStar(n(95),t),r.__exportStar(n(24),t),r.__exportStar(n(94),t),r.__exportStar(n(43),t),r.__exportStar(n(23),t)},function(e,t,n){"use strict";const r=n(27);e.exports={indent_string:function(e,t,n={}){let o=r(e,t,n);if(!n||!n.indent||" "===n.indent)return o;const i=Array(t).fill(n.indent).join("");return o.split("\n").map(e=>e.startsWith(i)?e:i+e).join("\n")}}},function(e,t){e.exports=function(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}},function(e,t,n){"use strict";const r=n(44),o=n(101),{indent_string:i}=n(100),a="@oh-my-rpg/view-chat";e.exports={PromiseWithProgress:r,create:function({DEBUG:e,gen_next_step:t,ui:n,inter_msg_delay_ms:s=0,after_input_delay_ms:c=0,prettify_json:l=null}){function u(e){return l?i(l.apply(null,e),1,{indent:"\t"}):e}function h(e){try{if("ask_for_confirmation"===e.type&&e!==STEP_CONFIRM&&(e=Object.assign({},STEP_CONFIRM,e)),!e.msg_main)throw new Error(`${a}: Step is missing main message!`);if(!e.type){if(!e.choices)throw new Error(`${a}: Step type is unknown and not inferrable!`);e.type="ask_for_choice"}if((e=Object.assign({validator:null,choices:[]},e)).choices=e.choices.map(p),e.choices.length){const t=new Set;e.choices.forEach((e,n)=>{if(t.has(e.value)){const t=new Error(`${a}: colliding choices with the same value!`);throw t.details={choice:e,value:e.value,index:n},t}t.add(e.value)})}return e}catch(t){throw console.error(l?l(e):e),t}}function p(e){try{if(!e.hasOwnProperty("value")||void 0===e.value)throw new Error("Choice has no value!");return e.msg_cta=e.msg_cta||String(e.value),e}catch(t){throw console.error(l?l(e):e),t}}async function f(t){switch(e&&console.log("↘ execute_step(\n",u(t),"\n)"),t.type){case"simple_message":await n.pretend_to_think(s),await n.display_message({msg:t.msg_main});break;case"progress":await n.display_progress({progress_promise:t.progress_promise||function({DURATION_MS:e=2e3,PERIOD_MS:t=100}={}){return new r((n,r,o)=>{let i=0;const a=setInterval(()=>{const r=++i*t*1/e;o(r),r>=1&&(clearInterval(a),n())},t)})}({DURATION_MS:t.duration_ms}),msg:t.msg_main,msgg_acknowledge:t.msgg_acknowledge}).then(()=>!0,()=>!1).then(e=>{t.callback&&t.callback(e)});break;case"ask_for_confirmation":case"ask_for_string":case"ask_for_choice":{await n.pretend_to_think(s);const r=await async function(t){e&&console.log("↘ ask_user(\n",u(t),"\n)");let r="";await n.display_message({msg:t.msg_main,choices:t.choices}),r=await n.read_answer(t),e&&console.log(`↖ ask_user(…) answer = "${r}"`),await n.pretend_to_think(c);let o=!1;if(t.choices.length){const e=t.choices.find(e=>e.value===r);e.msgg_acknowledge&&(await n.display_message({msg:e.msgg_acknowledge(r)}),o=!0)}return!o&&t.msgg_acknowledge&&(await n.display_message({msg:t.msgg_acknowledge(r)}),o=!0),o||e&&console.warn("You may want to add an acknowledge message to this step."),r}(t);let o=!1;if(t.choices.length){const e=t.choices.find(e=>e.value===r);e.callback&&(await e.callback(r),o=!0)}if(!o&&t.callback&&(await t.callback(r),o=!0),!o){const e=new Error("CNF reporting callback in ask for result!");throw e.step=t,e}return r}default:throw new Error(`Unsupported step type: "${t.type}"!`)}}return e&&console.log("↘ create()"),{start:async function(){e&&console.log("↘ start()");try{await n.setup();let e=!1,r=void 0,i=void 0;do{const a=+new Date,s=t.next({last_step:r,last_answer:i}),{value:l,done:u}=o(s)?await n.spin_until_resolution(s):s;if(u){e=!0;continue}const p=h(l),d=+new Date-a;(p=r)&&p.type.startsWith("ask_")&&await n.pretend_to_think(Math.max(0,c-d)),i=await f(p),r=p}while(!e);await n.teardown()}catch(e){throw await n.teardown(),e}var r}}}}},function(e,t,n){"use strict";const{prettify_json:r,indent_string:o}=n(45);e.exports={prettify_params_for_debug:function(){return o(r.apply(null,arguments),1,{indent:"\t"})},get_shared_start:function(e){if(e.length<=1)return"";const t=e.concat().sort(),n=t[0],r=t[t.length-1],o=n.length;let i=0;for(;i<o&&n.charAt(i)===r.charAt(i);)i++;return n.substring(0,i)}}},function(e,t,n){"use strict";e.exports=((e,t,n)=>new Promise((r,o)=>{if(n=Object.assign({concurrency:1/0},n),"function"!=typeof t)throw new TypeError("Mapper function is required");const i=n.concurrency;if(!("number"==typeof i&&i>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${i}\` (${typeof i})`);const a=[],s=e[Symbol.iterator]();let c=!1,l=!1,u=0,h=0;const p=()=>{if(c)return;const e=s.next(),n=h;if(h++,e.done)return l=!0,void(0===u&&r(a));u++,Promise.resolve(e.value).then(e=>t(e,n)).then(e=>{a[n]=e,u--,p()},e=>{c=!0,o(e)})};for(let e=0;e<i&&(p(),!l);e++);}))},function(e,t,n){"use strict";var r=n(46);try{e.exports=setImmediate}catch(t){e.exports=r.nextTick}},function(e,t,n){"use strict";e.exports=setInterval},function(e,t,n){"use strict";var r=n(26),o=n(53),i=n(48),a=n(25);function s(e,t){var n="",r=t;do{r%2&&(n+=e),r=Math.floor(r/2),e+=e}while(r&&a(n)<t);return i(n,t)}e.exports=function(e,t,n){if(r("ONN",[e,t,n]),n<0&&(n=0),n>1&&(n=1),t<=0)return"";var i=Math.round(t*n),a=t-i,c=[{type:"complete",value:s(e.complete,i),length:i},{type:"remaining",value:s(e.remaining,a),length:a}];return o(t,c,e)}},function(e,t,n){"use strict";e.exports=function(e,t){return e[t%e.length]}},function(e,t,n){"use strict";var r=n(108),o=n(107);e.exports={activityIndicator:function(e,t,n){if(null!=e.spun)return r(t,e.spun)},progressbar:function(e,t,n){if(null!=e.completed)return o(t,n,e.completed)}}},function(e,t,n){"use strict";var r=n(49);e.exports=function(){return o.newThemeSet()};var o={};o.baseTheme=n(109),o.newTheme=function(e,t){return t||(t=e,e=this.baseTheme),r({},e,t)},o.getThemeNames=function(){return Object.keys(this.themes)},o.addTheme=function(e,t,n){this.themes[e]=this.newTheme(t,n)},o.addToAllThemes=function(e){var t=this.themes;Object.keys(t).forEach(function(n){r(t[n],e)}),r(this.baseTheme,e)},o.getTheme=function(e){if(!this.themes[e])throw this.newMissingThemeError(e);return this.themes[e]},o.setDefault=function(e,t){null==t&&(t=e,e={});var n=null==e.platform?"fallback":e.platform,r=!!e.hasUnicode,o=!!e.hasColor;this.defaults[n]||(this.defaults[n]={true:{},false:{}}),this.defaults[n][r][o]=t},o.getDefault=function(e){e||(e={});var t=e.platform||process.platform,n=this.defaults[t]||this.defaults.fallback,o=!!e.hasUnicode,i=!!e.hasColor;if(!n)throw this.newMissingDefaultThemeError(t,o,i);if(!n[o][i])if(o&&i&&n[!o][i])o=!1;else if(o&&i&&n[o][!i])i=!1;else if(o&&i&&n[!o][!i])o=!1,i=!1;else if(o&&!i&&n[!o][i])o=!1;else if(!o&&i&&n[o][!i])i=!1;else if(n===this.defaults.fallback)throw this.newMissingDefaultThemeError(t,o,i);return n[o][i]?this.getTheme(n[o][i]):this.getDefault(r({},e,{platform:"fallback"}))},o.newMissingThemeError=function e(t){var n=new Error('Could not find a gauge theme named "'+t+'"');return Error.captureStackTrace.call(n,e),n.theme=t,n.code="EMISSINGTHEME",n},o.newMissingDefaultThemeError=function e(t,n,r){var o=new Error("Could not find a gauge theme for your platform/unicode/color use combo:\n    platform = "+t+"\n    hasUnicode = "+n+"\n    hasColor = "+r);return Error.captureStackTrace.call(o,e),o.platform=t,o.hasUnicode=n,o.hasColor=r,o.code="EMISSINGTHEME",o},o.newThemeSet=function(){var e=function(t){return e.getDefault(t)};return r(e,o,{themes:r({},this.themes),baseTheme:r({},this.baseTheme),defaults:JSON.parse(JSON.stringify(this.defaults||{}))})}},function(e,t,n){"use strict";var r=n(54),o=n(110),i=e.exports=new o;i.addTheme("ASCII",{preProgressbar:"[",postProgressbar:"]",progressbarTheme:{complete:"#",remaining:"."},activityIndicatorTheme:"-\\|/",preSubsection:">"}),i.addTheme("colorASCII",i.getTheme("ASCII"),{progressbarTheme:{preComplete:r.color("inverse"),complete:" ",postComplete:r.color("stopInverse"),preRemaining:r.color("brightBlack"),remaining:".",postRemaining:r.color("reset")}}),i.addTheme("brailleSpinner",{preProgressbar:"⸨",postProgressbar:"⸩",progressbarTheme:{complete:"░",remaining:"⠂"},activityIndicatorTheme:"⠋⠙⠹⠸⠼⠴⠦⠧⠇⠏",preSubsection:">"}),i.addTheme("colorBrailleSpinner",i.getTheme("brailleSpinner"),{progressbarTheme:{preComplete:r.color("inverse"),complete:" ",postComplete:r.color("stopInverse"),preRemaining:r.color("brightBlack"),remaining:"░",postRemaining:r.color("reset")}}),i.setDefault({},"ASCII"),i.setDefault({hasColor:!0},"colorASCII"),i.setDefault({platform:"darwin",hasUnicode:!0},"brailleSpinner"),i.setDefault({platform:"darwin",hasUnicode:!0,hasColor:!0},"colorBrailleSpinner")},function(e,t,n){"use strict";e.exports="win32"===process.platform||!!process.env.COLORTERM||/^screen|^xterm|^vt100|color|ansi|cygwin|linux/i.test(process.env.TERM)},function(e,t,n){"use strict";var r=n(18);e.exports=function(){if("Windows_NT"==r.type())return!1;var e=process.env.LC_ALL||process.env.LC_CTYPE||process.env.LANG;return/UTF-?8$/i.test(e)}},function(e,t,n){"use strict";var r=n(25);function o(e){return"string"==typeof e&&"%"===e.slice(-1)}function i(e){return Number(e.slice(0,-1))/100}function a(e,t){if(this.overallOutputLength=t,this.finished=!1,this.type=null,this.value=null,this.length=null,this.maxLength=null,this.minLength=null,this.kerning=null,this.align="left",this.padLeft=0,this.padRight=0,this.index=null,this.first=null,this.last=null,"string"==typeof e)this.value=e;else for(var n in e)this[n]=e[n];return o(this.length)&&(this.length=Math.round(this.overallOutputLength*i(this.length))),o(this.minLength)&&(this.minLength=Math.round(this.overallOutputLength*i(this.minLength))),o(this.maxLength)&&(this.maxLength=Math.round(this.overallOutputLength*i(this.maxLength))),this}e.exports=a,a.prototype={},a.prototype.getBaseLength=function(){var e=this.length;return null==e&&"string"==typeof this.value&&null==this.maxLength&&null==this.minLength&&(e=r(this.value)),e},a.prototype.getLength=function(){var e=this.getBaseLength();return null==e?null:e+this.padLeft+this.padRight},a.prototype.getMaxLength=function(){return null==this.maxLength?null:this.maxLength+this.padLeft+this.padRight},a.prototype.getMinLength=function(){return null==this.minLength?null:this.minLength+this.padLeft+this.padRight}},function(e,t,n){"use strict";var r=n(16),o=t.User=function e(t){var n=new Error(t);return Error.captureStackTrace(n,e),n.code="EGAUGE",n};t.MissingTemplateValue=function e(t,n){var i=new o(r.format('Missing template value "%s"',t.type));return Error.captureStackTrace(i,e),i.template=t,i.values=n,i},t.Internal=function e(t){var n=new Error(t);return Error.captureStackTrace(n,e),n.code="EGAUGEINTERNAL",n}},function(e,t,n){"use strict";e.exports=Number.isNaN||function(e){return e!=e}},function(e,t,n){"use strict";var r=n(52)();e.exports=function(e){return"string"==typeof e?e.replace(r,""):e}},function(e,t,n){"use strict";var r=n(117),o=n(51),i=n(50);e.exports=function(e){if("string"!=typeof e||0===e.length)return 0;var t=0;e=r(e);for(var n=0;n<e.length;n++){var a=o(e,n);a<=31||a>=127&&a<=159||(a>=65536&&n++,i(a)?t+=2:t++)}return t}},function(e,t,n){"use strict";var r=n(118);function o(e){var t="",n=" ",r=e;do{r%2&&(t+=n),r=Math.floor(r/2),n+=n}while(r);return t}t.center=function(e,t){var n=e.trim();if(0===n.length&&e.length>=t)return e;var i="",a="",s=r(n);if(s<t){var c=parseInt((t-s)/2,10);i=o(c),a=o(t-(s+c))}return i+n+a},t.left=function(e,t){var n=e.trimRight();if(0===n.length&&e.length>=t)return e;var i="",a=r(n);a<t&&(i=o(t-a));return n+i},t.right=function(e,t){var n=e.trimLeft();if(0===n.length&&e.length>=t)return e;var i="",a=r(n);a<t&&(i=o(t-a));return i+n}},function(e,t,n){"use strict";var r=n(54),o=n(53),i=n(26),a=e.exports=function(e,t,n){n||(n=80),i("OAN",[e,t,n]),this.showing=!1,this.theme=e,this.width=n,this.template=t};a.prototype={},a.prototype.setTheme=function(e){i("O",[e]),this.theme=e},a.prototype.setTemplate=function(e){i("A",[e]),this.template=e},a.prototype.setWidth=function(e){i("N",[e]),this.width=e},a.prototype.hide=function(){return r.gotoSOL()+r.eraseLine()},a.prototype.hideCursor=r.hideCursor,a.prototype.showCursor=r.showCursor,a.prototype.show=function(e){var t=Object.create(this.theme);for(var n in e)t[n]=e[n];return o(this.width,this.template,t).trim()+r.color("reset")+r.eraseLine()+r.gotoSOL()}},function(e,t,n){"use strict";var r=n(120),o=n(113),i=n(112),a=n(28),s=n(111),c=n(106),l=n(46),u=n(105);function h(e,t){return function(){return t.call(e)}}function p(e,t){var n,o;e&&e.write?(o=e,n=t||{}):t&&t.write?(o=t,n=e||{}):(o=l.stderr,n=e||t||{}),this._status={spun:0,section:"",subsection:""},this._paused=!1,this._disabled=!0,this._showing=!1,this._onScreen=!1,this._needsRedraw=!1,this._hideCursor=null==n.hideCursor||n.hideCursor,this._fixedFramerate=null==n.fixedFramerate?!/^v0\.8\./.test(l.version):n.fixedFramerate,this._lastUpdateAt=null,this._updateInterval=null==n.updateInterval?50:n.updateInterval,this._themes=n.themes||s,this._theme=n.theme;var i=this._computeTheme(n.theme),a=n.template||[{type:"progressbar",length:20},{type:"activityIndicator",kerning:1,length:1},{type:"section",kerning:1,default:""},{type:"subsection",kerning:1,default:""}];this.setWriteTo(o,n.tty);var c=n.Plumbing||r;this._gauge=new c(i,a,this.getWidth()),this._$$doRedraw=h(this,this._doRedraw),this._$$handleSizeChange=h(this,this._handleSizeChange),this._cleanupOnExit=null==n.cleanupOnExit||n.cleanupOnExit,this._removeOnExit=null,n.enabled||null==n.enabled&&this._tty&&this._tty.isTTY?this.enable():this.disable()}e.exports=p,p.prototype={},p.prototype.isEnabled=function(){return!this._disabled},p.prototype.setTemplate=function(e){this._gauge.setTemplate(e),this._showing&&this._requestRedraw()},p.prototype._computeTheme=function(e){if(e||(e={}),"string"==typeof e)e=this._themes.getTheme(e);else if(e&&(0===Object.keys(e).length||null!=e.hasUnicode||null!=e.hasColor)){var t=null==e.hasUnicode?o():e.hasUnicode,n=null==e.hasColor?i:e.hasColor;e=this._themes.getDefault({hasUnicode:t,hasColor:n,platform:e.platform})}return e},p.prototype.setThemeset=function(e){this._themes=e,this.setTheme(this._theme)},p.prototype.setTheme=function(e){this._gauge.setTheme(this._computeTheme(e)),this._showing&&this._requestRedraw(),this._theme=e},p.prototype._requestRedraw=function(){this._needsRedraw=!0,this._fixedFramerate||this._doRedraw()},p.prototype.getWidth=function(){return(this._tty&&this._tty.columns||80)-1},p.prototype.setWriteTo=function(e,t){var n=!this._disabled;n&&this.disable(),this._writeTo=e,this._tty=t||e===l.stderr&&l.stdout.isTTY&&l.stdout||e.isTTY&&e||this._tty,this._gauge&&this._gauge.setWidth(this.getWidth()),n&&this.enable()},p.prototype.enable=function(){this._disabled&&(this._disabled=!1,this._tty&&this._enableEvents(),this._showing&&this.show())},p.prototype.disable=function(){this._disabled||(this._showing&&(this._lastUpdateAt=null,this._showing=!1,this._doRedraw(),this._showing=!0),this._disabled=!0,this._tty&&this._disableEvents())},p.prototype._enableEvents=function(){this._cleanupOnExit&&(this._removeOnExit=a(h(this,this.disable))),this._tty.on("resize",this._$$handleSizeChange),this._fixedFramerate&&(this.redrawTracker=c(this._$$doRedraw,this._updateInterval),this.redrawTracker.unref&&this.redrawTracker.unref())},p.prototype._disableEvents=function(){this._tty.removeListener("resize",this._$$handleSizeChange),this._fixedFramerate&&clearInterval(this.redrawTracker),this._removeOnExit&&this._removeOnExit()},p.prototype.hide=function(e){return this._disabled?e&&l.nextTick(e):this._showing?(this._showing=!1,this._doRedraw(),void(e&&u(e))):e&&l.nextTick(e)},p.prototype.show=function(e,t){if(this._showing=!0,"string"==typeof e)this._status.section=e;else if("object"==typeof e)for(var n=Object.keys(e),r=0;r<n.length;++r){var o=n[r];this._status[o]=e[o]}null!=t&&(this._status.completed=t),this._disabled||this._requestRedraw()},p.prototype.pulse=function(e){this._status.subsection=e||"",this._status.spun++,this._disabled||this._showing&&this._requestRedraw()},p.prototype._handleSizeChange=function(){this._gauge.setWidth(this._tty.columns-1),this._requestRedraw()},p.prototype._doRedraw=function(){if(!this._disabled&&!this._paused){if(!this._fixedFramerate){var e=Date.now();if(this._lastUpdateAt&&e-this._lastUpdateAt<this._updateInterval)return;this._lastUpdateAt=e}if(!this._showing&&this._onScreen){this._onScreen=!1;var t=this._gauge.hide();return this._hideCursor&&(t+=this._gauge.showCursor()),this._writeTo.write(t)}(this._showing||this._onScreen)&&(this._showing&&!this._onScreen&&(this._onScreen=!0,this._needsRedraw=!0,this._hideCursor&&this._writeTo.write(this._gauge.hideCursor())),this._needsRedraw&&(this._writeTo.write(this._gauge.show(this._status))||(this._paused=!0,this._writeTo.on("drain",h(this,function(){this._paused=!1,this._doRedraw()})))))}}},function(e,t,n){"use strict";const r=n(5),o="win32"!==process.platform||process.env.CI||"xterm-256color"===process.env.TERM,i={info:r.blue("ℹ"),success:r.green("✔"),warning:r.yellow("⚠"),error:r.red("✖")},a={info:r.blue("i"),success:r.green("√"),warning:r.yellow("‼"),error:r.red("×")};e.exports=o?i:a},function(e){e.exports={dots:{interval:80,frames:["⠋","⠙","⠹","⠸","⠼","⠴","⠦","⠧","⠇","⠏"]},dots2:{interval:80,frames:["⣾","⣽","⣻","⢿","⡿","⣟","⣯","⣷"]},dots3:{interval:80,frames:["⠋","⠙","⠚","⠞","⠖","⠦","⠴","⠲","⠳","⠓"]},dots4:{interval:80,frames:["⠄","⠆","⠇","⠋","⠙","⠸","⠰","⠠","⠰","⠸","⠙","⠋","⠇","⠆"]},dots5:{interval:80,frames:["⠋","⠙","⠚","⠒","⠂","⠂","⠒","⠲","⠴","⠦","⠖","⠒","⠐","⠐","⠒","⠓","⠋"]},dots6:{interval:80,frames:["⠁","⠉","⠙","⠚","⠒","⠂","⠂","⠒","⠲","⠴","⠤","⠄","⠄","⠤","⠴","⠲","⠒","⠂","⠂","⠒","⠚","⠙","⠉","⠁"]},dots7:{interval:80,frames:["⠈","⠉","⠋","⠓","⠒","⠐","⠐","⠒","⠖","⠦","⠤","⠠","⠠","⠤","⠦","⠖","⠒","⠐","⠐","⠒","⠓","⠋","⠉","⠈"]},dots8:{interval:80,frames:["⠁","⠁","⠉","⠙","⠚","⠒","⠂","⠂","⠒","⠲","⠴","⠤","⠄","⠄","⠤","⠠","⠠","⠤","⠦","⠖","⠒","⠐","⠐","⠒","⠓","⠋","⠉","⠈","⠈"]},dots9:{interval:80,frames:["⢹","⢺","⢼","⣸","⣇","⡧","⡗","⡏"]},dots10:{interval:80,frames:["⢄","⢂","⢁","⡁","⡈","⡐","⡠"]},dots11:{interval:100,frames:["⠁","⠂","⠄","⡀","⢀","⠠","⠐","⠈"]},dots12:{interval:80,frames:["⢀⠀","⡀⠀","⠄⠀","⢂⠀","⡂⠀","⠅⠀","⢃⠀","⡃⠀","⠍⠀","⢋⠀","⡋⠀","⠍⠁","⢋⠁","⡋⠁","⠍⠉","⠋⠉","⠋⠉","⠉⠙","⠉⠙","⠉⠩","⠈⢙","⠈⡙","⢈⠩","⡀⢙","⠄⡙","⢂⠩","⡂⢘","⠅⡘","⢃⠨","⡃⢐","⠍⡐","⢋⠠","⡋⢀","⠍⡁","⢋⠁","⡋⠁","⠍⠉","⠋⠉","⠋⠉","⠉⠙","⠉⠙","⠉⠩","⠈⢙","⠈⡙","⠈⠩","⠀⢙","⠀⡙","⠀⠩","⠀⢘","⠀⡘","⠀⠨","⠀⢐","⠀⡐","⠀⠠","⠀⢀","⠀⡀"]},line:{interval:130,frames:["-","\\","|","/"]},line2:{interval:100,frames:["⠂","-","–","—","–","-"]},pipe:{interval:100,frames:["┤","┘","┴","└","├","┌","┬","┐"]},simpleDots:{interval:400,frames:[".  ",".. ","...","   "]},simpleDotsScrolling:{interval:200,frames:[".  ",".. ","..."," ..","  .","   "]},star:{interval:70,frames:["✶","✸","✹","✺","✹","✷"]},star2:{interval:80,frames:["+","x","*"]},flip:{interval:70,frames:["_","_","_","-","`","`","'","´","-","_","_","_"]},hamburger:{interval:100,frames:["☱","☲","☴"]},growVertical:{interval:120,frames:["▁","▃","▄","▅","▆","▇","▆","▅","▄","▃"]},growHorizontal:{interval:120,frames:["▏","▎","▍","▌","▋","▊","▉","▊","▋","▌","▍","▎"]},balloon:{interval:140,frames:[" ",".","o","O","@","*"," "]},balloon2:{interval:120,frames:[".","o","O","°","O","o","."]},noise:{interval:100,frames:["▓","▒","░"]},bounce:{interval:120,frames:["⠁","⠂","⠄","⠂"]},boxBounce:{interval:120,frames:["▖","▘","▝","▗"]},boxBounce2:{interval:100,frames:["▌","▀","▐","▄"]},triangle:{interval:50,frames:["◢","◣","◤","◥"]},arc:{interval:100,frames:["◜","◠","◝","◞","◡","◟"]},circle:{interval:120,frames:["◡","⊙","◠"]},squareCorners:{interval:180,frames:["◰","◳","◲","◱"]},circleQuarters:{interval:120,frames:["◴","◷","◶","◵"]},circleHalves:{interval:50,frames:["◐","◓","◑","◒"]},squish:{interval:100,frames:["╫","╪"]},toggle:{interval:250,frames:["⊶","⊷"]},toggle2:{interval:80,frames:["▫","▪"]},toggle3:{interval:120,frames:["□","■"]},toggle4:{interval:100,frames:["■","□","▪","▫"]},toggle5:{interval:100,frames:["▮","▯"]},toggle6:{interval:300,frames:["ဝ","၀"]},toggle7:{interval:80,frames:["⦾","⦿"]},toggle8:{interval:100,frames:["◍","◌"]},toggle9:{interval:100,frames:["◉","◎"]},toggle10:{interval:100,frames:["㊂","㊀","㊁"]},toggle11:{interval:50,frames:["⧇","⧆"]},toggle12:{interval:120,frames:["☗","☖"]},toggle13:{interval:80,frames:["=","*","-"]},arrow:{interval:100,frames:["←","↖","↑","↗","→","↘","↓","↙"]},arrow2:{interval:80,frames:["⬆️ ","↗️ ","➡️ ","↘️ ","⬇️ ","↙️ ","⬅️ ","↖️ "]},arrow3:{interval:120,frames:["▹▹▹▹▹","▸▹▹▹▹","▹▸▹▹▹","▹▹▸▹▹","▹▹▹▸▹","▹▹▹▹▸"]},bouncingBar:{interval:80,frames:["[    ]","[=   ]","[==  ]","[=== ]","[ ===]","[  ==]","[   =]","[    ]","[   =]","[  ==]","[ ===]","[====]","[=== ]","[==  ]","[=   ]"]},bouncingBall:{interval:80,frames:["( ●    )","(  ●   )","(   ●  )","(    ● )","(     ●)","(    ● )","(   ●  )","(  ●   )","( ●    )","(●     )"]},smiley:{interval:200,frames:["😄 ","😝 "]},monkey:{interval:300,frames:["🙈 ","🙈 ","🙉 ","🙊 "]},hearts:{interval:100,frames:["💛 ","💙 ","💜 ","💚 ","❤️ "]},clock:{interval:100,frames:["🕛 ","🕐 ","🕑 ","🕒 ","🕓 ","🕔 ","🕕 ","🕖 ","🕗 ","🕘 ","🕙 ","🕚 "]},earth:{interval:180,frames:["🌍 ","🌎 ","🌏 "]},moon:{interval:80,frames:["🌑 ","🌒 ","🌓 ","🌔 ","🌕 ","🌖 ","🌗 ","🌘 "]},runner:{interval:140,frames:["🚶 ","🏃 "]},pong:{interval:80,frames:["▐⠂       ▌","▐⠈       ▌","▐ ⠂      ▌","▐ ⠠      ▌","▐  ⡀     ▌","▐  ⠠     ▌","▐   ⠂    ▌","▐   ⠈    ▌","▐    ⠂   ▌","▐    ⠠   ▌","▐     ⡀  ▌","▐     ⠠  ▌","▐      ⠂ ▌","▐      ⠈ ▌","▐       ⠂▌","▐       ⠠▌","▐       ⡀▌","▐      ⠠ ▌","▐      ⠂ ▌","▐     ⠈  ▌","▐     ⠂  ▌","▐    ⠠   ▌","▐    ⡀   ▌","▐   ⠠    ▌","▐   ⠂    ▌","▐  ⠈     ▌","▐  ⠂     ▌","▐ ⠠      ▌","▐ ⡀      ▌","▐⠠       ▌"]},shark:{interval:120,frames:["▐|\\____________▌","▐_|\\___________▌","▐__|\\__________▌","▐___|\\_________▌","▐____|\\________▌","▐_____|\\_______▌","▐______|\\______▌","▐_______|\\_____▌","▐________|\\____▌","▐_________|\\___▌","▐__________|\\__▌","▐___________|\\_▌","▐____________|\\▌","▐____________/|▌","▐___________/|_▌","▐__________/|__▌","▐_________/|___▌","▐________/|____▌","▐_______/|_____▌","▐______/|______▌","▐_____/|_______▌","▐____/|________▌","▐___/|_________▌","▐__/|__________▌","▐_/|___________▌","▐/|____________▌"]},dqpb:{interval:100,frames:["d","q","p","b"]},weather:{interval:100,frames:["☀️ ","☀️ ","☀️ ","🌤 ","⛅️ ","🌥 ","☁️ ","🌧 ","🌨 ","🌧 ","🌨 ","🌧 ","🌨 ","⛈ ","🌨 ","🌧 ","🌨 ","☁️ ","🌥 ","⛅️ ","🌤 ","☀️ ","☀️ "]},christmas:{interval:400,frames:["🌲","🎄"]},grenade:{interval:80,frames:["،   ","′   "," ´ "," ‾ ","  ⸌","  ⸊","  |","  ⁎","  ⁕"," ෴ ","  ⁓","   ","   ","   "]},point:{interval:125,frames:["∙∙∙","●∙∙","∙●∙","∙∙●","∙∙∙"]},layer:{interval:150,frames:["-","=","≡"]}}},function(e,t,n){"use strict";e.exports=n(123)},function(e,t,n){"use strict";e.exports=((e,t)=>{for(const n of Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t)))Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n));return e})},function(e,t,n){"use strict";const r=n(125);e.exports=((e,t)=>{if(!0===t)throw new TypeError("The second argument is now an options object");if("function"!=typeof e)throw new TypeError("Expected a function");let n;t=t||{};let o=!1;const i=e.displayName||e.name||"<anonymous>",a=function(){if(o){if(!0===t.throw)throw new Error(`Function \`${i}\` can only be called once`);return n}return o=!0,n=e.apply(this,arguments),e=null,n};return r(a,e),a})},function(e,t,n){"use strict";const r=n(126),o=n(28);e.exports=r(()=>{o(()=>{process.stderr.write("[?25h")},{alwaysLast:!0})})},function(e,t,n){"use strict";const r=n(127);let o=!1;t.show=(e=>{const t=e||process.stderr;t.isTTY&&(o=!1,t.write("[?25h"))}),t.hide=(e=>{const t=e||process.stderr;t.isTTY&&(r(),o=!0,t.write("[?25l"))}),t.toggle=((e,n)=>{void 0!==e&&(o=e),o?t.show(n):t.hide(n)})},function(e,t,n){"use strict";const r=n(5),o=n(128),i=n(124),a=n(122);class s{constructor(e){"string"==typeof e&&(e={text:e}),this.options=Object.assign({text:"",color:"cyan",stream:process.stderr},e);const t=this.options.spinner;if(this.spinner="object"==typeof t?t:"win32"===process.platform?i.line:i[t]||i.dots,void 0===this.spinner.frames)throw new Error("Spinner must define `frames`");this.text=this.options.text,this.color=this.options.color,this.interval=this.options.interval||this.spinner.interval||100,this.stream=this.options.stream,this.id=null,this.frameIndex=0,this.enabled="boolean"==typeof this.options.enabled?this.options.enabled:this.stream&&this.stream.isTTY&&!process.env.CI}frame(){const e=this.spinner.frames;let t=e[this.frameIndex];return this.color&&(t=r[this.color](t)),this.frameIndex=++this.frameIndex%e.length,t+" "+this.text}clear(){return this.enabled?(this.stream.clearLine(),this.stream.cursorTo(0),this):this}render(){return this.clear(),this.stream.write(this.frame()),this}start(e){return e&&(this.text=e),!this.enabled||this.id?this:(o.hide(this.stream),this.render(),this.id=setInterval(this.render.bind(this),this.interval),this)}stop(){return this.enabled?(clearInterval(this.id),this.id=null,this.frameIndex=0,this.clear(),o.show(this.stream),this):this}succeed(e){return this.stopAndPersist({symbol:a.success,text:e})}fail(e){return this.stopAndPersist({symbol:a.error,text:e})}warn(e){return this.stopAndPersist({symbol:a.warning,text:e})}info(e){return this.stopAndPersist({symbol:a.info,text:e})}stopAndPersist(e){return this.enabled?("string"==typeof e&&(e={symbol:e}),e=e||{},this.stop(),this.stream.write(`${e.symbol||" "} ${e.text||this.text}\n`),this):this}}e.exports=function(e){return new s(e)},e.exports.promise=((e,t)=>{if("function"!=typeof e.then)throw new TypeError("Parameter `action` must be a Promise");const n=new s(t);return n.start(),e.then(()=>{n.succeed()},()=>{n.fail()}),n})},function(e,t){e.exports=require("readline")},function(e,t,n){"use strict";const r=n(130),o=n(60),i=n(61),a=n(129),s=n(121),c=n(56),{stylize_string:l,indent_string:u,wrap_string:h,prettify_json:p}=n(45),{prettify_params_for_debug:f,get_shared_start:d}=n(103),m="────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────",g="view-chat/tty";function _(e){return e.name}e.exports={prettify_json:p,create:function({DEBUG:e,shouldCenter:t}){e&&console.log("↘ tty_chat_ui.create()");const n={is_closing:!1,keypress_callback:null};if(!process.stdout.isTTY)throw new Error("start_loop: current term is not a tty !");process.stdin.setRawMode(!0),r.emitKeypressEvents(process.stdin);const y=r.createInterface({input:process.stdin,output:process.stdout,prompt:"   "});function v(e){const t=a({interval:100,spinner:"simpleDotsScrolling",stream:process.stdout}).start();return c(Promise.resolve(e),()=>t.stop())}y.on("line",t=>{e&&console.log(`[Received line: ${t}]`)}),y.on("close",()=>{e&&console.log("[Received close]"),n.is_closing=!0}),process.stdin.on("keypress",(t,r)=>{e&&console.log("[keypress]"),n.keypress_callback&&(n.is_closing||(e&&console.log(`[key pressed:\n${p(r)}\n]`),r?(r.name=r.name||r.sequence,n.keypress_callback(r)):e&&console.error("keypress: Y U no key?!")))}),y.prompt();const b=new s({template:[{type:"activityIndicator",kerning:1,length:1},{type:"section",kerning:1,default:""},{type:"subsection",kerning:1,default:""},{type:"progressbar",length:33}]});function w(e){const{msg_cta:t}=e,{key:n}=e._ui_tty;var r;return`${r=n.name,"╴"+l.inverse(" "+r.toUpperCase()+" ")+" "+l.blue("→")} ${t}`}async function E({msg:n,choices:r=[],side:a="→"}){if(e&&console.log(`↘ display_message(\n${f({msg:n,choices:r,side:a})}\n)`),"object"!=typeof arguments[0])throw new Error("display_message(): incorrect invocation!");if(!n)throw new Error("display_message(): no msg!");const{MSG_MAX_WIDTH:s,MSG_BASELINE:c,MSG_L_INDENT:l,MSG_R_INDENT:p}=function(){const n=o().columns;if(e&&console.log({terminal_width:n}),n<80)throw new Error("Your terminal is too narrow!");const r=Math.min(n,120),i=Math.round(.8*r);e&&console.log({terminal_width:n,USED_WIDTH:r,MSG_WIDTH:i});const a=m.slice(0,i-2),s=t?Math.round((n-r)/2):0;return{MSG_MAX_WIDTH:i,MSG_BASELINE:a,MSG_L_INDENT:s,MSG_R_INDENT:s+r-i}}();n=h(n,s-1),n=u(n,1,{indent:"│"}),r&&r.length>0?(n+="\n└┬"+c,function(t){t.choices.forEach(e=>{e._ui_tty=e._ui_tty||{},e._ui_tty.clean_cta=i(e.msg_cta).toLowerCase().split(/\s/).join("")});const n=new Set,r=[],o=new Set;function a(e){e=((e=e.split(" ").join(""))+"abcdefghijklmnopqrstuvwxyz1234567890").toLowerCase();for(let t=0;t<e.length;t++){let r={name:e.charAt(t)};const o=e.charCodeAt(t);if(!(o>47&&o<58||o>96&&o<123))continue;let i=_(r);if(!n.has(i))return r}throw new Error(`${g}: couldn't find any keystroke, no letter left...`)}t.choices.forEach(t=>{if(!t.key_hint)return void r.push(t);const i=_(t.key_hint);if(o.has(i))return e&&console.log(`collision between key hints for key "${i}"!`),void r.push(t);o.add(i),n.add(i),t.key=t.key_hint,t._ui_tty.key=t.key_hint}),r.forEach(e=>{e._ui_tty.key={name:e._ui_tty.clean_cta[0]}});let s=!1,c=r;do{s=!1;const e={};if(c.forEach(t=>{const n=_(t._ui_tty.key);e[n]=e[n]||[],e[n].push(t),e[n].length>1&&(s=!0)}),!s)break;c=[],Object.keys(e).forEach(t=>{if(1===e[t].length)return void n.add(t);const r=e[t],o=d(r.map(e=>e._ui_tty.clean_cta));r.forEach(e=>{let t={name:e._ui_tty.clean_cta.slice(o.length)[0]},r=_(t);t.name&&!n.has(r)||(r=_(t=a(e._ui_tty.clean_cta))),e._ui_tty.key=t,n.add(r)})})}while(s);const l=t.choices.map(e=>"["+e._ui_tty.key.name+"]").join(",");e&&console.log("  available choices: "+l)}({choices:r}),r.forEach((e,t)=>{t===r.length-1?n+="\n └"+w(e):n+="\n ├"+w(e)})):n+="\n└─"+c;let y=0;switch(a){case"→":y=l;break;case"←":y=p;break;case"↔":default:throw new Error("display_message(): incorrect side!")}n=u(n,y,{indent:" "}),console.log(n)}return{setup:()=>{console.log("")},display_message:E,read_answer:async function(t){switch(e&&console.log("↘ read_answer()"),t.type){case"ask_for_string":return function(t){return e&&console.log(`↘ read_string(\n${f(t)}\n)`),new Promise(t=>{y.prompt(),y.question("",n=>{y.clearLine(process.stdout,0),n=String(n).trim(),e&&console.log(`[You entered: "${n}"]`),t(n)})}).then(e=>t.msgg_as_user?E({msg:t.msgg_as_user(e),side:"←"}).then(()=>e):e)}(t);case"ask_for_choice":return async function(t){e&&console.log("↘ read_choice()");const r=t.choices.map(e=>e._ui_tty.key.name).join(",");e&&console.log("  available choices: "+r);let o=void 0;for(;void 0===o;){const i=await(e&&console.log("↘ read_key_sequence()"),new Promise(e=>{y.prompt(),n.keypress_callback=(t=>{n.keypress_callback=null,y.clearLine(process.stdout,0),e(t)})}).catch(()=>process.stdin.setRawMode(!1))),a=t.choices.find(e=>e._ui_tty.key.name===i.name);a?(o=a.value,await E({msg:(a.msgg_as_user||t.msgg_as_user||(()=>a.msg_cta))(o),side:"←"})):console.log(`[please select a correct choice: ${r}]`)}return o}(t);default:throw new Error(`Unsupported step type: "${t.type}"!`)}},spin_until_resolution:v,pretend_to_think:function(e){return v(new Promise(t=>{setTimeout(t,e)}))},display_progress:function({progress_promise:e,msg:t="loading",msgg_acknowledge:n}={}){b.show(t,0);const r=setInterval(()=>b.pulse(),100);return e.onProgress&&e.onProgress(e=>{b.show(t,e)}),e.then(()=>!0,()=>!1).then(e=>{clearInterval(r),b.hide();let o=" ";o+=n?n(e):t,console.log(o)}).catch(e=>(console.error("unexpected",e),!1)),e},teardown:async function(){e&&console.log("↘ teardown()"),y.close()}}}}},function(e,t,n){"use strict";const r=n(18),o=n(10),i=()=>{if("linux"!==process.platform)return!1;if(r.release().includes("Microsoft"))return!0;try{return o.readFileSync("/proc/version","utf8").includes("Microsoft")}catch(e){return!1}};process.env.__IS_WSL_TEST__?e.exports=i:e.exports=i()},function(e,t,n){"use strict";(function(t){const r=n(11),o=n(29),i=n(132);e.exports=((e,n)=>{if("string"!=typeof e)return Promise.reject(new Error("Expected a `target`"));let a;n=Object.assign({wait:!0},n);let s=[],c=[];const l={};Array.isArray(n.app)&&(s=n.app.slice(1),n.app=n.app[0]),"darwin"===process.platform?(a="open",n.wait&&c.push("-W"),n.app&&c.push("-a",n.app)):"win32"===process.platform||i?(a="cmd"+(i?".exe":""),c.push("/c","start",'""',"/b"),e=e.replace(/&/g,"^&"),n.wait&&c.push("/wait"),n.app&&c.push(n.app),s.length>0&&(c=c.concat(s))):(a=n.app?n.app:"android"===process.platform?"xdg-open":r.join(t,"xdg-open"),s.length>0&&(c=c.concat(s)),n.wait||(l.stdio="ignore",l.detached=!0)),c.push(e),"darwin"===process.platform&&s.length>0&&(c.push("--args"),c=c.concat(s));const u=o.spawn(a,c,l);return n.wait?new Promise((e,t)=>{u.once("error",t),u.once("close",n=>{n>0?t(new Error("Exited with code "+n)):e(u)})}):(u.unref(),Promise.resolve(u))})}).call(this,"/")},function(e,t,n){"use strict";const r=n(133),o=n(22),{URL_OF_REPO:i,URL_OF_FORK:a,URL_OF_ISSUES:s,URL_OF_PRODUCT_HUNT_PAGE:c,URL_OF_REDDIT_PAGE:l}=n(22),{iterables_unslotted:u,get_item_at_coordinates:h,get_item_in_slot:p}=n(13),{create:f}=n(131),{create:d}=n(102),{CHARACTER_CLASSES:m}=n(9),{render_item:g,render_character_sheet:_,render_full_inventory:y,render_adventure:v,render_account_info:b}=n(99),{rich_text_to_ansi:w}=n(93),{stylize_string:E}=n(17),{render_header:x}=n(91),{prettify_json_for_debug:T}=n(63);e.exports={start_loop:function(e,t,n){return e.xPromiseTry("starting interactive loop",({SEC:e,logger:h})=>(h.trace("all options:",T(t)),x(t),d({DEBUG:!1,gen_next_step:function*(){const e={count:0,mode:"main",sub:{main:{last_displayed_adventure_uuid:(()=>{const{last_adventure:e}=n.get_latest_state();return e&&e.uuid})()},inventory:{},character:{},meta:{}}};let f;function d(){const t=[],r=n.get_latest_state(),{last_adventure:i}=r;if(i&&e.sub.main.last_displayed_adventure_uuid!==i.uuid){const{good_click_count:n}=r;let o=`Episode #${n}:\n`;const a=v(i);o+=w(a),e.sub.main.last_adventure=r.last_adventure,t.push({type:"progress",duration_ms:1e3,msg_main:"Exploring...",msgg_acknowledge:()=>"Exploring... Encountered something!\n"}),t.push({type:"simple_message",msg_main:o}),e.sub.main.last_displayed_adventure_uuid=i.uuid}else t.push({type:"simple_message",msg_main:function(e){return w(o.get_recap(e))}(r)});let a=function(e){const t=o.get_tip(e);return t&&w(t)}(r);return a&&t.push({type:"simple_message",msg_main:a}),t.push({msg_main:"What do you want to do?",callback:t=>{e.mode=t},choices:[{msg_cta:"Play!",value:"play",msgg_as_user:()=>"Let’s go adventuring!",callback:()=>{n.play()}},{msg_cta:"Manage Inventory (equip, sell…)",value:"inventory",msgg_as_user:()=>"Let’s sort out my stuff.",msgg_acknowledge:()=>"Sure."},{msg_cta:"Manage Character (rename, change class…)",value:"character",msgg_as_user:()=>"Let’s see how I’m doing!"},{msg_cta:"Manage other stuff…",value:"meta",msgg_as_user:()=>"Let’s see how I’m doing!"}]}),t}function x(){const t=[],r=[],o=n.get_latest_state();if(e.sub.inventory.selected){const i=e.sub.inventory.selected,a=n.get_item(i),s=w(g(a)),c=n.appraise_item(i);t.push({type:"simple_message",msg_main:"You inspect the "+s+" in your backpack."});const l=a.slot,u=p(o.inventory,l);u?t.push({type:"simple_message",msg_main:`You compare it to your currently equipped ${l}: `+w(g(u))}):t.push({type:"simple_message",msg_main:`You currently have no item equipped for this category (${l}).`}),r.push({msg_cta:"Equip it.",value:"equip",msgg_as_user:()=>"I want to equip it.",msgg_acknowledge:()=>"Done!",callback:()=>{n.equip_item(i),e.sub.inventory={}}}),r.push({msg_cta:`Sell it for ${c} coins.`,value:"sell",msgg_as_user:()=>`Deal for ${c} coins.`,msgg_acknowledge:()=>`Here are you ${c} coins. Pleased to do business with you!`,callback:()=>{n.sell_item(i),e.sub.inventory={}}}),r.push({msg_cta:"Go back to inventory.",key_hint:{name:"x"},value:"exit",msgg_as_user:()=>"I’m done with it.",msgg_acknowledge:()=>"OK. Here is your inventory:",callback:()=>{e.sub.inventory={}}})}else{const n=y(o.inventory,o.wallet);t.push({type:"simple_message",msg_main:"Here is your full inventory:\n"+w(n)}),Array.from(u(o.inventory)).forEach((t,n)=>{if(!t)return;const o=w(g(t,{display_quality:!0,display_values:!1}));r.push({msg_cta:"Select "+o,value:t.uuid,key_hint:{name:String.fromCharCode(97+n)},msgg_as_user:()=>"I inspect "+o,callback:t=>{e.sub.inventory.selected=t}})}),r.push({msg_cta:"Go back to adventuring.",key_hint:{name:"x"},value:"x",msgg_as_user:()=>"Let’s do something else.",callback:()=>{e.sub.inventory={},e.mode="main"}})}return t.push({msg_main:"What do you want to do?",choices:r}),t}function T(){const t=[],r=n.get_latest_state();let o="TODO char step";const i=[];if(e.sub.character.changeClass)o="Choose your path wisely:",m.forEach(t=>{"novice"!==t&&i.push({msg_cta:`Switch class to ${t}`,value:t,msgg_as_user:()=>`I want to follow the path of the ${t}!`,msgg_acknowledge:e=>`You’ll make an amazing ${t}.`,callback:t=>{n.change_avatar_class(t),e.sub.character={}}})});else{if(e.sub.character.rename)return[{type:"ask_for_string",msg_main:"What’s your name?",msgg_as_user:e=>`My name is "${e}".`,msgg_acknowledge:e=>`You are now known as ${e}!`,callback:t=>{n.rename_avatar(t),e.sub.character={}}}];{const n=_(r.avatar);t.push({type:"simple_message",msg_main:"Here is your character sheet:\n\n"+w(n)}),o="What do you want to do?",i.push({msg_cta:"Change class",value:"c",msgg_as_user:()=>"I want to follow the path of…",callback:()=>{e.sub.character.changeClass=!0}},{msg_cta:"Rename hero",value:"r",msgg_as_user:()=>"Let’s fix my name…",callback:()=>{e.sub.character.rename=!0}},{msg_cta:"Go back to adventuring.",key_hint:{name:"x"},value:"x",msgg_as_user:()=>"Let’s do something else.",callback:()=>{e.sub.character={},e.mode="main"}})}}return t.push({msg_main:o,choices:i}),t}function k(){const o=[],u=n.get_latest_state();if(e.sub.meta.reseting)o.push({msg_main:"Reset your game and start over, are you really really sure?",choices:[{msg_cta:"Really reset your savegame, loose all your progression and start over 💀",value:"reset",msgg_as_user:()=>"Definitely.",msgg_acknowledge:()=>"So be it...",callback:()=>{n.reset_all(),e.sub.meta={}}},{msg_cta:"Don’t reset and go back to game.",value:"hold",msgg_as_user:()=>"Hold on, I changed my mind!",msgg_acknowledge:()=>"A wise choice. The world needs you, hero!",callback:()=>{e.sub.meta={}}}]});else{o.push({type:"simple_message",msg_main:w(b(u.meta,{"game version":t.version,"Your savegame path":t.config.path}))});let n="What do you want to do?";const h=[],p="https://www.online-adventur.es/the-npm-rpg.html",f="https://www.npmjs.com/package/the-npm-rpg";h.push({msg_cta:"Visit game official website",value:p,msgg_as_user:()=>"Let’s have a look…"},{msg_cta:`💰 Reward the game author with a ${E.bgRed(E.white(" npm "))} star ★`,value:f,msgg_as_user:()=>"You’re awesome…"},{msg_cta:`💰 Reward the game author with a ${E.bgWhite(E.black(" GitHub "))} star ★`,value:i,msgg_as_user:()=>"You’re awesome…"},{msg_cta:"Reward the game author with a reddit like 👍",value:l,msgg_as_user:()=>"You’re awesome…"},{msg_cta:`💰 Reward the game author with a ${E.bgRed(E.white(" Product Hunt "))} upvote ⇧`,value:c,msgg_as_user:()=>"You’re awesome…"},{msg_cta:"Fork on GitHub 🐙 😹",value:a,msgg_as_user:()=>"I’d like to contribute!"},{msg_cta:"Report a bug 🐞",value:s,msgg_as_user:()=>"There is this annoying bug…"},{msg_cta:"Reset your savegame 💀",value:"reset",msgg_as_user:()=>"I want to start over…",msgg_acknowledge:e=>"You can't be serious?",callback:()=>{e.sub.meta.reseting=!0}},{msg_cta:"Go back to adventuring.",key_hint:{name:"x"},value:"x",msgg_as_user:()=>"Let’s do something else.",msgg_acknowledge:e=>"Yay, for loot and glory!",callback:()=>{e.sub.character={},e.mode="main"}}),o.push({msg_main:n,choices:h,msgg_acknowledge:e=>"Now opening "+e,callback:e=>{r(e)}})}return o}e.count++,f=yield{type:"simple_message",msg_main:`Note: Press ${E.inverse(" Ctrl+C ")} anytime to ${E.red("quit")}, your game is auto-saved.`},h.trace({chat_state:e});let O=0;for(;;){switch(e.mode){case"main":e.count++,f=yield*d();break;case"inventory":e.count++,f=yield*x();break;case"character":e.count++,f=yield*T();break;case"meta":e.count++,f=yield*k();break;default:console.error(`Unknown mode: "${e.mode}"`),process.exit(1)}if(e.count%10==0){const e=Date.now();if(e-O<1e3)throw new Error("Loop detected in chat interface");O=e}}}(),ui:f({DEBUG:!1})}).start().then(()=>console.log("Bye!"))))}}},function(e,t,n){"use strict";const r=e.exports,o="[",i="]",a="",s=";",c="Apple_Terminal"===process.env.TERM_PROGRAM;r.cursorTo=((e,t)=>{if("number"!=typeof e)throw new TypeError("The `x` argument is required");return"number"!=typeof t?o+(e+1)+"G":o+(t+1)+";"+(e+1)+"H"}),r.cursorMove=((e,t)=>{if("number"!=typeof e)throw new TypeError("The `x` argument is required");let n="";return e<0?n+=o+-e+"D":e>0&&(n+=o+e+"C"),t<0?n+=o+-t+"A":t>0&&(n+=o+t+"B"),n}),r.cursorUp=(e=>o+("number"==typeof e?e:1)+"A"),r.cursorDown=(e=>o+("number"==typeof e?e:1)+"B"),r.cursorForward=(e=>o+("number"==typeof e?e:1)+"C"),r.cursorBackward=(e=>o+("number"==typeof e?e:1)+"D"),r.cursorLeft="[G",r.cursorSavePosition=o+(c?"7":"s"),r.cursorRestorePosition=o+(c?"8":"u"),r.cursorGetPosition="[6n",r.cursorNextLine="[E",r.cursorPrevLine="[F",r.cursorHide="[?25l",r.cursorShow="[?25h",r.eraseLines=(e=>{let t="";for(let n=0;n<e;n++)t+=r.eraseLine+(n<e-1?r.cursorUp():"");return e&&(t+=r.cursorLeft),t}),r.eraseEndLine="[K",r.eraseStartLine="[1K",r.eraseLine="[2K",r.eraseDown="[J",r.eraseUp="[1J",r.eraseScreen="[2J",r.scrollUp="[S",r.scrollDown="[T",r.clearScreen="c",r.beep=a,r.link=((e,t)=>[i,"8",s,s,t,a,e,i,"8",s,s,a].join("")),r.image=((e,t)=>{let n=i+"1337;File=inline=1";return(t=t||{}).width&&(n+=`;width=${t.width}`),t.height&&(n+=`;height=${t.height}`),!1===t.preserveAspectRatio&&(n+=";preserveAspectRatio=0"),n+":"+e.toString("base64")+a}),r.iTerm={},r.iTerm.setCwd=(e=>i+"50;CurrentDir="+(e||process.cwd())+a)},function(e,t,n){"use strict";const r=["stdin","stdout","stderr"];e.exports=(e=>{if(!e)return null;if(e.stdio&&(e=>r.some(t=>Boolean(e[t])))(e))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${r.map(e=>`\`${e}\``).join(", ")}`);if("string"==typeof e.stdio)return e.stdio;const t=e.stdio||[];if(!Array.isArray(t))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof t}\``);const n=[],o=Math.max(t.length,r.length);for(let i=0;i<o;i++){let o=null;void 0!==t[i]?o=t[i]:void 0!==e[r[i]]&&(o=e[r[i]]),n[i]=o}return n})},function(e,t,n){"use strict";let r;try{if("function"!=typeof(r=process.binding("uv")).errname)throw new TypeError("uv.errname is not a function")}catch(e){console.error("execa/lib/errname: unable to establish process.binding('uv')",e),r=null}function o(e,t){if(e)return e.errname(t);if(!(t<0))throw new Error("err >= 0");return`Unknown system error ${t}`}e.exports=(e=>o(r,e)),e.exports.__test__=o},function(e,t){e.exports=require("events")},function(e,t){e.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"],"win32"!==process.platform&&e.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT"),"linux"===process.platform&&e.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")},function(e,t,n){"use strict";const r=n(89).PassThrough;e.exports=(e=>{const t=(e=Object.assign({},e)).array;let n=e.encoding;const o="buffer"===n;let i=!1;t?i=!(n||o):n=n||"utf8",o&&(n=null);let a=0;const s=[],c=new r({objectMode:i});return n&&c.setEncoding(n),c.on("data",e=>{s.push(e),i?a=s.length:a+=e.length}),c.getBufferedValue=(()=>t?s:o?Buffer.concat(s,a):s.join("")),c.getBufferedLength=(()=>a),c})},function(e,t,n){"use strict";const r=n(140);function o(e,t){if(!e)return Promise.reject(new Error("Expected a stream"));const n=(t=Object.assign({maxBuffer:1/0},t)).maxBuffer;let o,i;const a=new Promise((a,s)=>{const c=e=>{e&&(e.bufferedData=o.getBufferedValue()),s(e)};o=r(t),e.once("error",c),e.pipe(o),o.on("data",()=>{o.getBufferedLength()>n&&s(new Error("maxBuffer exceeded"))}),o.once("error",c),o.on("end",a),i=(()=>{e.unpipe&&e.unpipe(o)})});return a.then(i,i),a.then(()=>o.getBufferedValue())}e.exports=o,e.exports.buffer=((e,t)=>o(e,Object.assign({},t,{encoding:"buffer"}))),e.exports.array=((e,t)=>o(e,Object.assign({},t,{array:!0})))},function(e,t,n){"use strict";var r=e.exports=function(e){return null!==e&&"object"==typeof e&&"function"==typeof e.pipe};r.writable=function(e){return r(e)&&!1!==e.writable&&"function"==typeof e._write&&"object"==typeof e._writableState},r.readable=function(e){return r(e)&&!1!==e.readable&&"function"==typeof e._read&&"object"==typeof e._readableState},r.duplex=function(e){return r.writable(e)&&r.readable(e)},r.transform=function(e){return r.duplex(e)&&"function"==typeof e._transform&&"object"==typeof e._transformState}},function(e,t,n){"use strict";e.exports=(e=>{const t=(e=e||{}).env||process.env;return"win32"!==(e.platform||process.platform)?"PATH":Object.keys(t).find(e=>"PATH"===e.toUpperCase())||"Path"})},function(e,t,n){"use strict";const r=n(11),o=n(143);e.exports=(e=>{let t;e=Object.assign({cwd:process.cwd(),path:process.env[o()]},e);let n=r.resolve(e.cwd);const i=[];for(;t!==n;)i.push(r.join(n,"node_modules/.bin")),t=n,n=r.resolve(n,"..");return i.push(r.dirname(process.execPath)),i.concat(e.path).join(r.delimiter)}),e.exports.env=(t=>{t=Object.assign({env:process.env},t);const n=Object.assign({},t.env),r=o({env:n});return t.path=n[r],n[r]=e.exports(t),n})},function(e,t,n){"use strict";e.exports=function(e){var t="string"==typeof e?"\n":"\n".charCodeAt(),n="string"==typeof e?"\r":"\r".charCodeAt();return e[e.length-1]===t&&(e=e.slice(0,e.length-1)),e[e.length-1]===n&&(e=e.slice(0,e.length-1)),e}},function(e,t,n){"use strict";var r="win32"===process.platform,o=n(59),i=0===process.version.indexOf("v0.10.");function a(e,t){var n;return(n=new Error(t+" "+e+" ENOENT")).code=n.errno="ENOENT",n.syscall=t+" "+e,n}function s(e,t){return r&&1===e&&!t.file?a(t.original,"spawn"):null}e.exports.hookChildProcess=function(e,t){var n;r&&(n=e.emit,e.emit=function(r,o){var i;return"exit"===r&&(i=s(o,t))?n.call(e,"error",i):n.apply(e,arguments)})},e.exports.verifyENOENT=s,e.exports.verifyENOENTSync=function(e,t){return r&&1===e&&!t.file?a(t.original,"spawnSync"):i&&-1===e&&(t.file=r?t.file:o(t.original),!t.file)?a(t.original,"spawnSync"):null},e.exports.notFoundError=a},function(e,t,n){"use strict";e.exports=/^#!.*/},function(e,t,n){"use strict";var r=n(147);e.exports=function(e){var t=e.match(r);if(!t)return null;var n=t[0].replace(/#! ?/,"").split(" "),o=n[0].split("/").pop(),i=n[1];return"env"===o?i:o+(i?" "+i:"")}},function(e,t,n){"use strict";var r=n(10),o=n(58),i=n(148),a=new o({max:50,maxAge:3e4});e.exports=function(e){var t,n,o;if(a.has(e))return a.get(e);t=new Buffer(150);try{n=r.openSync(e,"r"),r.readSync(n,t,0,150,0),r.closeSync(n)}catch(e){}return o=i(t.toString()),a.set(e,o),o}},function(e,t,n){"use strict";var r=n(57);e.exports=function(e){return/^[a-z0-9_-]+$/i.test(e)?e:r(e,!0)}},function(e,t,n){"use strict";var r;e.exports="win32"===process.platform&&0===(r=process.version.substr(1).split(".").map(function(e){return parseInt(e,10)}))[0]&&r[1]<12},function(e,t){function n(e){var t=this;if(t instanceof n||(t=new n),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach(function(e){t.push(e)});else if(arguments.length>0)for(var r=0,o=arguments.length;r<o;r++)t.push(arguments[r]);return t}function r(e,t){e.tail=new i(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function o(e,t){e.head=new i(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function i(e,t,n,r){if(!(this instanceof i))return new i(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}e.exports=n,n.Node=i,n.create=n,n.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null},n.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},n.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},n.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)r(this,arguments[e]);return this.length},n.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)o(this,arguments[e]);return this.length},n.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},n.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},n.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;null!==n;r++)e.call(t,n.value,r,this),n=n.next},n.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;null!==n;r--)e.call(t,n.value,r,this),n=n.prev},n.prototype.get=function(e){for(var t=0,n=this.head;null!==n&&t<e;t++)n=n.next;if(t===e&&null!==n)return n.value},n.prototype.getReverse=function(e){for(var t=0,n=this.tail;null!==n&&t<e;t++)n=n.prev;if(t===e&&null!==n)return n.value},n.prototype.map=function(e,t){t=t||this;for(var r=new n,o=this.head;null!==o;)r.push(e.call(t,o.value,this)),o=o.next;return r},n.prototype.mapReverse=function(e,t){t=t||this;for(var r=new n,o=this.tail;null!==o;)r.push(e.call(t,o.value,this)),o=o.prev;return r},n.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var o=0;null!==r;o++)n=e(n,r.value,o),r=r.next;return n},n.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var o=this.length-1;null!==r;o--)n=e(n,r.value,o),r=r.prev;return n},n.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;null!==n;t++)e[t]=n.value,n=n.next;return e},n.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;null!==n;t++)e[t]=n.value,n=n.prev;return e},n.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var o=0,i=this.head;null!==i&&o<e;o++)i=i.next;for(;null!==i&&o<t;o++,i=i.next)r.push(i.value);return r},n.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var o=this.length,i=this.tail;null!==i&&o>t;o--)i=i.prev;for(;null!==i&&o>e;o--,i=i.prev)r.push(i.value);return r},n.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this}},function(e,t){var n=Object.prototype.hasOwnProperty;function r(e){if(!(this instanceof r))throw new TypeError("Constructor PseudoMap requires 'new'");if(this.clear(),e)if(e instanceof r||"function"==typeof Map&&e instanceof Map)e.forEach(function(e,t){this.set(t,e)},this);else{if(!Array.isArray(e))throw new TypeError("invalid argument");e.forEach(function(e){this.set(e[0],e[1])},this)}}function o(e,t){return e===t||e!=e&&t!=t}function i(e,t){for(var r=0,i="_"+t,a=i;n.call(e,a);a=i+r++)if(o(e[a].key,t))return e[a]}e.exports=r,r.prototype.forEach=function(e,t){t=t||this,Object.keys(this._data).forEach(function(n){"size"!==n&&e.call(t,this._data[n].value,this._data[n].key)},this)},r.prototype.has=function(e){return!!i(this._data,e)},r.prototype.get=function(e){var t=i(this._data,e);return t&&t.value},r.prototype.set=function(e,t){!function(e,t,r){for(var i=0,a="_"+t,s=a;n.call(e,s);s=a+i++)if(o(e[s].key,t))return void(e[s].value=r);e.size++,e[s]=new function(e,t,n){this.key=e,this.value=t,this._index=n}(t,r,s)}(this._data,e,t)},r.prototype.delete=function(e){var t=i(this._data,e);t&&(delete this._data[t._index],this._data.size--)},r.prototype.clear=function(){var e=Object.create(null);e.size=0,Object.defineProperty(this,"_data",{value:e,enumerable:!1,configurable:!0,writable:!1})},Object.defineProperty(r.prototype,"size",{get:function(){return this._data.size},set:function(e){},enumerable:!0,configurable:!0}),r.prototype.values=r.prototype.keys=r.prototype.entries=function(){throw new Error("iterators are not implemented in this version")}},function(e,t,n){"pseudomap"===process.env.npm_package_name&&"test"===process.env.npm_lifecycle_script&&(process.env.TEST_PSEUDOMAP="true"),"function"!=typeof Map||process.env.TEST_PSEUDOMAP?e.exports=n(153):e.exports=Map},function(e,t,n){e.exports=o,o.sync=function(e,t){return i(r.statSync(e),t)};var r=n(10);function o(e,t,n){r.stat(e,function(e,r){n(e,!e&&i(r,t))})}function i(e,t){return e.isFile()&&function(e,t){var n=e.mode,r=e.uid,o=e.gid,i=void 0!==t.uid?t.uid:process.getuid&&process.getuid(),a=void 0!==t.gid?t.gid:process.getgid&&process.getgid(),s=parseInt("100",8),c=parseInt("010",8),l=parseInt("001",8);return n&l||n&c&&o===a||n&s&&r===i||n&(s|c)&&0===i}(e,t)}},function(e,t,n){e.exports=i,i.sync=function(e,t){return o(r.statSync(e),e,t)};var r=n(10);function o(e,t,n){return!(!e.isSymbolicLink()&&!e.isFile())&&function(e,t){var n=void 0!==t.pathExt?t.pathExt:process.env.PATHEXT;if(!n)return!0;if(-1!==(n=n.split(";")).indexOf(""))return!0;for(var r=0;r<n.length;r++){var o=n[r].toLowerCase();if(o&&e.substr(-o.length).toLowerCase()===o)return!0}return!1}(t,n)}function i(e,t,n){r.stat(e,function(r,i){n(r,!r&&o(i,e,t))})}},function(e,t,n){var r;n(10);function o(e,t,n){if("function"==typeof t&&(n=t,t={}),!n){if("function"!=typeof Promise)throw new TypeError("callback not provided");return new Promise(function(n,r){o(e,t||{},function(e,t){e?r(e):n(t)})})}r(e,t||{},function(e,r){e&&("EACCES"===e.code||t&&t.ignoreErrors)&&(e=null,r=!1),n(e,r)})}r="win32"===process.platform||global.TESTING_WINDOWS?n(156):n(155),e.exports=o,o.sync=function(e,t){try{return r.sync(e,t||{})}catch(e){if(t&&t.ignoreErrors||"EACCES"===e.code)return!1;throw e}}},function(e,t,n){e.exports=l,l.sync=function(e,t){for(var n=c(e,t=t||{}),r=n.env,i=n.ext,l=n.extExe,u=[],h=0,p=r.length;h<p;h++){var f=r[h];'"'===f.charAt(0)&&'"'===f.slice(-1)&&(f=f.slice(1,-1));var d=o.join(f,e);!f&&/^\.[\\\/]/.test(e)&&(d=e.slice(0,2)+d);for(var m=0,g=i.length;m<g;m++){var _=d+i[m];try{if(a.sync(_,{pathExt:l})){if(!t.all)return _;u.push(_)}}catch(e){}}}if(t.all&&u.length)return u;if(t.nothrow)return null;throw s(e)};var r="win32"===process.platform||"cygwin"===process.env.OSTYPE||"msys"===process.env.OSTYPE,o=n(11),i=r?";":":",a=n(157);function s(e){var t=new Error("not found: "+e);return t.code="ENOENT",t}function c(e,t){var n=t.colon||i,o=t.path||process.env.PATH||"",a=[""];o=o.split(n);var s="";return r&&(o.unshift(process.cwd()),a=(s=t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM").split(n),-1!==e.indexOf(".")&&""!==a[0]&&a.unshift("")),(e.match(/\//)||r&&e.match(/\\/))&&(o=[""]),{env:o,ext:a,extExe:s}}function l(e,t,n){"function"==typeof t&&(n=t,t={});var r=c(e,t),i=r.env,l=r.ext,u=r.extExe,h=[];!function r(c,p){if(c===p)return t.all&&h.length?n(null,h):n(s(e));var f=i[c];'"'===f.charAt(0)&&'"'===f.slice(-1)&&(f=f.slice(1,-1));var d=o.join(f,e);!f&&/^\.[\\\/]/.test(e)&&(d=e.slice(0,2)+d),function e(o,i){if(o===i)return r(c+1,p);var s=l[o];a(d+s,{pathExt:u},function(r,a){if(!r&&a){if(!t.all)return n(null,d+s);h.push(d+s)}return e(o+1,i)})}(0,l.length)}(0,i.length)}},function(e,t,n){"use strict";var r=n(59),o=n(151),i=n(57),a=n(150),s=n(149),c="win32"===process.platform,l=/\.(?:com|exe)$/i,u=parseInt(process.version.substr(1).split(".")[0],10)>=6||4===parseInt(process.version.substr(1).split(".")[0],10)&&parseInt(process.version.substr(1).split(".")[1],10)>=8;e.exports=function(e,t,n){var h;return t&&!Array.isArray(t)&&(n=t,t=null),h={command:e,args:t=t?t.slice(0):[],options:n=n||{},file:void 0,original:e},n.shell?function(e){var t;return u?e:(t=[e.command].concat(e.args).join(" "),c?(e.command="string"==typeof e.options.shell?e.options.shell:process.env.comspec||"cmd.exe",e.args=["/d","/s","/c",'"'+t+'"'],e.options.windowsVerbatimArguments=!0):("string"==typeof e.options.shell?e.command=e.options.shell:"android"===process.platform?e.command="/system/bin/sh":e.command="/bin/sh",e.args=["-c",t]),e)}(h):function(e){var t,n,u;return c?(e.file=r(e.command),e.file=e.file||r(e.command,!0),(t=e.file&&s(e.file))?(e.args.unshift(e.file),e.command=t,n=o||!l.test(r(t)||r(t,!0))):n=o||!l.test(e.file),n&&(u="echo"!==e.command,e.command=a(e.command),e.args=e.args.map(function(e){return i(e,u)}),e.args=["/d","/s","/c",'"'+e.command+(e.args.length?" "+e.args.join(" "):"")+'"'],e.command=process.env.comspec||"cmd.exe",e.options.windowsVerbatimArguments=!0),e):e}(h)}},function(e,t,n){"use strict";var r=n(29),o=n(159),i=n(146),a=r.spawnSync;function s(e,t,n){var a,s;return a=o(e,t,n),s=r.spawn(a.command,a.args,a.options),i.hookChildProcess(s,a),s}e.exports=s,e.exports.spawn=s,e.exports.sync=function(e,t,r){var s,c;if(!a)try{a=n(!function(){var e=new Error('Cannot find module "spawn-sync"');throw e.code="MODULE_NOT_FOUND",e}())}catch(e){throw new Error("In order to use spawnSync on node 0.10 or older, you must install spawn-sync:\n\n  npm install spawn-sync --save")}return s=o(e,t,r),(c=a(s.command,s.args,s.options)).error=c.error||i.verifyENOENTSync(c.status,s),c},e.exports._parse=o,e.exports._enoent=i},function(e,t,n){"use strict";const r=n(29),o=n(16),i=n(160),a=n(145),s=n(144),c=n(142),l=n(141),u=n(56),h=n(28),p=n(137),f=n(136),d=1e7;function m(e,t,n){let r;return n&&n.env&&!1!==n.extendEnv&&(n.env=Object.assign({},process.env,n.env)),n&&!0===n.__winShell?(delete n.__winShell,r={command:e,args:t,options:n,file:e,original:e}):r=i._parse(e,t,n),(n=Object.assign({maxBuffer:d,stripEof:!0,preferLocal:!0,localDir:r.options.cwd||process.cwd(),encoding:"utf8",reject:!0,cleanup:!0},r.options)).stdio=f(n),n.preferLocal&&(n.env=s.env(Object.assign({},n,{cwd:n.localDir}))),{cmd:r.command,args:r.args,opts:n,parsed:r}}function g(e,t){return t&&e.stripEof&&(t=a(t)),t}function _(e,t,n){let r="/bin/sh",o=["-c",t];return n=Object.assign({},n),"win32"===process.platform&&(n.__winShell=!0,r=process.env.comspec||"cmd.exe",o=["/s","/c",`"${t}"`],n.windowsVerbatimArguments=!0),n.shell&&(r=n.shell,delete n.shell),e(r,o,n)}function y(e,t,n,r){if(!e[t])return null;let o;return(o=n?l(e[t],{encoding:n,maxBuffer:r}):l.buffer(e[t],{maxBuffer:r})).catch(e=>{throw e.stream=t,e.message=`${t} ${e.message}`,e})}e.exports=((e,t,n)=>{let o=e;Array.isArray(t)&&t.length>0&&(o+=" "+t.join(" "));const a=m(e,t,n),s=a.opts.encoding,l=a.opts.maxBuffer;let f,d;try{f=r.spawn(a.cmd,a.args,a.opts)}catch(e){return Promise.reject(e)}a.opts.cleanup&&(d=h(()=>{f.kill()}));let _=null,v=!1;const b=()=>{_&&(clearTimeout(_),_=null)};a.opts.timeout>0&&(_=setTimeout(()=>{_=null,v=!0,f.kill(a.opts.killSignal)},a.opts.timeout));const w=new Promise(e=>{f.on("exit",(t,n)=>{b(),e({code:t,signal:n})}),f.on("error",t=>{b(),e({err:t})}),f.stdin&&f.stdin.on("error",t=>{b(),e({err:t})})});const E=u(Promise.all([w,y(f,"stdout",s,l),y(f,"stderr",s,l)]).then(e=>{const t=e[0],n=e[1],r=e[2];let i=t.err;const s=t.code,c=t.signal;if(d&&d(),i||0!==s||null!==c){if(!i){let e="";Array.isArray(a.opts.stdio)?("inherit"!==a.opts.stdio[2]&&(e+=e.length>0?r:`\n${r}`),"inherit"!==a.opts.stdio[1]&&(e+=`\n${n}`)):"inherit"!==a.opts.stdio&&(e=`\n${r}${n}`),(i=new Error(`Command failed: ${o}${e}`)).code=s<0?p(s):s}if(i.killed=i.killed||f.killed,i.stdout=n,i.stderr=r,i.failed=!0,i.signal=c||null,i.cmd=o,i.timedOut=v,!a.opts.reject)return i;throw i}return{stdout:g(a.opts,n),stderr:g(a.opts,r),code:0,failed:!1,killed:!1,signal:null,cmd:o,timedOut:!1}}),function(){f.stdout&&f.stdout.destroy(),f.stderr&&f.stderr.destroy()});return i._enoent.hookChildProcess(f,a.parsed),function(e,t){const n=t.input;null!==n&&void 0!==n&&(c(n)?n.pipe(e.stdin):e.stdin.end(n))}(f,a.opts),f.then=E.then.bind(E),f.catch=E.catch.bind(E),f}),e.exports.stdout=function(){return e.exports.apply(null,arguments).then(e=>e.stdout)},e.exports.stderr=function(){return e.exports.apply(null,arguments).then(e=>e.stderr)},e.exports.shell=((t,n)=>_(e.exports,t,n)),e.exports.sync=((e,t,n)=>{const o=m(e,t,n);if(c(o.opts.input))throw new TypeError("The `input` option cannot be a stream in sync mode");const i=r.spawnSync(o.cmd,o.args,o.opts);if(i.error||0!==i.status)throw i.error||new Error(""===i.stderr?i.stdout:i.stderr);return i.stdout=g(o.opts,i.stdout),i.stderr=g(o.opts,i.stderr),i}),e.exports.shellSync=((t,n)=>_(e.exports.sync,t,n)),e.exports.spawn=o.deprecate(e.exports,"execa.spawn() is deprecated. Use execa() instead.")},function(e,t,n){"use strict";const r=n(30);function o(e,t){if(!e)return e;const n=(t=t||{}).align||"center";if("left"===n)return e;const o=t.split||"\n",s=t.pad||" ",c="right"!==n?i:a;let l,u=!1;Array.isArray(e)||(u=!0,e=String(e).split(o));let h=0;return e=e.map(function(e){return e=String(e),l=r(e),h=Math.max(l,h),{str:e,width:l}}).map(function(e){return new Array(c(h,e.width)+1).join(s)+e.str}),u?e.join(o):e}function i(e,t){return Math.floor((e-t)/2)}function a(e,t){return e-t}o.left=function(e){return o(e,{align:"left"})},o.center=function(e){return o(e,{align:"center"})},o.right=function(e){return o(e,{align:"right"})},e.exports=o},function(e,t,n){"use strict";e.exports=function(e){if(0===(e=arguments.length>1?Array.from(arguments).map(e=>e.trim()).filter(e=>e.length).join("-"):e.trim()).length)return"";if(1===e.length)return e.toLowerCase();if(/^[a-z0-9]+$/.test(e))return e;return e!==e.toLowerCase()&&(e=function(e){let t=!1,n=!1,r=!1;for(let o=0;o<e.length;o++){const i=e[o];t&&/[a-zA-Z]/.test(i)&&i.toUpperCase()===i?(e=e.substr(0,o)+"-"+e.substr(o),t=!1,r=n,n=!0,o++):n&&r&&/[a-zA-Z]/.test(i)&&i.toLowerCase()===i?(e=e.substr(0,o-1)+"-"+e.substr(o-1),r=n,n=!1,t=!0):(t=i.toLowerCase()===i,r=n,n=i.toUpperCase()===i)}return e}(e)),e.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,(e,t)=>t.toUpperCase())}},function(e){e.exports={single:{topLeft:"┌",topRight:"┐",bottomRight:"┘",bottomLeft:"└",vertical:"│",horizontal:"─"},double:{topLeft:"╔",topRight:"╗",bottomRight:"╝",bottomLeft:"╚",vertical:"║",horizontal:"═"},round:{topLeft:"╭",topRight:"╮",bottomRight:"╯",bottomLeft:"╰",vertical:"│",horizontal:"─"},"single-double":{topLeft:"╓",topRight:"╖",bottomRight:"╜",bottomLeft:"╙",vertical:"║",horizontal:"─"},"double-single":{topLeft:"╒",topRight:"╕",bottomRight:"╛",bottomLeft:"╘",vertical:"│",horizontal:"═"},classic:{topLeft:"+",topRight:"+",bottomRight:"+",bottomLeft:"+",vertical:"|",horizontal:"-"}}},function(e,t,n){"use strict";e.exports=n(164)},function(e,t,n){"use strict";const r=n(30);e.exports=(e=>Math.max.apply(null,e.split("\n").map(e=>r(e))))},function(e,t,n){"use strict";e.exports=(e=>!Number.isNaN(e)&&(e>=4352&&(e<=4447||9001===e||9002===e||11904<=e&&e<=12871&&12351!==e||12880<=e&&e<=19903||19968<=e&&e<=42182||43360<=e&&e<=43388||44032<=e&&e<=55203||63744<=e&&e<=64255||65040<=e&&e<=65049||65072<=e&&e<=65131||65281<=e&&e<=65376||65504<=e&&e<=65510||110592<=e&&e<=110593||127488<=e&&e<=127569||131072<=e&&e<=262141)))},function(e,t,n){"use strict";e.exports=(()=>{const e=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:[a-zA-Z\\d]*(?:;[a-zA-Z\\d]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PRZcf-ntqry=><~]))"].join("|");return new RegExp(e,"g")})},function(e){e.exports={author:"Rafael de Oleza <rafeca@gmail.com> (https://github.com/rafeca)",name:"prettyjson",description:"Package for formatting JSON data in a coloured YAML-style, perfect for CLI output",version:"1.2.1",homepage:"http://rafeca.com/prettyjson",keywords:["json","cli","formatting","colors"],repository:{type:"git",url:"https://github.com/rafeca/prettyjson.git"},bugs:{url:"https://github.com/rafeca/prettyjson/issues"},main:"./lib/prettyjson",license:"MIT",scripts:{test:"npm run jshint && mocha --reporter spec",testwin:"node ./node_modules/mocha/bin/mocha --reporter spec",jshint:"jshint lib/*.js test/*.js",coverage:"istanbul cover _mocha --report lcovonly -- -R spec",coveralls:"npm run coverage && cat ./coverage/lcov.info | coveralls && rm -rf ./coverage",changelog:"git log $(git describe --tags --abbrev=0)..HEAD --pretty='* %s' --first-parent"},bin:{prettyjson:"./bin/prettyjson"},dependencies:{colors:"^1.1.2",minimist:"^1.2.0"},devDependencies:{coveralls:"^2.11.15",istanbul:"^0.4.5",jshint:"^2.9.4",mocha:"^3.1.2","mocha-lcov-reporter":"^1.2.0",should:"^11.1.1"}}},function(e,t,n){"use strict";t.indent=function(e){return new Array(e+1).join(" ")},t.getMaxIndexLength=function(e){var t=0;return Object.getOwnPropertyNames(e).forEach(function(n){void 0!==e[n]&&(t=Math.max(t,n.length))}),t}},function(e,t,n){var r,o=n(14);e.exports=(r=["underline","inverse","grey","yellow","red","green","blue","white","cyan","magenta"],function(e,t,n){return" "===e?e:o[r[Math.round(Math.random()*(r.length-1))]](e)})},function(e,t,n){var r,o=n(14);e.exports=(r=["red","yellow","green","blue","magenta"],function(e,t,n){return" "===e?e:o[r[t++%r.length]](e)})},function(e,t,n){var r=n(14);e.exports=function(e,t,n){return t%2==0?e:r.inverse(e)}},function(e,t,n){var r=n(14);e.exports=function(e,t,n){if(" "===e)return e;switch(t%3){case 0:return r.red(e);case 1:return r.white(e);case 2:return r.blue(e)}}},function(e,t){e.exports=function(e,t){e=e||"   he is here   ";var n={up:["̍","̎","̄","̅","̿","̑","̆","̐","͒","͗","͑","̇","̈","̊","͂","̓","̈","͊","͋","͌","̃","̂","̌","͐","̀","́","̋","̏","̒","̓","̔","̽","̉","ͣ","ͤ","ͥ","ͦ","ͧ","ͨ","ͩ","ͪ","ͫ","ͬ","ͭ","ͮ","ͯ","̾","͛","͆","̚"],down:["̖","̗","̘","̙","̜","̝","̞","̟","̠","̤","̥","̦","̩","̪","̫","̬","̭","̮","̯","̰","̱","̲","̳","̹","̺","̻","̼","ͅ","͇","͈","͉","͍","͎","͓","͔","͕","͖","͙","͚","̣"],mid:["̕","̛","̀","́","͘","̡","̢","̧","̨","̴","̵","̶","͜","͝","͞","͟","͠","͢","̸","̷","͡"," ҉"]},r=[].concat(n.up,n.down,n.mid);function o(e){return Math.floor(Math.random()*e)}function i(e){var t=!1;return r.filter(function(n){t=n===e}),t}return function(e,t){var r,a,s="";for(a in(t=t||{}).up=void 0===t.up||t.up,t.mid=void 0===t.mid||t.mid,t.down=void 0===t.down||t.down,t.size=void 0!==t.size?t.size:"maxi",e=e.split(""))if(!i(a)){switch(s+=e[a],r={up:0,down:0,mid:0},t.size){case"mini":r.up=o(8),r.mid=o(2),r.down=o(8);break;case"maxi":r.up=o(16)+3,r.mid=o(4)+1,r.down=o(64)+3;break;default:r.up=o(8)+1,r.mid=o(6)/2,r.down=o(8)+1}var c=["up","mid","down"];for(var l in c)for(var u=c[l],h=0;h<=r[u];h++)t[u]&&(s+=n[u][o(n[u].length)])}return s}(e,t)}},function(e,t){e.exports=function(e,t){var n="",r={a:["@","Ą","Ⱥ","Ʌ","Δ","Λ","Д"],b:["ß","Ɓ","Ƀ","ɮ","β","฿"],c:["©","Ȼ","Ͼ"],d:["Ð","Ɗ","Ԁ","ԁ","Ԃ","ԃ"],e:["Ë","ĕ","Ǝ","ɘ","Σ","ξ","Ҽ","੬"],f:["Ӻ"],g:["ɢ"],h:["Ħ","ƕ","Ң","Һ","Ӈ","Ԋ"],i:["༏"],j:["Ĵ"],k:["ĸ","Ҡ","Ӄ","Ԟ"],l:["Ĺ"],m:["ʍ","Ӎ","ӎ","Ԡ","ԡ","൩"],n:["Ñ","ŋ","Ɲ","Ͷ","Π","Ҋ"],o:["Ø","õ","ø","Ǿ","ʘ","Ѻ","ם","۝","๏"],p:["Ƿ","Ҏ"],q:["্"],r:["®","Ʀ","Ȑ","Ɍ","ʀ","Я"],s:["§","Ϟ","ϟ","Ϩ"],t:["Ł","Ŧ","ͳ"],u:["Ʊ","Ս"],v:["ט"],w:["Ш","Ѡ","Ѽ","൰"],x:["Ҳ","Ӿ","Ӽ","ӽ"],y:["¥","Ұ","Ӌ"],z:["Ƶ","ɀ"]};return(e=(e=e||"Run the trap, drop the bass").split("")).forEach(function(e){e=e.toLowerCase();var t=r[e]||[" "],o=Math.floor(Math.random()*t.length);n+=void 0!==r[e]?r[e][o]:e}),n}},function(e,t,n){"use strict";e.exports=function(e,t){var n=(t=t||process.argv).indexOf("--"),r=/^-{1,2}/.test(e)?"":"--",o=t.indexOf(r+e);return-1!==o&&(-1===n||o<n)}},function(e,t,n){"use strict";var r=n(18),o=n(177),i=process.env,a=void 0;function s(e){return function(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}(function(e){if(!1===a)return 0;if(o("color=16m")||o("color=full")||o("color=truecolor"))return 3;if(o("color=256"))return 2;if(e&&!e.isTTY&&!0!==a)return 0;var t=a?1:0;if("win32"===process.platform){var n=r.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in i)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(function(e){return e in i})||"codeship"===i.CI_NAME?1:t;if("TEAMCITY_VERSION"in i)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(i.TEAMCITY_VERSION)?1:0;if("TERM_PROGRAM"in i){var s=parseInt((i.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(i.TERM_PROGRAM){case"iTerm.app":return s>=3?3:2;case"Hyper":return 3;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(i.TERM)?2:/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(i.TERM)?1:"COLORTERM"in i?1:(i.TERM,t)}(e))}o("no-color")||o("no-colors")||o("color=false")?a=!1:(o("color")||o("colors")||o("color=true")||o("color=always"))&&(a=!0),"FORCE_COLOR"in i&&(a=0===i.FORCE_COLOR.length||0!==parseInt(i.FORCE_COLOR,10)),e.exports={supportsColor:s,stdout:s(process.stdout),stderr:s(process.stderr)}},function(e,t){var n={};e.exports=n;var r={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],grey:[90,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],blackBG:[40,49],redBG:[41,49],greenBG:[42,49],yellowBG:[43,49],blueBG:[44,49],magentaBG:[45,49],cyanBG:[46,49],whiteBG:[47,49]};Object.keys(r).forEach(function(e){var t=r[e],o=n[e]=[];o.open="["+t[0]+"m",o.close="["+t[1]+"m"})},function(e,t,n){var r=n(14);e.exports=r},function(e,t,n){"use strict";const r=/(?:\\(u[a-f\d]{4}|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,o=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,i=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,a=/\\(u[a-f\d]{4}|x[a-f\d]{2}|.)|([^\\])/gi,s=new Map([["n","\n"],["r","\r"],["t","\t"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e",""],["a",""]]);function c(e){return"u"===e[0]&&5===e.length||"x"===e[0]&&3===e.length?String.fromCharCode(parseInt(e.slice(1),16)):s.get(e)||e}function l(e,t){const n=[],r=t.trim().split(/\s*,\s*/g);let o;for(const t of r)if(isNaN(t)){if(!(o=t.match(i)))throw new Error(`Invalid Chalk template style argument: ${t} (in style '${e}')`);n.push(o[2].replace(a,(e,t,n)=>t?c(t):n))}else n.push(Number(t));return n}function u(e,t){const n={};for(const e of t)for(const t of e.styles)n[t[0]]=e.inverse?null:t.slice(1);let r=e;for(const e of Object.keys(n))if(Array.isArray(n[e])){if(!(e in r))throw new Error(`Unknown Chalk style: ${e}`);r=n[e].length>0?r[e].apply(r,n[e]):r[e]}return r}e.exports=((e,t)=>{const n=[],i=[];let a=[];if(t.replace(r,(t,r,s,h,p,f)=>{if(r)a.push(c(r));else if(h){const t=a.join("");a=[],i.push(0===n.length?t:u(e,n)(t)),n.push({inverse:s,styles:function(e){o.lastIndex=0;const t=[];let n;for(;null!==(n=o.exec(e));){const e=n[1];if(n[2]){const r=l(e,n[2]);t.push([e].concat(r))}else t.push([e])}return t}(h)})}else if(p){if(0===n.length)throw new Error("Found extraneous } in Chalk template literal");i.push(u(e,n)(a.join(""))),a=[],n.pop()}else a.push(f)}),i.push(a.join("")),n.length>0){const e=`Chalk template literal is missing ${n.length} closing bracket${1===n.length?"":"s"} (\`}\`)`;throw new Error(e)}return i.join("")})},function(e,t,n){"use strict";e.exports=((e,t)=>{t=t||process.argv;const n=e.startsWith("-")?"":1===e.length?"-":"--",r=t.indexOf(n+e),o=t.indexOf("--");return-1!==r&&(-1===o||r<o)})},function(e,t,n){"use strict";const r=n(18),o=n(182),i=process.env;let a;function s(e){return function(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}(function(e){if(!1===a)return 0;if(o("color=16m")||o("color=full")||o("color=truecolor"))return 3;if(o("color=256"))return 2;if(e&&!e.isTTY&&!0!==a)return 0;const t=a?1:0;if("win32"===process.platform){const e=r.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in i)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(e=>e in i)||"codeship"===i.CI_NAME?1:t;if("TEAMCITY_VERSION"in i)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(i.TEAMCITY_VERSION)?1:0;if("truecolor"===i.COLORTERM)return 3;if("TERM_PROGRAM"in i){const e=parseInt((i.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(i.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(i.TERM)?2:/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(i.TERM)?1:"COLORTERM"in i?1:(i.TERM,t)}(e))}o("no-color")||o("no-colors")||o("color=false")?a=!1:(o("color")||o("colors")||o("color=true")||o("color=always"))&&(a=!0),"FORCE_COLOR"in i&&(a=0===i.FORCE_COLOR.length||0!==parseInt(i.FORCE_COLOR,10)),e.exports={supportsColor:s,stdout:s(process.stdout),stderr:s(process.stderr)}},function(e,t,n){var r=n(64);function o(e){var t=function(){for(var e={},t=Object.keys(r),n=t.length,o=0;o<n;o++)e[t[o]]={distance:-1,parent:null};return e}(),n=[e];for(t[e].distance=0;n.length;)for(var o=n.pop(),i=Object.keys(r[o]),a=i.length,s=0;s<a;s++){var c=i[s],l=t[c];-1===l.distance&&(l.distance=t[o].distance+1,l.parent=o,n.unshift(c))}return t}function i(e,t){return function(n){return t(e(n))}}function a(e,t){for(var n=[t[e].parent,e],o=r[t[e].parent][e],a=t[e].parent;t[a].parent;)n.unshift(t[a].parent),o=i(r[t[a].parent][a],o),a=t[a].parent;return o.conversion=n,o}e.exports=function(e){for(var t=o(e),n={},r=Object.keys(t),i=r.length,s=0;s<i;s++){var c=r[s];null!==t[c].parent&&(n[c]=a(c,t))}return n}},function(e,t,n){"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(e,t,n){var r=n(64),o=n(184),i={};Object.keys(r).forEach(function(e){i[e]={},Object.defineProperty(i[e],"channels",{value:r[e].channels}),Object.defineProperty(i[e],"labels",{value:r[e].labels});var t=o(e);Object.keys(t).forEach(function(n){var r=t[n];i[e][n]=function(e){var t=function(t){if(void 0===t||null===t)return t;arguments.length>1&&(t=Array.prototype.slice.call(arguments));var n=e(t);if("object"==typeof n)for(var r=n.length,o=0;o<r;o++)n[o]=Math.round(n[o]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}(r),i[e][n].raw=function(e){var t=function(t){return void 0===t||null===t?t:(arguments.length>1&&(t=Array.prototype.slice.call(arguments)),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}(r)})}),e.exports=i},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";(function(e){const t=n(186),r=(e,n)=>(function(){return`[${e.apply(t,arguments)+n}m`}),o=(e,n)=>(function(){const r=e.apply(t,arguments);return`[${38+n};5;${r}m`}),i=(e,n)=>(function(){const r=e.apply(t,arguments);return`[${38+n};2;${r[0]};${r[1]};${r[2]}m`});Object.defineProperty(e,"exports",{enumerable:!0,get:function(){const e=new Map,n={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};n.color.grey=n.color.gray;for(const t of Object.keys(n)){const r=n[t];for(const t of Object.keys(r)){const o=r[t];n[t]={open:`[${o[0]}m`,close:`[${o[1]}m`},r[t]=n[t],e.set(o[0],o[1])}Object.defineProperty(n,t,{value:r,enumerable:!1}),Object.defineProperty(n,"codes",{value:e,enumerable:!1})}const a=e=>e,s=(e,t,n)=>[e,t,n];n.color.close="[39m",n.bgColor.close="[49m",n.color.ansi={ansi:r(a,0)},n.color.ansi256={ansi256:o(a,0)},n.color.ansi16m={rgb:i(s,0)},n.bgColor.ansi={ansi:r(a,10)},n.bgColor.ansi256={ansi256:o(a,10)},n.bgColor.ansi16m={rgb:i(s,10)};for(let e of Object.keys(t)){if("object"!=typeof t[e])continue;const a=t[e];"ansi16"===e&&(e="ansi"),"ansi16"in a&&(n.color.ansi[e]=r(a.ansi16,0),n.bgColor.ansi[e]=r(a.ansi16,10)),"ansi256"in a&&(n.color.ansi256[e]=o(a.ansi256,0),n.bgColor.ansi256[e]=o(a.ansi256,10)),"rgb"in a&&(n.color.ansi16m[e]=i(a.rgb,0),n.bgColor.ansi16m[e]=i(a.rgb,10))}return n}})}).call(this,n(187)(e))},function(e,t,n){"use strict";var r=/[|\\{}()[\]^$+*?.]/g;e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(r,"\\$&")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0).__importDefault(n(5)),o=n(39);function i(e,t){console.error(r.default.red(r.default.dim(`🔥  ${t}: "`)+e[t]+r.default.dim('"')))}t.displayError=function(e={}){console.error(r.default.red(`🔥🔥🔥🔥🔥🔥🔥  ${r.default.bold(e.name||"Error")} 🔥🔥🔥🔥🔥🔥🔥`));const t=new Set;t.add("name"),e.message&&(i(e,"message"),t.add("message")),e.logicalStack&&(i(e,"logicalStack"),t.add("logicalStack")),o.COMMON_ERROR_FIELDS.forEach(n=>{n in e&&!t.has(n)&&i(e,n)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(65);t.createChildLogger=function({parent:e,name:t=e._.name,level:n=e.getLevel(),details:o={},outputFn:i=e._.outputFn}){return o=Object.assign({},e._.details,o),r.createLogger({name:t,level:n,details:o,outputFn:i})}},function(e,t,n){"use strict";function r(e=new Date){return`${e.getUTCFullYear()}${("0"+(e.getUTCMonth()+1)).slice(-2)}${("0"+e.getUTCDate()).slice(-2)}_${("0"+e.getUTCHours()).slice(-2)}h${("0"+e.getUTCMinutes()).slice(-2)}:${("0"+e.getUTCSeconds()).slice(-2)}.${("00"+e.getUTCMilliseconds()).slice(-3)}`}Object.defineProperty(t,"__esModule",{value:!0}),t.get_UTC_timestamp_ms=function(){return+Date.now()},t.get_human_readable_UTC_timestamp_minutes=function(e=new Date){return`${e.getUTCFullYear()}${("0"+(e.getUTCMonth()+1)).slice(-2)}${("0"+e.getUTCDate()).slice(-2)}_${("0"+e.getUTCHours()).slice(-2)}h${("0"+e.getUTCMinutes()).slice(-2)}`},t.get_human_readable_UTC_timestamp_ms_v1=r,t.get_human_readable_UTC_timestamp_ms=function(e=new Date){return"ts1_"+r(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);r.__exportStar(n(32),t),r.__exportStar(n(66),t),r.__exportStar(n(65),t),r.__exportStar(n(191),t)},function(e,t,n){"use strict";const{LIB:r,INTERNAL_PROP:o,createCatcher:i,isSEC:a,setRoot:s,getContext:c,isomorphic:l}=n(83),{createLogger:u}=n(67);const h={create:function(e={}){e.context=e.context||{},e.context.logger=e.context.logger||u({name:"the-npm-rpg",level:"warn"});const t=l.create(e);return Object.assign({},t,{listenToUncaughtErrors:function(){if(!t[o].LS.module)throw new Error(`${r}›listenToUncaughtErrors() must only be called in the context of an app! (who are you to mess with globals, lib author??)`);const e=t.child({operation:"(uncaught error)"});process.on("uncaughtException",i({decorators:e[o].errDecorators,onError:e[o].onError,debugId:"node/uncaughtException"}))},listenToUnhandledRejections:function(){if(!t[o].LS.module)throw new Error(`${r}›listenToUncaughtErrors() must only be called in the context of an app! (who are you to mess with globals, lib author??)`);const e=t.child({operation:"(unhandled promise rejection)"});process.on("unhandledRejection",i({decorators:e[o].errDecorators,onError:e[o].onError,debugId:"node/unhandledRejection"}))}})}};e.exports={LIB:r,INTERNAL_PROP:o,createCatcher:i,isSEC:a,setRoot:s,getContext:c,isomorphic:l,node:h}},function(e,t,n){"use strict";n(87);const r=n(194),{compatibleLoggerToConsole:o}=n(81),{migrate_to_latest:i,reseed:a}=n(22),{createLogger:s}=n(67),{DEFAULT_SEED:c}=n(12),{prettify_json_for_debug:l}=n(63),u=s({name:"the-npm-rpg",level:"warn"});const h=r.node.create({module:"the-npm-rpg",onError:function(e){u.fatal("error!",{err:e})},context:{logger:u}});r.setRoot(h),h.listenToUncaughtErrors(),h.listenToUnhandledRejections(),u.trace("Soft Execution Context initialized."),e.exports={SEC:h}},function(e,t,n){"use strict";n.r(t);var r=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===o}(e)}(e)};var o="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function i(e,t){return!1!==t.clone&&t.isMergeableObject(e)?s((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function a(e,t,n){return e.concat(t).map(function(e){return i(e,n)})}function s(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||a,n.isMergeableObject=n.isMergeableObject||r;var o=Array.isArray(t);return o===Array.isArray(e)?o?n.arrayMerge(e,t,n):function(e,t,n){var r={};return n.isMergeableObject(e)&&Object.keys(e).forEach(function(t){r[t]=i(e[t],n)}),Object.keys(t).forEach(function(o){n.isMergeableObject(t[o])&&e[o]?r[o]=s(e[o],t[o],n):r[o]=i(t[o],n)}),r}(e,t,n):i(t,n)}s.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(e,n){return s(e,n,t)},{})};var c=s;t.default=c},function(e,t,n){(e.exports=function(){this.events={}}).prototype={on:function(e,t){return(e=this.events[e]=this.events[e]||[]).push(t),function(){e.splice(e.indexOf(t)>>>0,1)}},emit:function(e){var t=this.events[e];if(t&&t[0]){var n=t.slice.call(arguments,1);t.slice().map(function(e){e.apply(this,n)})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(197),i=n(196).default,a=n(13),s=r.__importStar(n(42)),c=n(69),l=n(35);function u(e,t){return t}t.create_game_instance=function({SEC:e,get_latest_state:t,persist_state:n,client_state:r}){return e.xTry("creating tbrpg instance",({SEC:e,logger:h})=>{e.xTry("auto migrating",({logger:r})=>{let o=t();const i=!o||0===Object.keys(o).length;o=c.migrate_to_latest(e,o),i?r.verbose("Clean savegame created from scratch:",{state:o}):r.trace("migrated state:",{state:o}),n(o)}),r=r||{mode:l.ActionCategory.base};const p=new o;return{play(){let e=t();e=s.play(e),n(e),p.emit("state_change")},equip_item(e){let r=t();r=s.equip_item(r,e),n(r),p.emit("state_change")},sell_item(e){let r=t();r=s.sell_item(r,e),n(r),p.emit("state_change")},rename_avatar(e){let r=t();r=s.rename_avatar(r,e),n(r),p.emit("state_change")},change_avatar_class(e){let r=t();r=s.change_avatar_class(r,e),n(r),p.emit("state_change")},reset_all(){let e=s.create();e=s.reseed(e),n(e),h.verbose("Savegame reseted:",{state:e}),p.emit("state_change")},execute_serialized_action(e){let r=t();r=s.execute(r,e),n(r),p.emit("state_change")},get_item(e){let n=t();return a.get_item(n.inventory,e)},appraise_item(e){let n=t();return s.appraise_item(n,e)},find_element(e){let n=t();return s.find_element(n,e)},get_actions_for_element(e){let n=t();return s.get_actions_for_element(n,e)},get_latest_state:t,subscribe:e=>p.on("state_change",e),set_client_state(e){const t=e(r);r=Object.assign({},i(r,t,{arrayMerge:u})),p.emit("state_change")},get_client_state:()=>r}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(33),o=n(19);function i(e){const t={$v:r.SCHEMA_VERSION,$type:e,$classes:[],$content:"",$sub:{},$hints:{}},n={addClass:function(...e){return t.$classes.push(...e),n},pushText:function(e){return t.$content+=e,n},pushStrong:function(e,t){return c(i(o.NodeType.strong).pushText(e).done(),t)},pushEmphasized:function(e,t){return c(i(o.NodeType.em).pushText(e).done(),t)},pushRawNode:s,pushNode:c,pushLineBreak:function(){return t.$content+="{{br}}",n},pushHorizontalRule:function(){return t.$content+="{{hr}}",n},done:function(){return t}};let a=0;function s(e,r){return t.$sub[r]=e,n}function c(e,n){return n=n||"s"+ ++a,t.$content+=`{{${n}}}`,s(e,n)}return n}t.NodeType=o.NodeType,t.create=i,t.section=function(){return i(o.NodeType.section)},t.heading=function(){return i(o.NodeType.heading)},t.span=function(){return i(o.NodeType.span)},t.ordered_list=function(){return i(o.NodeType.ol)},t.unordered_list=function(){return i(o.NodeType.ul)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r="\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";function o(e){return r.slice(0,e)}const i={on_node_enter:()=>"",on_concatenate_str:({state:e,str:t})=>e+t,on_concatenate_sub_node:({state:e,sub_state:t})=>e+t,on_type:({state:e,$type:t,$node:{$classes:n,$sub:r},depth:i})=>(function(e,t,n,r,i){if("br"===e)return"<br/>\n";if("hr"===e)return"\n<hr/>\n";let a=!1;switch(e){case"strong":case"em":case"span":a=!0}let s="";return a||(s+="\n"+o(i)),s+=`<${e}`,n.length&&(s+=` class="${n.join(" ")}"`),s+=">"+t+(r?"\n"+o(i):"")+`</${e}>`})(t,e,n,Object.keys(r).length,i)};t.callbacks=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r={on_node_enter:()=>"",on_concatenate_str:({state:e,str:t})=>e+t,on_concatenate_sub_node:({state:e,sub_state:t,$id:n,$parent_node:r})=>"ul"===r.$type?e+"\n - "+t:"ol"===r.$type?e+`\n ${(" "+n).slice(-2)}. `+t:e+t,on_type_br:({state:e})=>e+"\n",on_type_hr:({state:e})=>e+"\n------------------------------------------------------------\n"};t.callbacks=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r="                                                                                                ";function o(e){return r.slice(0,2*e)}const i={on_root_enter:()=>{console.log("⟩ [on_root_enter]")},on_root_exit:({state:e})=>(console.log("⟨ [on_root_exit]"),console.log(`  [state="${e}"]`),e),on_node_enter:({$node:e,$id:t,depth:n})=>{console.log(o(n)+`⟩ [on_node_enter] #${t} `+function(e){const{$type:t,$content:n}=e;return`${t}."${n}"`}(e));return console.log(o(n)+'  [state=""] (init)'),""},on_node_exit:({$node:e,$id:t,state:n,depth:r})=>(console.log(o(r)+`⟨ [on_node_exit] #${t}`),console.log(o(r)+`  [state="${n}"]`),n),on_concatenate_str:({str:e,state:t,$node:n,depth:r})=>(console.log(o(r)+`+ [on_concatenate_str] "${e}"`),t+=e,console.log(o(r)+`  [state="${t}"]`),t),on_concatenate_sub_node:({state:e,sub_state:t,depth:n,$id:r,$parent_node:i})=>(console.log(o(n)+`+ [on_concatenate_sub_node] "${t}"`),e+=t,console.log(o(n)+`  [state="${e}"]`),e),on_filter:({$filter:e,$filters:t,state:n,$node:r,depth:i})=>(console.log(o(i)+`  [on_filter] "${e}`),n),on_class_before:({$class:e,state:t,$node:n,depth:r})=>(console.log(o(r)+`  [⟩on_class_before] .${e}`),t),on_class_after:({$class:e,state:t,$node:n,depth:r})=>(console.log(o(r)+`  [⟨on_class_after] .${e}`),t),on_type:({$type:e,state:t,$node:n,depth:r})=>(console.log(o(r)+`  [on_type] "${e}" ${n.$classes}`),t),on_type_br:({state:e})=>"string"==typeof e?e+"{{br}}":e,on_type_hr:({state:e})=>"string"==typeof e?e+"{{hr}}":e};t.callbacks=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(33),o=n(19);t.normalize_node=function(e){const{$v:t=1,$type:n=o.NodeType.span,$classes:i=[],$content:a="",$sub:s={},$hints:c={}}=e;if(t!==r.SCHEMA_VERSION)throw new Error(`${r.LIB}: unknown schema version "${t}"!`);return{$v:t,$type:n,$classes:i,$content:a,$sub:s,$hints:c}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0).__importStar(n(3));t.get_recap=function(e){return 0===e.meaningful_interaction_count?r.section().pushStrong("You are an otherworlder.{{br}}").pushText("Congratulations, adventurer from another world!{{br}}").pushText("You were chosen to enter the unknown realm of ").pushStrong("Jaema").pushText(".{{br}}").pushText("Maybe were you just more courageous, cunning and curious than your peers?{{br}}").pushText("But for now, let’s go on an adventure, for glory ⚔ and loot 📦 💰 !").done():r.section().pushText("You are ").pushNode(r.span().addClass("avatar__name").pushText(e.avatar.name).done(),"name").pushText(", the ").pushNode(r.span().addClass("avatar__class").pushText(e.avatar.klass).done(),"class").pushText(" from another world.{{br}}").pushText("You are adventuring in the mysterious world of ").pushStrong("Jaema").pushText("…{{br}}").pushStrong("For glory ⚔  and loot 📦 💰 !").done()},t.get_tip=function(e){return e.click_count?null:r.section().pushStrong("Tip: ").pushText("Select ").pushStrong("play").pushText(" to start adventuring!").done()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r={adventures:{bad_default:"You clicked too early!\n+{{penalty_s}}s !",fight_won_coins:"\nYou have defeated a {{encounter}} !{{br}}\nYou looted {{coin}} from its corpse.",fight_won_loot:"\nYou have defeated a {{encounter}} !{{br}}\nYou looted a {{item}} from its corpse.",fight_won_any:"\nYou have defeated a {{encounter}}!{{br}}\nYou perfected your {{attr_name}} during the fight: +{{attr}} {{attr_name}}!",fight_lost_any:"\nYou were attacked and nearly killed by a {{encounter}} but you got away just before it was too late.{{br}}\nYou figured out techniques to flee more efficiently: +{{attr}} {{attr_name}}!",fight_lost_shortcoming:"\nYou were attacked by a {{encounter}} and it didn't end well... but you got away just before it was about to kill you.{{br}}\nYou reflect on your lack of {{attr_name}} in the fight and train hard: +{{attr}} {{attr_name}}!",bored_log:"\nYou were so bored, you punched a log for hours!\nYou gained +{{strength}} strength!",caravan:"\nYou were hired to protect a caravan of merchants.\nYou gained {{coin}}!",dying_man:"\nA dying man on the street left you everything he had.\nYou gained {{coin}}!",ate_bacon:"\nYou ate some bacon.\nYou gained +{{level}} level!",ate_zombie:"\nYou ate a zombie.\nYou gained +{{mana}} mana!",refreshing_nap:"\nYou took a nap and feel refreshed.\nYou gained +{{health}} health!",older:"\nYou feel a little older.\nYou gained +{{level}} level!",stare_cup:"\nYou stare really hard at a cup, and it almost moves!\nYou gained +{{mana}} mana!",nuclear_fusion_paper:"\nYou wrote a paper on nuclear fusion.\nYou gained +{{wisdom}} wisdom!",found_green_mushroom:"\nYou found a green mushroom.\nYou gained +{{level}} level!",found_red_mushroom:"\nYou found a red mushroom.\nYou gained +{{health}} health!",found_blue_mushroom:"\nYou found a blue mushroom.\nYou gained +{{mana}} mana!",found_white_mushroom:"\nYou found a white mushroom.\nYou gained +{{strength}} strength!",found_yellow_mushroom:"\nYou found a yellow mushroom.\nYou gained +{{agility}} agility!",found_orange_mushroom:"\nYou found an orange mushroom.\nYou gained +{{charisma}} charisma!",found_black_mushroom:"\nYou found a black mushroom.\nYou gained +{{wisdom}} wisdom!",found_rainbow_mushroom:"\nYou found a glowing rainbow mushroom.\nYou gained +{{luck}} luck!",found_random_mushroom:"\nYou found a golden mushroom.\nYou gained +{{attr}} {{attr_name}}!",found_vermilion_potion:"\nYou found a vermilion potion.\nCrazy drink, gained +{{attr}} {{attr_name}}!",found_silver_potion:"\nYou found a silver potion.\nSweet drink, gained +{{attr}} {{attr_name}}!",found_swirling_potion:"\nYou found a swirling potion.\nStrange drink, gained +{{attr}} {{attr_name}}!",meet_old_wizard:"\nYou meet a mysterious old wizard…\nBefore giving you the quest, he tells you his loooong story: You gain +{{wisdom}} wisdom!",good_necromancer:"\nYou meet a child weeping over his dead hamster… Thanks to necromancy, you reanimate it as a hamster-zombie!\nOddly, the child cries even more while running away.{{br}}\nFortunately, you gain +{{agility}} agility while avoiding the stones thrown by the villagers.",talk_to_all_villagers:"\nYou spoke to everyone in the village leaving no quest unanswered!{{br}}\nAlthough your head aches from discussing so much.\n+{{charisma}} charisma having met so many people!",always_keep_potions:'\nBeing a seasoned adventurer, you kept a health potion "just in case":\nWell done, your health is top-notch!',lost:"\nWith all those quests, you forgot where you had to go…{{br}}\nBut circling around the map is good for your health: +{{health}} health!",grinding:"\nFor lack of a better thing to do, you grind for hours and hours…\nSo what? It's an RPG, what did you expect?\nBut it pays off: +{{level}} level!",fate_sword:'\nTo thank you for saving his wife and his children, a farmer offers you "Destiny",\nthe heirloom sword passed down in his family for generations.{{br}}\n30 minutes later, the merchant buys it off you for only {{coin}}… some heirloom!',so_many_potions:"\nThe fight against the final boss was hard, very hard…\nMost importantly, +{{strength}} strength for managing to control a pressing urge during the encounter after drinking 25 health potions !",rematch:"\nYou got beaten by a goblin!\nIn shame, you roam around the country, accepting quest after quest to train yourself before facing him again.{{br}}\nAlas, he also trained and beat you again!\nWell, the +{{level}} level is still useful…",useless:"\nArriving at the village, the mayor announces that the neighborhood is no longer dangerous.\nThe sorceress fell in love and no longer curses people.\nThe haunted cemetery was a pet cemetery, villagers are happy to have their companions back.\nThe giant is helping the farmers with their harvest.{{br}}\nYou feel useless and reflect on your place in the world. +{{wisdom}} wisdom!",escort:"\nYou are escorting an important NPC.\nFrustratingly, if you walk, he's faster than you.\nHowever, if you run, you're faster than him!\nBy strafing and running in circles, you manage\nto stay close to him.{{br}}\n+{{health}} health thanks to your efforts!",rare_goods_seller:"\nYou come across an old man with eccentric apparel.\nScore! It's a rare item seller!\nHe gives you a good price for a {{item}}.",progress_loop:"\nYou would need better gear to level up.\nBut you'd need to level up to get better gear.\nCruel dilemma!{{br}}\nFortunately, you find a {{item}} at the bottom of a well!",idiot_bandits:"\nYour name is whispered across the land since you slayed the dragon and defeated the sorceress.\nBandits ambush you, aiming for your wealth. For their folly!\nThey realize their mistake one moment\nbefore your fireball incinerates them.\nFortunately, gold doesn't burn: +{{coin}}!",princess:'\n"You won\'t take back the princess!" yells the fearsome black mage,\nas you reach his throne room.\nYou reassure him: you are only here for loot.{{br}}\nHe lets you help yourself to {{coin}}\nand even enchants your weapon too!',bad_village:"\nYou reach a new village. There is no weapon shop.\nNo potion shop either! And no quests at the inn!!\nWhat a useless village. At your call, lightning and meteors wipe out this place.\nA good opportunity to practice your magic: +{{mana}} mana.",mana_mana:'\n"Mah na mah na" "To to to do do"{{br}}\n+{{mana}} mana!',treasure_in_pots:"\nYou enter a pottery shop and destroy every jug, vase and item in the store.\nYou collect +{{coin}} in coin, precious stones and other treasures found!",chicken_slayer:"\nYou enter a village and see a chicken roaming in a garden peacefully. \nYou slay the chicken mercilessly.\nThe entire cohort of guards for the town come after you and you are forced to slay them too.\nAfter hours of fighting you gain +{{strength}} strength!",sentients_killing:"\nYou introduce yourself to the captain of the guard. Your mission: kill 10 kobolds.\nAfter a brief hesitation on the ethics of the extermination of thinking creatures, you accept: you need loot and XP too badly.\nYou gain {{coin}} and +{{attr}} {{attr_name}}.\n\t\t",keep_watch:"\nYou are hired to keep the watch. Boring, but lives are depending on you!\nThe night pass without any trouble.\nYou gain {{coin}} as agreed. Good job!\n\t\t",critters:"\nYou hunt critters to get XP and improve your skills.\nAfter one hour of farming, +{{attr}} {{attr_name}}, not bad!\n\t\t",class_grimoire:"\nYou find a tome about your class.\nIt's filled with interesting stuff!\nIt's worth reading: +{{attr}} {{attr_name}}!\n\t\t",village_farmwork:"\nThe villagers hire you to do their errands.\nYou gather firewood, draw water from the well, chase pests.\nYou gain {{coin}} as agreed, +{{strength}} strength as a bonus and hopefully gain the people's trust for better quests in the future!\n\t\t",village_lost_kid:'\nA villager run after you "Please find my kid lost in the forest! I heard about goblins and fear the worst!".\nYou arrive just as the goblins were about to put the kid in the cauldron.\nYou deal justice to these pests, drink their soup and bring back the kid.\nThe parent is delighted and you looted a {{item}} in the goblin camp.\n\t\t',village_lost_father:"\nA child from the village runs after you \"Please, find my father who isn't back from the forest!\".\nYou track the father to a clearing, where he took refuge in a tree, surrounded by wolves.\nYou sow death amongst the pack using your adventurer's arts and bring back the father home.\nYou practiced your {{attr_name}} during this encounter: +{{attr}} {{attr_name}}!\nAnd the child now wants to be an adventurer...\n\t\t",village_nice_daughter:"\nThe daughter of one of the villager you helped wants to have a tea with her saviour.\nShe's very nice. You learn from her how to have a polite conversation: + {{charisma}} charisma.\n\t\t",capital_castle:"\nYou arrive at the Royal Castle, one of the famous landmark of the capital.\nIt's incredible: huge, strong yet delicate, with high towers and ornaments everywhere...\nYou ponder about civilizations: +{{wisdom}} wisdom.\n\t\t",capital_royal_road:"\nYou visit the Royal Road, one of the famous landmark of the capital.\nIt's a wide road filled with stalls with goods from the best gatherers and the best crafters.\nYou barter for a much needed equipment enhancement.\n\t\t",capital_royal_amusement_park:"\nYou visit the Royal Amusement Park, one of the famous landmark of the capital.\nYou try all the magical attractions and have a second round of your favorite ones.\nThis is a curious but effective training: +{{attr}} {{attr_name}}!\n\t\t",famous_stone_ruby:"\nIn a lost city, you looted the famous lost striped candy-pink ruby!\nYour fame increases: +{{charisma}} charisma, +{{token}}.\n\t\t",famous_stone_diamond:"\nIn a meteor crater, you looted an incredible rare black diamond!\nYour wisdom increases: +{{wisdom}} wisdom, +{{token}}.\n\t\t",famous_stone_sapphire:"\nIn a secret cave below the ocean, you looted the forgotten sapphire of Atlantis!\nYour mana increases: +{{mana}} mana, +{{token}}.\n\t\t",famous_stone_emerald:"\nOn a lost altar deep in the jungle, you looted the mysterious emerald of Shapeshifting!\nYour agility increases: +{{agility}} agility, +{{token}}.\n\t\t",class_master_primary_attr_1:'\nYour class master is playing wise:\n"You need to work on your {{attr_name}}, it\'s the basis of everything! Focus on your strengths, not your weaknesses!"\nShe gives you exercises. You gain +{{attr}} {{attr_name}}.\n\t\t',class_master_primary_attr_2:'\nYour class master is playing wise again:\n"The successful warrior is the average man, with laser-like focus! Concentrate on improving your {{attr_name}}!"\nShe gives you exercises. You gain +{{attr}} {{attr_name}}.\n\t\t',class_master_second_attr:'\nAs usual, your class master is grumpy:\n"What\'s the use of improving only your main attribute? You need to improve your {{attr_name}} too! Focus on your weaknesses, to become stronger!"\nShe gives you exercises. You gain +{{attr}} {{attr_name}}.\n\t\t',wisdom_of_books:"\nYou visit a church for healing, and end up reading their books.\nYou gain +{{attr}} wisdom!\n\t\t",arrow_in_the_knee:"\nA guard tells you stories of when he was an adventurer,\nbefore he took an arrow in the knee.\nYou feel enlightened: +{{attr}} wisdom!\n\t\t",square_eggs:"\nDeep in the jungle, you find the marvelous square eggs of the legendary fatu-liva bird!\nYou cook an omelette, and gain +{{luck}} luck.\n\t\t",colossal_cave:"\nYou discover and explore a colossal cave! Undeads, goblins, balrogs...\nYou emerge victoriously, with loot ({{item}}) and experience (+{{attr}} {{attr_name}})!\n\t\t",huge_tower:"\nYou discover and explore a huge tower. It's filled with mad wizards, cultists and golems.\nYou reach the top and snatch some loot ({{item}}) then exit the tower,\nvictorious and more experienced (+{{attr}} {{attr_name}})!\n\t\t",make_friends:'\nYou learnt necromancy (+{{mana}} mana). With your new skills, you assemble some living corpses from remains dug in the cemetery.{{br}}\nYour mom would be proud, she was always telling you to go and "make" friends!\n\t\t',erika:"\nExploring the Colossal Cave, you meet Erika, a powerful sorceress whose sensitive skin\nled her to live underground.\nShe teaches you a new spell for money: +{{mana}} mana\n\t\t",rachel:"\nBetween two villages, you meet Rachel the washer wench.\nShe competes with you in arm twisting, and win!\nGood exercise, +{{strength}} strength.\n\t\t",wise_wisewood_tree:'\nYou meet the Wise Wisewood Tree:\n"I am the Wise Wisewood Tree and I possess uncanny wisdom".\nIndeed, the talking tree impart you some wisdom: +{{wisdom}}.\n\t\t',lost_mine:"\nYou discover a mysterious lost mine, filled with strange tools\nand glowing with mana crystals. You pick some: +{{token}}\n\t\t",vampire_castle:"\nLost in the Dark Forest at night, you come across a gloomy castle.\nThe owner welcomes you politely, but you spot his teeth fangs. A vampire!\nAfter an intense battle, you earned the castle and its riches!{{br}}\n+{{coin}} and a {{item}}\n\t\t",gehennom:"\nYou enter the dark Cavities of Gehennom. You don't find the Amulet of Yendor,\nbut still ends up with good loot: +{{coin}}, {{item}}...\n\t\t",king_reward:"\nYou did well to help the kingdom.\nKing Gallus welcomes you in the throne room in front of all the court assembled.\nYou are rewarded with weapons and honors: {{item}}, {{token}}...\n"}},o={adventures:{}};t.messages=o,Object.keys(r.adventures).forEach(e=>{o.adventures[e]=r.adventures[e].split("\n").map(e=>e.trim()).filter(e=>!!e).join(" ")})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(205),o=n(70),i=o.AdventureType.story,a=o.AdventureType.fight,s=[{good:!1,type:i,hid:"bad_default",outcome:{}},{good:!0,type:a,hid:"fight_won_coins",outcome:{coin:"small"}},{good:!0,type:a,hid:"fight_won_loot",outcome:{armor_or_weapon:!0}},{good:!0,type:a,hid:"fight_won_any",outcome:{random_attribute:!0}},{good:!0,type:a,hid:"fight_lost_any",outcome:{random_attribute:!0}},{good:!0,type:a,hid:"fight_lost_shortcoming",outcome:{lowest_attribute:!0}},{good:!0,type:i,hid:"bored_log",outcome:{strength:!0}},{good:!0,type:i,hid:"caravan",outcome:{coin:"small"}},{good:!0,type:i,hid:"dying_man",outcome:{coin:"medium"}},{good:!0,type:i,hid:"ate_bacon",outcome:{level:!0}},{good:!0,type:i,hid:"ate_zombie",outcome:{mana:!0}},{good:!0,type:i,hid:"refreshing_nap",outcome:{health:!0}},{good:!0,type:i,hid:"older",outcome:{level:!0}},{good:!0,type:i,hid:"stare_cup",outcome:{mana:!0}},{good:!0,type:i,hid:"nuclear_fusion_paper",outcome:{wisdom:!0}},{good:!0,type:i,hid:"found_green_mushroom",outcome:{level:!0}},{good:!0,type:i,hid:"found_red_mushroom",outcome:{health:!0}},{good:!0,type:i,hid:"found_blue_mushroom",outcome:{mana:!0}},{good:!0,type:i,hid:"found_white_mushroom",outcome:{strength:!0}},{good:!0,type:i,hid:"found_yellow_mushroom",outcome:{agility:!0}},{good:!0,type:i,hid:"found_orange_mushroom",outcome:{charisma:!0}},{good:!0,type:i,hid:"found_black_mushroom",outcome:{wisdom:!0}},{good:!0,type:i,hid:"found_rainbow_mushroom",outcome:{luck:!0}},{good:!0,type:i,hid:"found_random_mushroom",outcome:{random_attribute:!0}},{good:!0,type:i,hid:"found_vermilion_potion",outcome:{class_primary_attribute:!0}},{good:!0,type:i,hid:"found_silver_potion",outcome:{class_secondary_attribute:!0}},{good:!0,type:i,hid:"found_swirling_potion",outcome:{random_attribute:!0}},{good:!0,type:i,hid:"meet_old_wizard",outcome:{wisdom:!0}},{good:!0,type:i,hid:"good_necromancer",outcome:{agility:!0}},{good:!0,type:i,hid:"talk_to_all_villagers",outcome:{charisma:!0}},{good:!0,type:i,hid:"always_keep_potions",outcome:{health:!0}},{good:!0,type:i,hid:"lost",outcome:{health:!0}},{good:!0,type:i,hid:"fate_sword",outcome:{coin:"small"}},{good:!0,type:i,hid:"grinding",outcome:{level:!0}},{good:!0,type:i,hid:"so_many_potions",outcome:{strength:!0}},{good:!0,type:i,hid:"rematch",outcome:{level:!0}},{good:!0,type:i,hid:"useless",outcome:{wisdom:!0}},{good:!0,type:i,hid:"escort",outcome:{health:!0}},{good:!0,type:i,hid:"rare_goods_seller",outcome:{armor_or_weapon:!0}},{good:!0,type:i,hid:"progress_loop",outcome:{armor_or_weapon:!0}},{good:!0,type:i,hid:"idiot_bandits",outcome:{coin:"medium"}},{good:!0,type:i,hid:"princess",outcome:{coin:"medium",armor_or_weapon_improvement:!0}},{good:!0,type:i,hid:"bad_village",outcome:{mana:!0}},{good:!0,type:i,hid:"mana_mana",outcome:{mana:!0}},{good:!0,type:i,hid:"treasure_in_pots",outcome:{coin:"small"}},{good:!0,type:i,hid:"chicken_slayer",outcome:{strength:!0}},{good:!0,type:i,hid:"sentients_killing",outcome:{coin:"small",class_primary_attribute:!0}},{good:!0,type:i,hid:"keep_watch",outcome:{coin:"small"}},{good:!0,type:i,hid:"critters",outcome:{class_secondary_attribute:!0}},{good:!0,type:i,hid:"class_grimoire",outcome:{class_primary_attribute:!0}},{good:!0,type:i,hid:"village_farmwork",outcome:{coin:"small",strength:!0}},{good:!0,type:i,hid:"village_lost_kid",outcome:{armor_or_weapon:!0}},{good:!0,type:i,hid:"village_lost_father",outcome:{class_primary_attribute:!0}},{good:!0,type:i,hid:"village_nice_daughter",outcome:{charisma:!0}},{good:!0,type:i,hid:"capital_castle",outcome:{wisdom:!0}},{good:!0,type:i,hid:"capital_royal_road",outcome:{armor_or_weapon_improvement:!0}},{good:!0,type:i,hid:"capital_royal_amusement_park",outcome:{class_primary_attribute:!0}},{good:!0,type:i,hid:"famous_stone_ruby",outcome:{token:1,charisma:!0}},{good:!0,type:i,hid:"famous_stone_diamond",outcome:{token:1,wisdom:!0}},{good:!0,type:i,hid:"famous_stone_sapphire",outcome:{token:1,mana:!0}},{good:!0,type:i,hid:"famous_stone_emerald",outcome:{token:1,agility:!0}},{good:!0,type:i,hid:"class_master_primary_attr_1",outcome:{class_primary_attribute:!0}},{good:!0,type:i,hid:"class_master_primary_attr_2",outcome:{class_primary_attribute:!0}},{good:!0,type:i,hid:"class_master_second_attr",outcome:{class_secondary_attribute:!0}},{good:!0,type:i,hid:"wisdom_of_books",outcome:{wisdom:!0}},{good:!0,type:i,hid:"arrow_in_the_knee",outcome:{wisdom:!0}},{good:!0,type:i,hid:"square_eggs",outcome:{luck:!0}},{good:!0,type:i,hid:"colossal_cave",outcome:{armor_or_weapon:!0,class_primary_attribute:!0}},{good:!0,type:i,hid:"huge_tower",outcome:{armor_or_weapon:!0,class_primary_attribute:!0}},{good:!0,type:i,hid:"make_friends",outcome:{mana:!0}},{good:!0,type:i,hid:"wise_wisewood_tree",outcome:{wisdom:!0}},{good:!0,type:i,hid:"lost_mine",outcome:{token:1}},{good:!0,type:i,hid:"gehennom",outcome:{coin:"medium",armor_or_weapon:!0}},{good:!0,type:i,hid:"vampire_castle",outcome:{coin:"medium",armor_or_weapon:!0}},{good:!0,type:i,hid:"erika",outcome:{mana:!0}},{good:!0,type:i,hid:"rachel",outcome:{strength:!0}}];t.ENTRIES=s;const c={en:r.messages};t.i18n_messages=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(4),i=n(2),a=n(9),s=r.__importStar(n(8)),c=n(8),l=r.__importStar(n(13)),u=r.__importStar(n(12)),h=n(12),p=n(6),f=n(7),d=n(73),m=n(71),g=n(34),_=["health","mana","strength","agility","charisma","wisdom","luck"],y={[a.CharacterClass.novice]:["health","mana","strength","agility","charisma","wisdom","luck"],[a.CharacterClass.warrior]:["strength"],[a.CharacterClass.barbarian]:["strength"],[a.CharacterClass.paladin]:["strength"],[a.CharacterClass.sculptor]:["agility"],[a.CharacterClass.pirate]:["luck"],[a.CharacterClass.ninja]:["agility"],[a.CharacterClass.rogue]:["agility"],[a.CharacterClass.wizard]:["mana"],[a.CharacterClass.hunter]:["agility"],[a.CharacterClass.druid]:["wisdom","mana"],[a.CharacterClass.priest]:["charisma","mana"]},v={[a.CharacterClass.novice]:["health","mana","strength","agility","charisma","wisdom","luck"],[a.CharacterClass.warrior]:["health"],[a.CharacterClass.barbarian]:["health"],[a.CharacterClass.paladin]:["mana"],[a.CharacterClass.sculptor]:["charisma"],[a.CharacterClass.pirate]:["charisma"],[a.CharacterClass.ninja]:["health"],[a.CharacterClass.rogue]:["luck"],[a.CharacterClass.wizard]:["wisdom"],[a.CharacterClass.hunter]:["strength"],[a.CharacterClass.druid]:["strength"],[a.CharacterClass.priest]:["wisdom"]};function b(e,t,n=1){return Object.assign({},e,{avatar:a.increase_stat(g.get_SEC(),e.avatar,t,n)})}function w(e,t){return Object.assign({},e,{inventory:l.add_item(e.inventory,t)})}t.receive_item=w;const E="adventure_archetype";t.play_good=function(e,t){e=Object.assign({},e,{good_click_count:e.good_click_count+1});const n=h.get_prng(e.prng),r=t?m.get_archetype(t):function(e,t){let n;return h.regenerate_until_not_recently_encountered({id:E,generate:()=>(n=m.pick_random_good_archetype(t)).hid,state:e.prng}),n}(e,n);if(!r)throw new Error(`play_good(): hinted adventure archetype "${t}" could not be found!`);const g=function(e,t,n,r){let{hid:a,good:s,type:c,outcome:l}=t;l.random_attribute&&(l[o.Random.pick(e,_)]=!0),l.lowest_attribute&&(l[_.reduce((e,t)=>n.attributes[e]<n.attributes[t]?e:t,"health")]=!0),l.class_primary_attribute&&(l[o.Random.pick(e,y[n.klass])]=!0),l.class_secondary_attribute&&(l[o.Random.pick(e,v[n.klass])]=!0),l.armor_or_weapon&&(o.Random.bool()(e)?l.armor=!0:l.weapon=!0),l.armor_or_weapon_improvement&&(o.Random.bool()(e)?l.armor_improvement=!0:l.weapon_improvement=!0);const u=n.attributes.level+(l.level?1:0);return{uuid:i.generate_uuid(),hid:a,good:s,encounter:c===m.AdventureType.fight?d.create(e,{level:n.attributes.level}):void 0,gains:{level:l.level?1:0,health:l.health?1:0,mana:l.mana?1:0,strength:l.strength?1:0,agility:l.agility?1:0,charisma:l.charisma?1:0,wisdom:l.wisdom?1:0,luck:l.luck?1:0,coin:m.generate_random_coin_gain(e,l.coin,u),token:l.token?1:0,armor:l.armor?f.create(e):null,weapon:l.weapon?p.create(e):null,armor_improvement:l.armor_improvement,weapon_improvement:l.weapon_improvement}}}(n,r,(e=Object.assign({},e,{prng:h.register_recently_used(e.prng,E,r.hid,7)})).avatar,e.inventory);e=Object.assign({},e,{last_adventure:g});const{gains:x}=g;let T=0;if(x.level&&(T++,e=b(e,a.CharacterAttribute.level)),x.health&&(T++,e=b(e,a.CharacterAttribute.health,x.health)),x.mana&&(T++,e=b(e,a.CharacterAttribute.mana,x.mana)),x.strength&&(T++,e=b(e,a.CharacterAttribute.strength,x.strength)),x.agility&&(T++,e=b(e,a.CharacterAttribute.agility,x.agility)),x.charisma&&(T++,e=b(e,a.CharacterAttribute.charisma,x.charisma)),x.wisdom&&(T++,e=b(e,a.CharacterAttribute.wisdom,x.wisdom)),x.luck&&(T++,e=b(e,a.CharacterAttribute.luck,x.luck)),x.coin&&(T++,e=function(e,t){return Object.assign({},e,{wallet:s.add_amount(e.wallet,c.Currency.coin,t)})}(e,x.coin)),x.token&&(T++,e=function(e,t){return Object.assign({},e,{wallet:s.add_amount(e.wallet,c.Currency.token,t)})}(e,x.token)),x.weapon&&(T++,e=w(e,x.weapon)),x.armor&&(T++,e=w(e,x.armor)),x.weapon_improvement){T++;let t=l.get_item_in_slot(e.inventory,i.InventorySlot.weapon);t&&t.enhancement_level<p.MAX_ENHANCEMENT_LEVEL&&p.enhance(t)}if(x.armor_improvement){T++;const t=l.get_item_in_slot(e.inventory,i.InventorySlot.armor);t&&t.enhancement_level<f.MAX_ENHANCEMENT_LEVEL&&f.enhance(t)}if(!T)throw new Error(`play_good() for hid "${r.hid}" unexpectedly resulted in NO gains!`);return e=Object.assign({},e,{prng:u.update_use_count(e.prng,n,{I_swear_I_really_cant_know_whether_the_rng_was_used:!!t})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1).Enum("level","health","mana","strength","agility","charisma","wisdom","luck","coin","token","weapon","armor","weapon_improvement","armor_improvement");t.GainType=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4),o=n(2),i=n(6),a=n(7);function s(e){}t.create=s,t.generate_random_demo_shop=function(){r.Random.engines.mt19937().autoSeed()};const c=1.8;const l=.8;t.appraise=function(e){switch(e.slot){case o.InventorySlot.armor:return n=e,Math.round(a.get_medium_damage_reduction(n)*c);case o.InventorySlot.weapon:return t=e,Math.round(i.get_medium_damage(t)*l);default:throw new Error(`appraise(): no appraisal scheme for slot "${e.slot}" !`)}var t,n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CHARACTERS={"01f400":{code_point:128e3,char:"🐀",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"rat"}},"01f401":{code_point:128001,char:"🐁",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"mouse"}},"01f402":{code_point:128002,char:"🐂",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"ox"}},"01f403":{code_point:128003,char:"🐃",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"water buffalo"}},"01f404":{code_point:128004,char:"🐄",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"cow"}},"01f405":{code_point:128005,char:"🐅",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"tiger"}},"01f406":{code_point:128006,char:"🐆",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"leopard"}},"01f407":{code_point:128007,char:"🐇",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"rabbit"}},"01f408":{code_point:128008,char:"🐈",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"cat"}},"01f409":{code_point:128009,char:"🐉",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"dragon"}},"01f40a":{code_point:128010,char:"🐊",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"crocodile"}},"01f40b":{code_point:128011,char:"🐋",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"whale"}},"01f40c":{code_point:128012,char:"🐌",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"snail"}},"01f40d":{code_point:128013,char:"🐍",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"snake"}},"01f40e":{code_point:128014,char:"🐎",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"horse"}},"01f40f":{code_point:128015,char:"🐏",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"ram"}},"01f410":{code_point:128016,char:"🐐",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"goat"}},"01f411":{code_point:128017,char:"🐑",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"ewe"}},"01f412":{code_point:128018,char:"🐒",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"monkey"}},"01f413":{code_point:128019,char:"🐓",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"chicken"}},"01f414":{code_point:128020,char:"🐔",taxonomy:["animal","living"],tags:["emoji","face"],properties:{description:"chicken head"}},"01f415":{code_point:128021,char:"🐕",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"dog"}},"01f416":{code_point:128022,char:"🐖",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"pig"}},"01f417":{code_point:128023,char:"🐗",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"boar"}},"01f418":{code_point:128024,char:"🐘",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"elephant"}},"01f419":{code_point:128025,char:"🐙",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"octopus"}},"01f41a":{code_point:128026,char:"🐚",taxonomy:["animal","living"],tags:["emoji","full"],properties:{description:"spiral shell"}},"01f41b":{code_point:128027,char:"🐛",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"caterpillar"}},"01f41c":{code_point:128028,char:"🐜",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"ant"}},"01f41d":{code_point:128029,char:"🐝",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"bee"}},"01f41e":{code_point:128030,char:"🐞",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"lady beetle"}},"01f41f":{code_point:128031,char:"🐟",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"fish"}},"01f420":{code_point:128032,char:"🐠",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"tropical fish"}},"01f421":{code_point:128033,char:"🐡",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"blowfish"}},"01f422":{code_point:128034,char:"🐢",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"turtle"}},"01f423":{code_point:128035,char:"🐣",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"hatching chick"}},"01f424":{code_point:128036,char:"🐤",taxonomy:["animal","living"],tags:["emoji","face"],properties:{description:"baby chick"}},"01f425":{code_point:128037,char:"🐥",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"baby chick"}},"01f426":{code_point:128038,char:"🐦",taxonomy:["animal","living","monster"],tags:["emoji","face"],properties:{description:"pigeon"}},"01f427":{code_point:128039,char:"🐧",taxonomy:["animal","living","monster"],tags:["emoji","face"],properties:{description:"penguin"}},"01f428":{code_point:128040,char:"🐨",taxonomy:["animal","living","monster"],tags:["emoji","face"],properties:{description:"koala"}},"01f429":{code_point:128041,char:"🐩",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"poodle"}},"01f42a":{code_point:128042,char:"🐪",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"dromedary"}},"01f42b":{code_point:128043,char:"🐫",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"camel"}},"01f42c":{code_point:128044,char:"🐬",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"dolphin"}},"01f42d":{code_point:128045,char:"🐭",taxonomy:["animal","living"],tags:["emoji","face"],properties:{description:"mouse"}},"01f42e":{code_point:128046,char:"🐮",taxonomy:["animal","living"],tags:["emoji","face"],properties:{description:"cow"}},"01f42f":{code_point:128047,char:"🐯",taxonomy:["animal","living"],tags:["emoji","face"],properties:{description:"tiger"}},"01f430":{code_point:128048,char:"🐰",taxonomy:["animal","living"],tags:["emoji","face"],properties:{description:"rabbit"}},"01f431":{code_point:128049,char:"🐱",taxonomy:["animal","living"],tags:["emoji","face"],properties:{description:"cat"}},"01f432":{code_point:128050,char:"🐲",taxonomy:["animal","living"],tags:["emoji","face"],properties:{description:"dragon"}},"01f433":{code_point:128051,char:"🐳",taxonomy:["animal","living"],tags:["emoji","full"],properties:{description:"spouting whale"}},"01f434":{code_point:128052,char:"🐴",taxonomy:["animal","living"],tags:["emoji"],properties:{description:"horse"}},"01f435":{code_point:128053,char:"🐵",taxonomy:["animal","living"],tags:["emoji","face"],properties:{description:"monkey"}},"01f436":{code_point:128054,char:"🐶",taxonomy:["animal","living"],tags:["emoji","face"],properties:{description:"dog"}},"01f437":{code_point:128055,char:"🐷",taxonomy:["animal","living"],tags:["emoji","face"],properties:{description:"pig"}},"01f438":{code_point:128056,char:"🐸",taxonomy:["animal","living","monster"],tags:["emoji","face"],properties:{description:"frog"}},"01f439":{code_point:128057,char:"🐹",taxonomy:["animal","living","monster"],tags:["emoji","face"],properties:{description:"hamster"}},"01f43a":{code_point:128058,char:"🐺",taxonomy:["animal","living","monster"],tags:["emoji"],properties:{description:"wolf"}},"01f43b":{code_point:128059,char:"🐻",taxonomy:["animal","living","monster"],tags:["emoji","face"],properties:{description:"bear"}},"01f43c":{code_point:128060,char:"🐼",taxonomy:["animal","living","monster","face"],tags:["emoji","face"],properties:{description:"panda"}},"01f43d":{code_point:128061,char:"🐽",taxonomy:[],tags:["emoji"],properties:{description:"???"}},"01f43e":{code_point:128062,char:"🐾",taxonomy:[],tags:["emoji"],properties:{description:"???"}},"01f43f":{code_point:128063,char:"🐿",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"chipmunk"}},"01f5ff":{code_point:128511,char:"🗿",taxonomy:["monster"],tags:["emoji"],properties:{description:"golem"}},"01f47b":{code_point:128123,char:"👻",taxonomy:["monster"],tags:["emoji"],properties:{description:"ghost"}},"01f54a":{code_point:128330,char:"🕊",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"dove"}},"01f577":{code_point:128375,char:"🕷",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"spider"}},"01f980":{code_point:129408,char:"🦀",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"crab"}},"01f981":{code_point:129409,char:"🦁",taxonomy:["animal","living"],tags:["emoji","face"],properties:{description:"lion"}},"01f982":{code_point:129410,char:"🦂",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"scorpion"}},"01f983":{code_point:129411,char:"🦃",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"turkey"}},"01f984":{code_point:129412,char:"🦄",taxonomy:["animal","living","monster"],tags:["emoji"],properties:{description:"unicorn"}},"01f985":{code_point:129413,char:"🦅",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"eagle"}},"01f986":{code_point:129414,char:"🦆",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"duck"}},"01f987":{code_point:129415,char:"🦇",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"bat"}},"01f988":{code_point:129416,char:"🦈",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"shark"}},"01f989":{code_point:129417,char:"🦉",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"owl"}},"01f98a":{code_point:129418,char:"🦊",taxonomy:["animal","living","monster"],tags:["emoji","face"],properties:{description:"fox"}},"01f98b":{code_point:129419,char:"🦋",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"butterfly"}},"01f98c":{code_point:129420,char:"🦌",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"deer"}},"01f98d":{code_point:129421,char:"🦍",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"gorilla"}},"01f98e":{code_point:129422,char:"🦎",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"lizard"}},"01f98f":{code_point:129423,char:"🦏",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"rhinoceros"}},"01f990":{code_point:129424,char:"🦐",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"shrimp"}},"01f991":{code_point:129425,char:"🦑",taxonomy:["animal","living","monster"],tags:["emoji","full"],properties:{description:"squid"}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(210);t.UNICODE_CHARS=r.CHARACTERS},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(211),o=Object.keys(r.UNICODE_CHARS).map(e=>r.UNICODE_CHARS[e]).filter(e=>e.taxonomy.includes("monster")).map(e=>({name:e.properties.description,emoji:e.char})),i=[].concat(...o,...[{name:"drop bear",emoji:"🐨"},{name:"dahu",emoji:"🐏"}]);t.ENTRIES=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4),o=n(2),i=n(72),a=n(212);const s=.1;function c(e,t={}){const n=t.name?a.ENTRIES.find(e=>e.name===t.name):r.Random.pick(e,a.ENTRIES);if(!n)throw new Error(`OMR Monster create: can't find a monster corresponding to hint "${t.name}"!`);let c=-1;if(t.level){const n=t.level,i=Math.round(Math.max(1,n*s));c=Math.max(1,Math.min(o.MAX_LEVEL,n+r.Random.integer(-i,i)(e)))}else c=r.Random.integer(1,o.MAX_LEVEL)(e);return{name:n.name,level:c,rank:t.rank||function(e){return r.Random.bool(.7)(e)?i.MonsterRank.common:r.Random.bool(2/3)(e)?i.MonsterRank.elite:i.MonsterRank.boss}(e),possible_emoji:t.possible_emoji||n.emoji}}t.create=c,t.generate_random_demo_monster=function(){return c(r.Random.engines.mt19937().autoSeed())};const l={name:"chicken",level:7,rank:i.MonsterRank.elite,possible_emoji:"🐓"};t.DEMO_MONSTER_01=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(36),o=n(74);t.migrate_to_latest=function(e,t={}){const n=e&&e.schema_version||0;let i=o.create();if(0===Object.keys(e).length);else if(n===r.SCHEMA_VERSION)i=e;else{if(n>r.SCHEMA_VERSION)throw new Error(`${r.LIB}: Your data is from a more recent version of this lib. Please update!`);try{console.warn(`${r.LIB}: attempting to migrate schema from v${n} to v${r.SCHEMA_VERSION}:`),i=function(e,t){throw new Error("Unrecognized schema, most likely too old, can't migrate!")}(),console.info(`${r.LIB}: schema migration successful.`)}catch(e){console.error(`${r.LIB}: failed migrating schema, performing full reset !`),i=o.create()}}return i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4),o=n(36);t.generate_random_seed=function(){const e=r.Random.engines.mt19937().autoSeed();return r.Random.integer(-2147483646,2147483647)(e)},t.regenerate_until_not_recently_encountered=function({id:e,generate:t,state:n,max_tries:r=10}){const i=n.recently_encountered_by_id[e]||[];let a=t(),s=1;for(;i.includes(a)&&s<r;)a=t(),s++;if(s>=r)throw new Error(`${o.LIB}: regenerate_until_not_recently_encountered(): failed after maximum tries!`);return a}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0).__importDefault(n(15)).default({schema_version:2,revision:108,seed:1234,use_count:107,recently_encountered_by_id:{item:["axe","sword"],adventures:["dragon","king"],mistery:[]}});t.DEMO_STATE=r;t.MIGRATION_HINTS_FOR_TESTS={to_v1:{},to_v2:{}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(37),o=n(75);t.migrate_to_latest=function(e,t={}){const n=e&&e.schema_version||0;let i=o.create();if(0===Object.keys(e).length);else if(n===r.SCHEMA_VERSION)i=e;else{if(n>r.SCHEMA_VERSION)throw new Error(`${r.LIB}: Your data is from a more recent version of this lib. Please update!`);try{console.warn(`${r.LIB}: attempting to migrate schema from v${n} to v${r.SCHEMA_VERSION}:`),i=function(e,t){if(Object.keys(e).length===Object.keys(o.OLDEST_LEGACY_STATE_FOR_TESTS).length)return console.info(`${r.LIB}: migrating schema from v0/non-versioned to v1...`),Object.assign({},e,{schema_version:1,revision:t&&t.to_v1&&t.to_v1.revision||0});throw new Error("Unrecognized schema, most likely too old, can't migrate!")}(e,t),console.info(`${r.LIB}: schema migration successful.`)}catch(e){console.error(`${r.LIB}: failed migrating schema, performing full reset !`),i=o.create()}}return i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r={common:1,uncommon:19,rare:46,epic:91,legendary:182,artifact:333};t.QUALITY_STRENGTH_MULTIPLIER=r;const o={common:6,uncommon:5,rare:4,epic:3,legendary:2,artifact:1};t.QUALITY_STRENGTH_SPREAD=o;const i=.2;t.ENHANCEMENT_MULTIPLIER=i,t.get_interval=function(e,t,n,a=1){const s=o[t],c=r[t],l=1+i*n,u=Math.max(e-s,1),h=Math.min(e+s,20);return[Math.round(u*c*l*a),Math.round(h*c*l*a)]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1).Enum("base","qualifier1","qualifier2");t.WeaponPartType=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.messages={weapon:{base:{axe:"axe",bow:"bow",claw:"claw",dagger:"dagger",grimoire:"grimoire",harp:"harp",knife:"knife",longbow:"long bow",longsword:"long sword",luth:"luth",mace:"scythe",scythe:"spear",spear:"spear",spoon:"spoon",staff:"staff",sword:"sword",wand:"wand"},qualifier1:{admirable:"admirable",arcanic:"arcanic",bestial:"bestial",bone:"bone",brass:"brass",cardboard:"cardboard",complex:"complex",composite:"composite",consecrated:"consecrated",crafted:"crafted",cruel:"cruel",cunning:"cunning",cursed:"cursed",emerald:"emerald",engraved:"engraved",forbidden:"forbidden",forgotten:"forgotten",ghost:"ghost",golden:"golden",heavy:"heavy",heroic:"heroic",holy:"holy",inflexible:"inflexible",invincible:"invincible",iron:"iron",jade:"jade",light:"light",living:"living",lost:"lost",mechanical:"mechanical",mysterious:"mysterious",old:"old",onyx:"onyx",overrated:"overrated",powerful:"powerful",practical:"practical",proven:"proven",raging:"raging",robust:"robust",sapphire:"sapphire",savage:"savage",silver:"silver",simple:"simple",sinister:"sinister",skeleton:"skeleton",solid:"solid",steel:"steel",strange:"strange",subtile:"subtile",swift:"swift",unwavering:"unwavering",used:"used",whirling:"whirling",wooden:"wooden"},qualifier2:{adjudicator:"adjudicator’s",ambassador:"ambassador’s",ancients:"of the ancients",apprentice:"apprentice’s",assaulting:"assaulting",beginner:"beginner’s",brave:"of the brave",conqueror:"conqueror’s",cruel_tyrant:"cruel tyrant’s",defender:"defender’s",destructor:"destructor’s",dwarven:"dwarven",elite:"elite",elven:"elven",executioner:"executioner’s",expert:"expert",explorer:"explorer’s",gladiator:"gladiator’s",goddess:"of the goddess",guard:"guard’s",hunter:"hunter’s",judgement:"of judgement",king:"king’s",mediator:"mediator’s",mercenary:"mercenary’s",militia:"militia’s",nightmare:"nightmare’s",noble:"noble’s",noob:"of the noob",pilgrim:"pilgrim’s",pioneer:"pioneer’s",pirate:"pirate’s",profane:"profane’s",ranger:"ranger’s",sorcerer:"sorcerer’s",tormentor:"tormentor’s",training:"training",traveler:"traveler’s",twink:"of the twink",tyrant:"tyrant’s",upholder:"upholder’s",warfield:"warfield’s",warfield_king:"warfield king’s",warrior:"warrior’s",wise:"of the wise",woodsman:"woodsman’s"}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r={en:n(220).messages};t.i18n_messages=r;t.ENTRIES=[{type:"base",hid:"axe"},{type:"base",hid:"bow"},{type:"base",hid:"claw"},{type:"base",hid:"dagger"},{type:"base",hid:"grimoire"},{type:"base",hid:"harp"},{type:"base",hid:"knife"},{type:"base",hid:"longbow"},{type:"base",hid:"longsword"},{type:"base",hid:"luth"},{type:"base",hid:"mace"},{type:"base",hid:"scythe"},{type:"base",hid:"spear"},{type:"base",hid:"spoon"},{type:"base",hid:"staff"},{type:"base",hid:"sword"},{type:"base",hid:"wand"},{type:"qualifier1",hid:"admirable"},{type:"qualifier1",hid:"arcanic"},{type:"qualifier1",hid:"bestial"},{type:"qualifier1",hid:"bone"},{type:"qualifier1",hid:"brass"},{type:"qualifier1",hid:"cardboard"},{type:"qualifier1",hid:"complex"},{type:"qualifier1",hid:"composite"},{type:"qualifier1",hid:"consecrated"},{type:"qualifier1",hid:"crafted"},{type:"qualifier1",hid:"cruel"},{type:"qualifier1",hid:"cunning"},{type:"qualifier1",hid:"cursed"},{type:"qualifier1",hid:"emerald"},{type:"qualifier1",hid:"engraved"},{type:"qualifier1",hid:"forbidden"},{type:"qualifier1",hid:"forgotten"},{type:"qualifier1",hid:"ghost"},{type:"qualifier1",hid:"golden"},{type:"qualifier1",hid:"heavy"},{type:"qualifier1",hid:"heroic"},{type:"qualifier1",hid:"holy"},{type:"qualifier1",hid:"inflexible"},{type:"qualifier1",hid:"invincible"},{type:"qualifier1",hid:"iron"},{type:"qualifier1",hid:"jade"},{type:"qualifier1",hid:"light"},{type:"qualifier1",hid:"living"},{type:"qualifier1",hid:"lost"},{type:"qualifier1",hid:"mechanical"},{type:"qualifier1",hid:"mysterious"},{type:"qualifier1",hid:"old"},{type:"qualifier1",hid:"onyx"},{type:"qualifier1",hid:"overrated"},{type:"qualifier1",hid:"powerful"},{type:"qualifier1",hid:"practical"},{type:"qualifier1",hid:"proven"},{type:"qualifier1",hid:"raging"},{type:"qualifier1",hid:"robust"},{type:"qualifier1",hid:"sapphire"},{type:"qualifier1",hid:"savage"},{type:"qualifier1",hid:"silver"},{type:"qualifier1",hid:"simple"},{type:"qualifier1",hid:"sinister"},{type:"qualifier1",hid:"skeleton"},{type:"qualifier1",hid:"solid"},{type:"qualifier1",hid:"steel"},{type:"qualifier1",hid:"strange"},{type:"qualifier1",hid:"subtile"},{type:"qualifier1",hid:"swift"},{type:"qualifier1",hid:"unwavering"},{type:"qualifier1",hid:"used"},{type:"qualifier1",hid:"whirling"},{type:"qualifier1",hid:"wooden"},{type:"qualifier2",hid:"adjudicator"},{type:"qualifier2",hid:"ambassador"},{type:"qualifier2",hid:"ancients"},{type:"qualifier2",hid:"apprentice"},{type:"qualifier2",hid:"assaulting"},{type:"qualifier2",hid:"beginner"},{type:"qualifier2",hid:"brave"},{type:"qualifier2",hid:"conqueror"},{type:"qualifier2",hid:"cruel_tyrant"},{type:"qualifier2",hid:"defender"},{type:"qualifier2",hid:"destructor"},{type:"qualifier2",hid:"dwarven"},{type:"qualifier2",hid:"elite"},{type:"qualifier2",hid:"elven"},{type:"qualifier2",hid:"executioner"},{type:"qualifier2",hid:"expert"},{type:"qualifier2",hid:"explorer"},{type:"qualifier2",hid:"gladiator"},{type:"qualifier2",hid:"goddess"},{type:"qualifier2",hid:"guard"},{type:"qualifier2",hid:"hunter"},{type:"qualifier2",hid:"judgement"},{type:"qualifier2",hid:"king"},{type:"qualifier2",hid:"mediator"},{type:"qualifier2",hid:"mercenary"},{type:"qualifier2",hid:"militia"},{type:"qualifier2",hid:"nightmare"},{type:"qualifier2",hid:"noble"},{type:"qualifier2",hid:"noob"},{type:"qualifier2",hid:"pilgrim"},{type:"qualifier2",hid:"pioneer"},{type:"qualifier2",hid:"pirate"},{type:"qualifier2",hid:"profane"},{type:"qualifier2",hid:"ranger"},{type:"qualifier2",hid:"sorcerer"},{type:"qualifier2",hid:"tormentor"},{type:"qualifier2",hid:"training"},{type:"qualifier2",hid:"traveler"},{type:"qualifier2",hid:"twink"},{type:"qualifier2",hid:"tyrant"},{type:"qualifier2",hid:"upholder"},{type:"qualifier2",hid:"warfield_king"},{type:"qualifier2",hid:"warfield"},{type:"qualifier2",hid:"warrior"},{type:"qualifier2",hid:"wise"},{type:"qualifier2",hid:"woodsman"}]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r={common:1,uncommon:19,rare:46,epic:91,legendary:182,artifact:333};t.QUALITY_STRENGTH_MULTIPLIER=r;const o={common:6,uncommon:5,rare:4,epic:3,legendary:2,artifact:1};t.QUALITY_STRENGTH_SPREAD=o;const i=.2;t.ENHANCEMENT_MULTIPLIER=i,t.get_interval=function(e,t,n,a=1){const s=o[t],c=r[t],l=1+i*n,u=Math.max(e-s,1),h=Math.min(e+s,20);return[Math.round(u*c*l*a),Math.round(h*c*l*a)]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1).Enum("base","qualifier1","qualifier2");t.ArmorPartType=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.messages={armor:{base:{armguards:"armguards",belt:"belt",boots:"boots",bracers:"bracers",breastplate:"breastplate",cape:"cape",cloak:"cloak",crown:"crown",gauntlets:"gauntlets",gloves:"gloves",greaves:"greaves",hat:"hat",helmet:"helmet",leggings:"leggings",mantle:"mantle",pants:"pants",robe:"robe",shield:"shield",shoes:"shoes",shoulders:"shoulders",socks:"socks"},qualifier1:{admirable:"admirable",arcanic:"arcanic",bestial:"bestial",bone:"bone",brass:"brass",cardboard:"cardboard",complex:"complex",composite:"composite",consecrated:"consecrated",crafted:"crafted",cruel:"cruel",cunning:"cunning",cursed:"cursed",embroidered:"embroidered",emerald:"emerald",engraved:"engraved",forbidden:"forbidden",forgotten:"forgotten",ghost:"ghost",golden:"golden",heavy:"heavy",heroic:"heroic",holy:"holy",inflexible:"inflexible",invincible:"invincible",iron:"iron",jade:"jade",light:"light",living:"living",lost:"lost",mechanical:"mechanical",mysterious:"mysterious",old:"old",onyx:"onyx",overrated:"overrated",powerful:"powerful",practical:"practical",proven:"proven",raging:"raging",robust:"robust",sapphire:"sapphire",savage:"savage",scale:"scale",silver:"silver",simple:"simple",sinister:"sinister",skeleton:"skeleton",solid:"solid",steel:"steel",strange:"strange",subtile:"subtile",swift:"swift",unwavering:"unwavering",used:"used",whirling:"whirling",wooden:"wooden",adjudicator:"adjudicator’s"},qualifier2:{ambassador:"ambassador’s",ancients:"of the ancients",apprentice:"apprentice’s",assaulting:"assaulting",beginner:"beginner’s",brave:"of the brave",conqueror:"conqueror’s",cruel_tyrant:"cruel tyrant’s",defender:"defender’s",destructor:"destructor’s",dwarven:"dwarven",elite:"elite",elven:"elven",executioner:"executioner’s",expert:"expert",explorer:"explorer’s",gladiator:"gladiator’s",goddess:"of the goddess",guard:"guard’s",hunter:"hunter’s",judgement:"of judgement",king:"king’s",mediator:"mediator’s",mercenary:"mercenary’s",militia:"militia’s",nightmare:"nightmare’s",noble:"noble’s",noob:"of the noob",pilgrim:"pilgrim’s",pioneer:"pioneer’s",pirate:"pirate’s",profane:"profane’s",ranger:"ranger’s",sorcerer:"sorcerer’s",tormentor:"tormentor’s",training:"training",traveler:"traveler’s",twink:"of the twink",tyrant:"tyrant’s",upholder:"upholder’s",warfield_king:"warfield king’s",warfield:"warfield’s",warrior:"warrior’s",wise:"of the wise",woodsman:"woodsman’s"}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r={en:n(224).messages};t.i18n_messages=r;t.ENTRIES=[{type:"base",hid:"armguards"},{type:"base",hid:"belt"},{type:"base",hid:"boots"},{type:"base",hid:"bracers"},{type:"base",hid:"breastplate"},{type:"base",hid:"cloak"},{type:"base",hid:"crown"},{type:"base",hid:"gauntlets"},{type:"base",hid:"gloves"},{type:"base",hid:"greaves"},{type:"base",hid:"hat"},{type:"base",hid:"helmet"},{type:"base",hid:"leggings"},{type:"base",hid:"mantle"},{type:"base",hid:"pants"},{type:"base",hid:"robe"},{type:"base",hid:"shield"},{type:"base",hid:"shoes"},{type:"base",hid:"shoulders"},{type:"base",hid:"socks"},{type:"qualifier1",hid:"bone"},{type:"qualifier1",hid:"brass"},{type:"qualifier1",hid:"embroidered"},{type:"qualifier1",hid:"cardboard"},{type:"qualifier1",hid:"composite"},{type:"qualifier1",hid:"consecrated"},{type:"qualifier1",hid:"crafted"},{type:"qualifier1",hid:"cursed"},{type:"qualifier1",hid:"emerald"},{type:"qualifier1",hid:"engraved"},{type:"qualifier1",hid:"golden"},{type:"qualifier1",hid:"heavy"},{type:"qualifier1",hid:"holy"},{type:"qualifier1",hid:"invincible"},{type:"qualifier1",hid:"iron"},{type:"qualifier1",hid:"jade"},{type:"qualifier1",hid:"light"},{type:"qualifier1",hid:"mechanical"},{type:"qualifier1",hid:"mysterious"},{type:"qualifier1",hid:"old"},{type:"qualifier1",hid:"onyx"},{type:"qualifier1",hid:"powerful"},{type:"qualifier1",hid:"practical"},{type:"qualifier1",hid:"proven"},{type:"qualifier1",hid:"robust"},{type:"qualifier1",hid:"sapphire"},{type:"qualifier1",hid:"scale"},{type:"qualifier1",hid:"silver"},{type:"qualifier1",hid:"simple"},{type:"qualifier1",hid:"skeleton"},{type:"qualifier1",hid:"solid"},{type:"qualifier1",hid:"steel"},{type:"qualifier1",hid:"strange"},{type:"qualifier1",hid:"subtile"},{type:"qualifier1",hid:"swift"},{type:"qualifier1",hid:"unwavering"},{type:"qualifier1",hid:"used"},{type:"qualifier1",hid:"wooden"},{type:"qualifier2",hid:"ancients"},{type:"qualifier2",hid:"apprentice"},{type:"qualifier2",hid:"beginner"},{type:"qualifier2",hid:"brave"},{type:"qualifier2",hid:"conqueror"},{type:"qualifier2",hid:"cruel_tyrant"},{type:"qualifier2",hid:"defender"},{type:"qualifier2",hid:"destructor"},{type:"qualifier2",hid:"dwarven"},{type:"qualifier2",hid:"elite"},{type:"qualifier2",hid:"elven"},{type:"qualifier2",hid:"expert"},{type:"qualifier2",hid:"explorer"},{type:"qualifier2",hid:"gladiator"},{type:"qualifier2",hid:"goddess"},{type:"qualifier2",hid:"guard"},{type:"qualifier2",hid:"judgement"},{type:"qualifier2",hid:"king"},{type:"qualifier2",hid:"mediator"},{type:"qualifier2",hid:"mercenary"},{type:"qualifier2",hid:"militia"},{type:"qualifier2",hid:"nightmare"},{type:"qualifier2",hid:"noble"},{type:"qualifier2",hid:"noob"},{type:"qualifier2",hid:"pilgrim"},{type:"qualifier2",hid:"pioneer"},{type:"qualifier2",hid:"profane"},{type:"qualifier2",hid:"sorcerer"},{type:"qualifier2",hid:"tormentor"},{type:"qualifier2",hid:"training"},{type:"qualifier2",hid:"twink"},{type:"qualifier2",hid:"tyrant"},{type:"qualifier2",hid:"upholder"},{type:"qualifier2",hid:"warfield_king"},{type:"qualifier2",hid:"warfield"},{type:"qualifier2",hid:"warrior"},{type:"qualifier2",hid:"wise"}]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(77),o=n(78);t.migrate_to_latest=function(e,t={}){const n=e&&e.schema_version||0;let i=o.create();if(0===Object.keys(e).length);else if(n===r.SCHEMA_VERSION)i=e;else{if(n>r.SCHEMA_VERSION)throw new Error(`${r.LIB}: Your data is from a more recent version of this lib. Please update!`);try{console.warn(`${r.LIB}: attempting to migrate schema from v${n} to v${r.SCHEMA_VERSION}:`),i=function(e,t){if(Object.keys(e).length===Object.keys(o.OLDEST_LEGACY_STATE_FOR_TESTS).length)return console.info(`${r.LIB}: migrating schema from v0/non-versioned to v1...`),Object.assign({},e,{schema_version:1,revision:t&&t.to_v1&&t.to_v1.revision||0});throw new Error("Unrecognized schema, most likely too old, can't migrate!")}(e,t),console.info(`${r.LIB}: schema migration successful.`)}catch(e){console.error(`${r.LIB}: failed migrating schema, performing full reset !`),i=o.create()}}return i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1).Enum("coin","token");t.Currency=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(38),o=n(80),i=n(79);t.migrate_to_latest=function(e,t,n={}){return i.get_SEC(e).xTry("migrate_to_latest",({SEC:e,logger:i})=>{const a=t&&t.schema_version||0;let s=o.create(e);if(0===Object.keys(t).length);else if(a===r.SCHEMA_VERSION)s=t;else{if(a>r.SCHEMA_VERSION)throw new Error("Your data is from a more recent version of this lib. Please update!");try{i.warn(`attempting to migrate schema from v${a} to v${r.SCHEMA_VERSION}:`),s=function(e,t,n){return e.xTry("migrate_to_2",({SEC:e,logger:r})=>(1!==t.schema_version&&(t=function(e,t,n){return e.xTry("migrate_to_1",({logger:e})=>{if(Object.keys(t).length!==Object.keys(o.OLDEST_LEGACY_STATE_FOR_TESTS).length||!t.hasOwnProperty("characteristics"))throw new Error("Unrecognized schema, most likely too old, can't migrate!");e.info("migrating schema from v0/non-versioned to v1...");const{name:n,klass:r,characteristics:i}=t;return{name:n,klass:r,attributes:i,schema_version:1}})}(e,t)),r.info("migrating schema from v1 to v2..."),Object.assign({},t,{schema_version:2,revision:n&&n.to_v2&&n.to_v2.revision||0})))}(e,t,n),i.info("schema migration successful.")}catch(t){i.error("failed migrating schema, performing full reset !",t),s=o.create(e)}}return s})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),o=r.Enum("agility","health","level","luck","mana","strength","charisma","wisdom");t.CharacterAttribute=o;const i=r.Enum("novice","warrior","barbarian","paladin","sculptor","pirate","ninja","rogue","wizard","hunter","druid","priest");t.CharacterClass=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=()=>{},o=r,i=r,a=r,s=r,c=r,l=r,u=r,h=r,p=r,f=r,d=r,m=r,g=r,_=r,y={log:h,info:u,warn:g,error:c};t.simpleLoggerToVoid=y;const v=Object.assign({},console,{debug:a,log:h,info:u,warn:g,error:c,trace:d});t.consoleLoggerToVoid=v;const b={emerg:s,alert:o,crit:i,error:c,warning:_,notice:p,info:u,debug:a};t.syslogLoggerToVoid=b;const w={fatal:l,error:c,warn:g,info:u,debug:a,trace:d};t.log4jLoggerToVoid=w;const E=w;t.serverLoggerToVoid=E;const x={error:c,warn:g,info:u,debug:a,verbose:m,silly:f};t.npmLoggerToVoid=x;const T={error:c,warn:g,info:u,debug:a};t.angularJSLoggerToVoid=T;const k={fatal:l,error:c,warn:g,info:u,debug:a,trace:d};t.bunyanLoggerToVoid=k;const O={alert:o,crit:i,debug:a,emerg:s,error:c,fatal:l,info:u,log:h,notice:p,silly:f,trace:d,verbose:m,warn:g,warning:_};t.compatibleLoggerToVoid=O},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=console.log.bind(console),o=console.info.bind(console),i=console.warn.bind(console),a=console.error.bind(console),s=a,c=a,l=r,u=a,h=a,p=o,f=r,d=r,m=r,g=i,_={log:r,info:o,warn:i,error:a};t.simpleLoggerToConsole=_;const y=console;t.consoleLoggerToConsole=y;const v={emerg:u,alert:s,crit:c,error:a,warning:g,notice:p,info:o,debug:l};t.syslogLoggerToConsole=v;const b={fatal:h,error:a,warn:i,info:o,debug:l,trace:d};t.log4jLoggerToConsole=b;const w=b;t.serverLoggerToConsole=w;const E={error:a,warn:i,info:o,debug:l,verbose:m,silly:f};t.npmLoggerToConsole=E;const x={error:a,warn:i,info:o,debug:l};t.angularJSLoggerToConsole=x;const T={fatal:(e,...t)=>h(...k(e,...t)),error:(e,...t)=>a(...k(e,...t)),warn:(e,...t)=>i(...k(e,...t)),info:(e,...t)=>o(...k(e,...t)),debug:(e,...t)=>l(...k(e,...t)),trace:(e,...t)=>d(...k(e,...t))};function k(e,...t){if(e instanceof Error){const n=e;return t.concat({err:n})}if("string"!=typeof e){const n=e;return t.concat(n)}return[e].concat(...t)}t.bunyanLoggerToConsole=T;const O={alert:s,crit:c,debug:l,emerg:u,error:a,fatal:h,info:o,log:r,notice:p,silly:f,trace:d,verbose:m,warn:i,warning:g};t.compatibleLoggerToConsole=O},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(81),o=n(20);t.getContext=function(e){return e[o.INTERNAL_PROP].DI.context},t.installPluginDependencyInjection=function(e,t){const{parent:n}=t,{defaultContext:i={},context:a={}}=t,s=e[o.INTERNAL_PROP],c={env:"development",logger:r.compatibleLoggerToConsole},l=n?n[o.INTERNAL_PROP].DI.context:{},u={logicalStack:s.LS.logicalStack,tracePrefix:s.LS.logicalStack.short};let h=Object.assign({},c,i,l,a,u);return s.DI={context:h},e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SUB_LIB="plugin/logical-stack";t.LOGICAL_STACK_BEGIN_MARKER="";t.LOGICAL_STACK_END_MARKER=":";t.LOGICAL_STACK_MODULE_MARKER="";t.LOGICAL_STACK_SEPARATOR="›";t.LOGICAL_STACK_OPERATION_MARKER="";t.LOGICAL_STACK_SEPARATOR_NON_ADJACENT="›…›"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(20),o=n(233);n(39).COMMON_ERROR_FIELDS.add("logicalStack"),t.installPluginLogicalStack=function(e,{module:t,operation:n,parent:i}){i&&(t=t||i[r.INTERNAL_PROP].LS.module);const a=e[r.INTERNAL_PROP],s=function(e,t,n,i=""){if(!(e=e||n))throw new Error(`${r.LIB}/${o.SUB_LIB}: you must provide 'module' to start building a logical stack!`);if(n&&!i)throw new Error(`${r.LIB}/${o.SUB_LIB}: you must provide the parent full LStack!`);if(i&&!n)throw new Error(`${r.LIB}/${o.SUB_LIB}: incoherency parentModule / parent LStack!`);let a=""+o.LOGICAL_STACK_BEGIN_MARKER+o.LOGICAL_STACK_MODULE_MARKER+e;t&&(a+=""+o.LOGICAL_STACK_SEPARATOR+t+o.LOGICAL_STACK_OPERATION_MARKER);let s=i||o.LOGICAL_STACK_BEGIN_MARKER;return e!==n&&(s+=""+(n?o.LOGICAL_STACK_SEPARATOR:"")+o.LOGICAL_STACK_MODULE_MARKER+e),t&&(s+=""+o.LOGICAL_STACK_SEPARATOR+t+o.LOGICAL_STACK_OPERATION_MARKER),{short:a,full:s}}(t,n,a.hasNonRootParent?i[r.INTERNAL_PROP].LS.module:void 0,a.hasNonRootParent?i[r.INTERNAL_PROP].LS.logicalStack.full:void 0);return a.errDecorators.push(function(e){return e.logicalStack?e.logicalStack.includes(s.full)||(e.logicalStack=s.full+o.LOGICAL_STACK_SEPARATOR_NON_ADJACENT+e.logicalStack):(e.message.startsWith(s.short)||(e.message=s.short+o.LOGICAL_STACK_END_MARKER+" "+e.message),e.logicalStack=s.full),e}),a.LS={module:t,operation:n,logicalStack:s},e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(39);t.normalizeError=function(e={}){const t=new Error(e.message||`(non-error caught: "${e}")`);return r.COMMON_ERROR_FIELDS.forEach(n=>{n in e&&(t[n]=e[n])}),t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.promiseTry=function(e){return Promise.resolve().then(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(20),o=n(236),i=n(235),a=n(82),s=n(234),c=n(232);function l(e){return e&&e[r.INTERNAL_PROP]}t.getContext=c.getContext,t.isSEC=l;let u=null;t.setRoot=function(e){if(!l(e))throw new Error(`${r.LIB}›setRoot() argument error: must be a valid SEC!`);if(u)throw new Error(`${r.LIB}›setRoot() conflict, root already set!`);u=e},t.create=function e(t={}){if(t.parent&&!l(t.parent))throw new Error(`${r.LIB}›create() argument error: parent must be a valid SEC!`);const n=!!t.parent;t.parent=t.parent||u;const h=t.onError||t.parent&&t.parent.onError;let p={[r.INTERNAL_PROP]:{hasNonRootParent:n,errDecorators:[i.normalizeError],state:{},DI:{context:{}}},child:function(t){return e(Object.assign({},t,{parent:p}))},xTry:function(e,t){const n=p.child({operation:e}),o=Object.assign({},n[r.INTERNAL_PROP].DI.context,{SEC:n});try{return t(o)}catch(e){a.createCatcher({debugId:"xTry",decorators:n[r.INTERNAL_PROP].errDecorators,onError:null})(e)}},xTryCatch:function(e,t){const n=p.child({operation:e}),o=Object.assign({},n[r.INTERNAL_PROP].DI.context,{SEC:n});try{return t(o)}catch(e){a.createCatcher({debugId:"xTryCatch",decorators:n[r.INTERNAL_PROP].errDecorators,onError:h})(e)}},xPromiseTry:function(e,t){const n=p.child({operation:e}),i=Object.assign({},n[r.INTERNAL_PROP].DI.context,{SEC:n});return o.promiseTry(()=>t(i)).catch(e=>{a.createCatcher({debugId:"xPromiseTry",decorators:n[r.INTERNAL_PROP].errDecorators,onError:null})(e)})},xPromiseCatch:function(e,t){const n=p.child({operation:e});return t.catch(e=>{a.createCatcher({debugId:"xPromiseCatch",decorators:n[r.INTERNAL_PROP].errDecorators,onError:h})(e)})},xPromiseTryCatch:function(e,t){const n=p.child({operation:e}),i=Object.assign({},n[r.INTERNAL_PROP].DI.context,{SEC:n});return o.promiseTry(()=>t(i)).catch(a.createCatcher({debugId:"xPromiseTryCatch",decorators:n[r.INTERNAL_PROP].errDecorators,onError:h}))}};return p=s.installPluginLogicalStack(p,t),p=c.installPluginDependencyInjection(p,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0).__importStar(n(83)),o=e=>e;function i(){return{enforce_immutability:o}}t.get_default_SEC_context=i,t.oh_my_rpg_get_SEC=function({module:e,parent_SEC:t}){if(t&&!r.isSEC(t))throw new Error(`@oh-my-rpg: missing sec when creating module "${e}"!`);return r.isomorphic.create({parent:t,module:e,context:Object.assign({},i())})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(41),o=n(86),i=n(84);t.create_item_base=function(e,t=r.ItemQuality.common){return Object.assign({},i.create_element_base(r.ElementType.item),{slot:e,quality:t})},t.compare_items_by_slot=function(e,t){const n=o.ITEM_SLOTS_TO_INT[e.slot];if(!Number.isInteger(n))throw new Error("compare items by slots: unhandled slot! (A)");const r=o.ITEM_SLOTS_TO_INT[t.slot];if(!Number.isInteger(r))throw new Error("compare items by slots: unhandled slot! (B)");return n-r},t.compare_items_by_quality=function(e,t){const n=o.ITEM_QUALITIES_TO_INT[e.quality];if(!Number.isInteger(n))throw new Error("compare items by quality: unhandled quality! (A)");const r=o.ITEM_QUALITIES_TO_INT[t.quality];if(!Number.isInteger(r))throw new Error("compare items by quality: unhandled quality! (B)");return n-r}},function(e,t){e.exports="_~0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"},function(e,t){e.exports=function(e,t,n){for(var r=(2<<Math.log(t.length-1)/Math.LN2)-1,o=Math.ceil(1.6*r*n/t.length),i="";;)for(var a=e(o),s=0;s<o;s++){var c=a[s]&r;if(t[c]&&(i+=t[c]).length===n)return i}}},function(e,t,n){e.exports=n(40).randomBytes},function(e,t,n){var r=n(242);e.exports=function(e){for(var t="",n=r(e=e||21);0<e--;)t+="_~0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[63&n[e]];return t}},function(e,t){var n;t=e.exports=z,n="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var r=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,i=t.re=[],a=t.src=[],s=0,c=s++;a[c]="0|[1-9]\\d*";var l=s++;a[l]="[0-9]+";var u=s++;a[u]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var h=s++;a[h]="("+a[c]+")\\.("+a[c]+")\\.("+a[c]+")";var p=s++;a[p]="("+a[l]+")\\.("+a[l]+")\\.("+a[l]+")";var f=s++;a[f]="(?:"+a[c]+"|"+a[u]+")";var d=s++;a[d]="(?:"+a[l]+"|"+a[u]+")";var m=s++;a[m]="(?:-("+a[f]+"(?:\\."+a[f]+")*))";var g=s++;a[g]="(?:-?("+a[d]+"(?:\\."+a[d]+")*))";var _=s++;a[_]="[0-9A-Za-z-]+";var y=s++;a[y]="(?:\\+("+a[_]+"(?:\\."+a[_]+")*))";var v=s++,b="v?"+a[h]+a[m]+"?"+a[y]+"?";a[v]="^"+b+"$";var w="[v=\\s]*"+a[p]+a[g]+"?"+a[y]+"?",E=s++;a[E]="^"+w+"$";var x=s++;a[x]="((?:<|>)?=?)";var T=s++;a[T]=a[l]+"|x|X|\\*";var k=s++;a[k]=a[c]+"|x|X|\\*";var O=s++;a[O]="[v=\\s]*("+a[k]+")(?:\\.("+a[k]+")(?:\\.("+a[k]+")(?:"+a[m]+")?"+a[y]+"?)?)?";var S=s++;a[S]="[v=\\s]*("+a[T]+")(?:\\.("+a[T]+")(?:\\.("+a[T]+")(?:"+a[g]+")?"+a[y]+"?)?)?";var L=s++;a[L]="^"+a[x]+"\\s*"+a[O]+"$";var j=s++;a[j]="^"+a[x]+"\\s*"+a[S]+"$";var R=s++;a[R]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var C=s++;a[C]="(?:~>?)";var A=s++;a[A]="(\\s*)"+a[C]+"\\s+",i[A]=new RegExp(a[A],"g");var I=s++;a[I]="^"+a[C]+a[O]+"$";var M=s++;a[M]="^"+a[C]+a[S]+"$";var N=s++;a[N]="(?:\\^)";var P=s++;a[P]="(\\s*)"+a[N]+"\\s+",i[P]=new RegExp(a[P],"g");var $=s++;a[$]="^"+a[N]+a[O]+"$";var q=s++;a[q]="^"+a[N]+a[S]+"$";var D=s++;a[D]="^"+a[x]+"\\s*("+w+")$|^$";var B=s++;a[B]="^"+a[x]+"\\s*("+b+")$|^$";var Y=s++;a[Y]="(\\s*)"+a[x]+"\\s*("+w+"|"+a[O]+")",i[Y]=new RegExp(a[Y],"g");var U=s++;a[U]="^\\s*("+a[O]+")\\s+-\\s+("+a[O]+")\\s*$";var G=s++;a[G]="^\\s*("+a[S]+")\\s+-\\s+("+a[S]+")\\s*$";var F=s++;a[F]="(<|>)?=?\\s*\\*";for(var H=0;H<s;H++)n(H,a[H]),i[H]||(i[H]=new RegExp(a[H]));function V(e,t){if(e instanceof z)return e;if("string"!=typeof e)return null;if(e.length>r)return null;if(!(t?i[E]:i[v]).test(e))return null;try{return new z(e,t)}catch(e){return null}}function z(e,t){if(e instanceof z){if(e.loose===t)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>r)throw new TypeError("version is longer than "+r+" characters");if(!(this instanceof z))return new z(e,t);n("SemVer",e,t),this.loose=t;var a=e.trim().match(t?i[E]:i[v]);if(!a)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+a[1],this.minor=+a[2],this.patch=+a[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");a[4]?this.prerelease=a[4].split(".").map(function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<o)return t}return e}):this.prerelease=[],this.build=a[5]?a[5].split("."):[],this.format()}t.parse=V,t.valid=function(e,t){var n=V(e,t);return n?n.version:null},t.clean=function(e,t){var n=V(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null},t.SemVer=z,z.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},z.prototype.toString=function(){return this.version},z.prototype.compare=function(e){return n("SemVer.compare",this.version,this.loose,e),e instanceof z||(e=new z(e,this.loose)),this.compareMain(e)||this.comparePre(e)},z.prototype.compareMain=function(e){return e instanceof z||(e=new z(e,this.loose)),K(this.major,e.major)||K(this.minor,e.minor)||K(this.patch,e.patch)},z.prototype.comparePre=function(e){if(e instanceof z||(e=new z(e,this.loose)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],o=e.prerelease[t];if(n("prerelease compare",t,r,o),void 0===r&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===r)return-1;if(r!==o)return K(r,o)}while(++t)},z.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var n=this.prerelease.length;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);-1===n&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,n,r){"string"==typeof n&&(r=n,n=void 0);try{return new z(e,n).inc(t,r).version}catch(e){return null}},t.diff=function(e,t){if(J(e,t))return null;var n=V(e),r=V(t);if(n.prerelease.length||r.prerelease.length){for(var o in n)if(("major"===o||"minor"===o||"patch"===o)&&n[o]!==r[o])return"pre"+o;return"prerelease"}for(var o in n)if(("major"===o||"minor"===o||"patch"===o)&&n[o]!==r[o])return o},t.compareIdentifiers=K;var W=/^[0-9]+$/;function K(e,t){var n=W.test(e),r=W.test(t);return n&&r&&(e=+e,t=+t),n&&!r?-1:r&&!n?1:e<t?-1:e>t?1:0}function Q(e,t,n){return new z(e,n).compare(new z(t,n))}function X(e,t,n){return Q(e,t,n)>0}function Z(e,t,n){return Q(e,t,n)<0}function J(e,t,n){return 0===Q(e,t,n)}function ee(e,t,n){return 0!==Q(e,t,n)}function te(e,t,n){return Q(e,t,n)>=0}function ne(e,t,n){return Q(e,t,n)<=0}function re(e,t,n,r){var o;switch(t){case"===":"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),o=e===n;break;case"!==":"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),o=e!==n;break;case"":case"=":case"==":o=J(e,n,r);break;case"!=":o=ee(e,n,r);break;case">":o=X(e,n,r);break;case">=":o=te(e,n,r);break;case"<":o=Z(e,n,r);break;case"<=":o=ne(e,n,r);break;default:throw new TypeError("Invalid operator: "+t)}return o}function oe(e,t){if(e instanceof oe){if(e.loose===t)return e;e=e.value}if(!(this instanceof oe))return new oe(e,t);n("comparator",e,t),this.loose=t,this.parse(e),this.semver===ie?this.value="":this.value=this.operator+this.semver.version,n("comp",this)}t.rcompareIdentifiers=function(e,t){return K(t,e)},t.major=function(e,t){return new z(e,t).major},t.minor=function(e,t){return new z(e,t).minor},t.patch=function(e,t){return new z(e,t).patch},t.compare=Q,t.compareLoose=function(e,t){return Q(e,t,!0)},t.rcompare=function(e,t,n){return Q(t,e,n)},t.sort=function(e,n){return e.sort(function(e,r){return t.compare(e,r,n)})},t.rsort=function(e,n){return e.sort(function(e,r){return t.rcompare(e,r,n)})},t.gt=X,t.lt=Z,t.eq=J,t.neq=ee,t.gte=te,t.lte=ne,t.cmp=re,t.Comparator=oe;var ie={};function ae(e,t){if(e instanceof ae)return e.loose===t?e:new ae(e.raw,t);if(e instanceof oe)return new ae(e.value,t);if(!(this instanceof ae))return new ae(e,t);if(this.loose=t,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(e){return this.parseRange(e.trim())},this).filter(function(e){return e.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function se(e){return!e||"x"===e.toLowerCase()||"*"===e}function ce(e,t,n,r,o,i,a,s,c,l,u,h,p){return((t=se(n)?"":se(r)?">="+n+".0.0":se(o)?">="+n+"."+r+".0":">="+t)+" "+(s=se(c)?"":se(l)?"<"+(+c+1)+".0.0":se(u)?"<"+c+"."+(+l+1)+".0":h?"<="+c+"."+l+"."+u+"-"+h:"<="+s)).trim()}function le(e,t){for(var r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length){for(r=0;r<e.length;r++)if(n(e[r].semver),e[r].semver!==ie&&e[r].semver.prerelease.length>0){var o=e[r].semver;if(o.major===t.major&&o.minor===t.minor&&o.patch===t.patch)return!0}return!1}return!0}function ue(e,t,n){try{t=new ae(t,n)}catch(e){return!1}return t.test(e)}function he(e,t,n,r){var o,i,a,s,c;switch(e=new z(e,r),t=new ae(t,r),n){case">":o=X,i=ne,a=Z,s=">",c=">=";break;case"<":o=Z,i=te,a=X,s="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ue(e,t,r))return!1;for(var l=0;l<t.set.length;++l){var u=null,h=null;if(t.set[l].forEach(function(e){e.semver===ie&&(e=new oe(">=0.0.0")),u=u||e,h=h||e,o(e.semver,u.semver,r)?u=e:a(e.semver,h.semver,r)&&(h=e)}),u.operator===s||u.operator===c)return!1;if((!h.operator||h.operator===s)&&i(e,h.semver))return!1;if(h.operator===c&&a(e,h.semver))return!1}return!0}oe.prototype.parse=function(e){var t=this.loose?i[D]:i[B],n=e.match(t);if(!n)throw new TypeError("Invalid comparator: "+e);this.operator=n[1],"="===this.operator&&(this.operator=""),n[2]?this.semver=new z(n[2],this.loose):this.semver=ie},oe.prototype.toString=function(){return this.value},oe.prototype.test=function(e){return n("Comparator.test",e,this.loose),this.semver===ie||("string"==typeof e&&(e=new z(e,this.loose)),re(e,this.operator,this.semver,this.loose))},oe.prototype.intersects=function(e,t){if(!(e instanceof oe))throw new TypeError("a Comparator is required");var n;if(""===this.operator)return n=new ae(e.value,t),ue(this.value,n,t);if(""===e.operator)return n=new ae(this.value,t),ue(e.semver,n,t);var r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),o=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),i=this.semver.version===e.semver.version,a=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),s=re(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=re(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||o||i&&a||s||c},t.Range=ae,ae.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim(),this.range},ae.prototype.toString=function(){return this.range},ae.prototype.parseRange=function(e){var t=this.loose;e=e.trim(),n("range",e,t);var r=t?i[G]:i[U];e=e.replace(r,ce),n("hyphen replace",e),e=e.replace(i[Y],"$1$2$3"),n("comparator trim",e,i[Y]),e=(e=(e=e.replace(i[A],"$1~")).replace(i[P],"$1^")).split(/\s+/).join(" ");var o=t?i[D]:i[B],a=e.split(" ").map(function(e){return function(e,t){return n("comp",e),e=function(e,t){return e.trim().split(/\s+/).map(function(e){return function(e,t){n("caret",e,t);var r=t?i[q]:i[$];return e.replace(r,function(t,r,o,i,a){var s;return n("caret",e,t,r,o,i,a),se(r)?s="":se(o)?s=">="+r+".0.0 <"+(+r+1)+".0.0":se(i)?s="0"===r?">="+r+"."+o+".0 <"+r+"."+(+o+1)+".0":">="+r+"."+o+".0 <"+(+r+1)+".0.0":a?(n("replaceCaret pr",a),"-"!==a.charAt(0)&&(a="-"+a),s="0"===r?"0"===o?">="+r+"."+o+"."+i+a+" <"+r+"."+o+"."+(+i+1):">="+r+"."+o+"."+i+a+" <"+r+"."+(+o+1)+".0":">="+r+"."+o+"."+i+a+" <"+(+r+1)+".0.0"):(n("no pr"),s="0"===r?"0"===o?">="+r+"."+o+"."+i+" <"+r+"."+o+"."+(+i+1):">="+r+"."+o+"."+i+" <"+r+"."+(+o+1)+".0":">="+r+"."+o+"."+i+" <"+(+r+1)+".0.0"),n("caret return",s),s})}(e,t)}).join(" ")}(e,t),n("caret",e),e=function(e,t){return e.trim().split(/\s+/).map(function(e){return function(e,t){var r=t?i[M]:i[I];return e.replace(r,function(t,r,o,i,a){var s;return n("tilde",e,t,r,o,i,a),se(r)?s="":se(o)?s=">="+r+".0.0 <"+(+r+1)+".0.0":se(i)?s=">="+r+"."+o+".0 <"+r+"."+(+o+1)+".0":a?(n("replaceTilde pr",a),"-"!==a.charAt(0)&&(a="-"+a),s=">="+r+"."+o+"."+i+a+" <"+r+"."+(+o+1)+".0"):s=">="+r+"."+o+"."+i+" <"+r+"."+(+o+1)+".0",n("tilde return",s),s})}(e,t)}).join(" ")}(e,t),n("tildes",e),e=function(e,t){return n("replaceXRanges",e,t),e.split(/\s+/).map(function(e){return function(e,t){e=e.trim();var r=t?i[j]:i[L];return e.replace(r,function(t,r,o,i,a,s){n("xRange",e,t,r,o,i,a,s);var c=se(o),l=c||se(i),u=l||se(a),h=u;return"="===r&&h&&(r=""),c?t=">"===r||"<"===r?"<0.0.0":"*":r&&h?(l&&(i=0),u&&(a=0),">"===r?(r=">=",l?(o=+o+1,i=0,a=0):u&&(i=+i+1,a=0)):"<="===r&&(r="<",l?o=+o+1:i=+i+1),t=r+o+"."+i+"."+a):l?t=">="+o+".0.0 <"+(+o+1)+".0.0":u&&(t=">="+o+"."+i+".0 <"+o+"."+(+i+1)+".0"),n("xRange return",t),t})}(e,t)}).join(" ")}(e,t),n("xrange",e),e=function(e,t){return n("replaceStars",e,t),e.trim().replace(i[F],"")}(e,t),n("stars",e),e}(e,t)}).join(" ").split(/\s+/);return this.loose&&(a=a.filter(function(e){return!!e.match(o)})),a=a.map(function(e){return new oe(e,t)})},ae.prototype.intersects=function(e,t){if(!(e instanceof ae))throw new TypeError("a Range is required");return this.set.some(function(n){return n.every(function(n){return e.set.some(function(e){return e.every(function(e){return n.intersects(e,t)})})})})},t.toComparators=function(e,t){return new ae(e,t).set.map(function(e){return e.map(function(e){return e.value}).join(" ").trim().split(" ")})},ae.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new z(e,this.loose));for(var t=0;t<this.set.length;t++)if(le(this.set[t],e))return!0;return!1},t.satisfies=ue,t.maxSatisfying=function(e,t,n){var r=null,o=null;try{var i=new ae(t,n)}catch(e){return null}return e.forEach(function(e){i.test(e)&&(r&&-1!==o.compare(e)||(o=new z(r=e,n)))}),r},t.minSatisfying=function(e,t,n){var r=null,o=null;try{var i=new ae(t,n)}catch(e){return null}return e.forEach(function(e){i.test(e)&&(r&&1!==o.compare(e)||(o=new z(r=e,n)))}),r},t.validRange=function(e,t){try{return new ae(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,n){return he(e,t,"<",n)},t.gtr=function(e,t,n){return he(e,t,">",n)},t.outside=he,t.prerelease=function(e,t){var n=V(e,t);return n&&n.prerelease.length?n.prerelease:null},t.intersects=function(e,t,n){return e=new ae(e,n),t=new ae(t,n),e.intersects(t)},t.coerce=function(e){if(e instanceof z)return e;if("string"!=typeof e)return null;var t=e.match(i[R]);return null==t?null:V((t[1]||"0")+"."+(t[2]||"0")+"."+(t[3]||"0"))}},function(e,t,n){"use strict";const r=(e,t)=>(function(){const n=t.promiseModule,r=new Array(arguments.length);for(let e=0;e<arguments.length;e++)r[e]=arguments[e];return new n((n,o)=>{t.errorFirst?r.push(function(e,r){if(t.multiArgs){const t=new Array(arguments.length-1);for(let e=1;e<arguments.length;e++)t[e-1]=arguments[e];e?(t.unshift(e),o(t)):n(t)}else e?o(e):n(r)}):r.push(function(e){if(t.multiArgs){const e=new Array(arguments.length-1);for(let t=0;t<arguments.length;t++)e[t]=arguments[t];n(e)}else n(e)}),e.apply(this,r)})});e.exports=((e,t)=>{t=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},t);const n=e=>{const n=t=>"string"==typeof t?e===t:t.test(e);return t.include?t.include.some(n):!t.exclude.some(n)};let o;o="function"==typeof e?function(){return t.excludeMain?e.apply(this,arguments):r(e,t).apply(this,arguments)}:Object.create(Object.getPrototypeOf(e));for(const i in e){const a=e[i];o[i]="function"==typeof a&&n(i)?r(a,t):a}return o})},function(e,t,n){"use strict";e.exports=function(e,t,n){n=n||20;try{return JSON.parse(e,t)}catch(t){if("string"!=typeof e){const t=Array.isArray(e)&&0===e.length,n="Cannot parse "+(t?"an empty array":String(e));throw new TypeError(n)}const r=t.message.match(/^Unexpected token.*position\s+(\d+)/i),o=r?+r[1]:t.message.match(/^Unexpected end of JSON.*/i)?e.length-1:null;if(null!=o){const r=o<=n?0:o-n,i=o+n>=e.length?e.length:o+n;t.message+=` while parsing near '${0===r?"":"..."}${e.slice(r,i)}${i===e.length?"":"..."}'`}else t.message+=` while parsing '${e.slice(0,2*n)}'`;throw t}}},function(e,t,n){"use strict";e.exports=function(e){return!!e&&(e instanceof Array||Array.isArray(e)||e.length>=0&&e.splice instanceof Function)}},function(e,t,n){"use strict";var r=n(16),o=n(247),i=function(e,t){e&&e.constructor===String||(t=e||{},e=Error.name);var n=function r(i){if(!this)return new r(i);i=i instanceof Error?i.message:i||this.message,Error.call(this,i),Error.captureStackTrace(this,n),this.name=e,Object.defineProperty(this,"message",{configurable:!0,enumerable:!1,get:function(){var e=i.split(/\r?\n/g);for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];"message"in r&&(e=r.message(this[n],e)||e,o(e)||(e=[e]))}return e.join("\n")},set:function(e){i=e}});var a=Object.getOwnPropertyDescriptor(this,"stack"),s=a.get,c=a.value;delete a.value,delete a.writable,a.get=function(){var e=s?s.call(this).split(/\r?\n+/g):c.split(/\r?\n+/g);e[0]=this.name+": "+this.message;var n=1;for(var r in t)if(t.hasOwnProperty(r)){var o=t[r];if("line"in o){var i=o.line(this[r]);i&&e.splice(n++,0,"    "+i)}"stack"in o&&o.stack(this[r],e)}return e.join("\n")},Object.defineProperty(this,"stack",a)};return Object.setPrototypeOf?(Object.setPrototypeOf(n.prototype,Error.prototype),Object.setPrototypeOf(n,Error)):r.inherits(n,Error),n};i.append=function(e,t){return{message:function(n,r){return(n=n||t)&&(r[0]+=" "+e.replace("%s",n.toString())),r}}},i.line=function(e,t){return{line:function(n){return(n=n||t)?e.replace("%s",n.toString()):null}}},e.exports=i},function(e,t,n){"use strict";const r=n(248),o=n(246),i=r("JSONError",{fileName:r.append("in %s")});e.exports=((e,t,n)=>{"string"==typeof t&&(n=t,t=null);try{try{return JSON.parse(e,t)}catch(n){throw o(e,t),n}}catch(e){e.message=e.message.replace(/\n/g,"");const t=new i(e);throw n&&(t.fileName=n),t}})},function(e,t,n){"use strict";e.exports=(e=>{if("string"!=typeof e)throw new TypeError("Expected a string, got "+typeof e);return 65279===e.charCodeAt(0)?e.slice(1):e})},function(e,t,n){var r=n(89).Stream;e.exports=function(e){return{ReadStream:function t(n,o){if(!(this instanceof t))return new t(n,o);r.call(this);var i=this;this.path=n;this.fd=null;this.readable=!0;this.paused=!1;this.flags="r";this.mode=438;this.bufferSize=65536;o=o||{};var a=Object.keys(o);for(var s=0,c=a.length;s<c;s++){var l=a[s];this[l]=o[l]}this.encoding&&this.setEncoding(this.encoding);if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(null!==this.fd)return void process.nextTick(function(){i._read()});e.open(this.path,this.flags,this.mode,function(e,t){if(e)return i.emit("error",e),void(i.readable=!1);i.fd=t,i.emit("open",t),i._read()})},WriteStream:function t(n,o){if(!(this instanceof t))return new t(n,o);r.call(this);this.path=n;this.fd=null;this.writable=!0;this.flags="w";this.encoding="binary";this.mode=438;this.bytesWritten=0;o=o||{};var i=Object.keys(o);for(var a=0,s=i.length;a<s;a++){var c=i[a];this[c]=o[c]}if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1;this._queue=[];null===this.fd&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}}},function(e,t){e.exports=require("constants")},function(e,t,n){var r=n(90),o=n(252),i=process.cwd,a=null,s=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return a||(a=i.call(process)),a};try{process.cwd()}catch(e){}var c=process.chdir;function l(e){return e?function(t,n,o){return e.call(r,t,n,function(e){m(e)&&(e=null),o&&o.apply(this,arguments)})}:e}function u(e){return e?function(t,n){try{return e.call(r,t,n)}catch(e){if(!m(e))throw e}}:e}function h(e){return e?function(t,n,o,i){return e.call(r,t,n,o,function(e){m(e)&&(e=null),i&&i.apply(this,arguments)})}:e}function p(e){return e?function(t,n,o){try{return e.call(r,t,n,o)}catch(e){if(!m(e))throw e}}:e}function f(e){return e?function(t,n){return e.call(r,t,function(e,t){if(!t)return n.apply(this,arguments);t.uid<0&&(t.uid+=4294967296),t.gid<0&&(t.gid+=4294967296),n&&n.apply(this,arguments)})}:e}function d(e){return e?function(t){var n=e.call(r,t);return n.uid<0&&(n.uid+=4294967296),n.gid<0&&(n.gid+=4294967296),n}:e}function m(e){return!e||("ENOSYS"===e.code||!(process.getuid&&0===process.getuid()||"EINVAL"!==e.code&&"EPERM"!==e.code))}process.chdir=function(e){a=null,c.call(process,e)},e.exports=function(e){o.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&function(e){e.lchmod=function(t,n,r){e.open(t,o.O_WRONLY|o.O_SYMLINK,n,function(t,o){t?r&&r(t):e.fchmod(o,n,function(t){e.close(o,function(e){r&&r(t||e)})})})},e.lchmodSync=function(t,n){var r,i=e.openSync(t,o.O_WRONLY|o.O_SYMLINK,n),a=!0;try{r=e.fchmodSync(i,n),a=!1}finally{if(a)try{e.closeSync(i)}catch(e){}else e.closeSync(i)}return r}}(e);e.lutimes||function(e){o.hasOwnProperty("O_SYMLINK")?(e.lutimes=function(t,n,r,i){e.open(t,o.O_SYMLINK,function(t,o){t?i&&i(t):e.futimes(o,n,r,function(t){e.close(o,function(e){i&&i(t||e)})})})},e.lutimesSync=function(t,n,r){var i,a=e.openSync(t,o.O_SYMLINK),s=!0;try{i=e.futimesSync(a,n,r),s=!1}finally{if(s)try{e.closeSync(a)}catch(e){}else e.closeSync(a)}return i}):(e.lutimes=function(e,t,n,r){r&&process.nextTick(r)},e.lutimesSync=function(){})}(e);e.chown=h(e.chown),e.fchown=h(e.fchown),e.lchown=h(e.lchown),e.chmod=l(e.chmod),e.fchmod=l(e.fchmod),e.lchmod=l(e.lchmod),e.chownSync=p(e.chownSync),e.fchownSync=p(e.fchownSync),e.lchownSync=p(e.lchownSync),e.chmodSync=u(e.chmodSync),e.fchmodSync=u(e.fchmodSync),e.lchmodSync=u(e.lchmodSync),e.stat=f(e.stat),e.fstat=f(e.fstat),e.lstat=f(e.lstat),e.statSync=d(e.statSync),e.fstatSync=d(e.fstatSync),e.lstatSync=d(e.lstatSync),e.lchmod||(e.lchmod=function(e,t,n){n&&process.nextTick(n)},e.lchmodSync=function(){});e.lchown||(e.lchown=function(e,t,n,r){r&&process.nextTick(r)},e.lchownSync=function(){});"win32"===s&&(e.rename=(t=e.rename,function(n,r,o){var i=Date.now(),a=0;t(n,r,function s(c){if(c&&("EACCES"===c.code||"EPERM"===c.code)&&Date.now()-i<6e4)return setTimeout(function(){e.stat(r,function(e,i){e&&"ENOENT"===e.code?t(n,r,s):o(c)})},a),void(a<100&&(a+=10));o&&o(c)})}));var t;e.read=(r=e.read,function(t,n,o,i,a,s){var c;if(s&&"function"==typeof s){var l=0;c=function(u,h,p){if(u&&"EAGAIN"===u.code&&l<10)return l++,r.call(e,t,n,o,i,a,c);s.apply(this,arguments)}}return r.call(e,t,n,o,i,a,c)}),e.readSync=(n=e.readSync,function(t,r,o,i,a){for(var s=0;;)try{return n.call(e,t,r,o,i,a)}catch(e){if("EAGAIN"===e.code&&s<10){s++;continue}throw e}});var n;var r}},function(e,t,n){var r=n(10),o=n(253),i=n(251),a=[],s=n(16);var c,l,u=function(){};function h(e){o(e),e.gracefulify=h,e.FileReadStream=d,e.FileWriteStream=m,e.createReadStream=function(e,t){return new d(e,t)},e.createWriteStream=function(e,t){return new m(e,t)};var t=e.readFile;e.readFile=function(e,n,r){"function"==typeof n&&(r=n,n=null);return function e(n,r,o){return t(n,r,function(t){!t||"EMFILE"!==t.code&&"ENFILE"!==t.code?("function"==typeof o&&o.apply(this,arguments),f()):p([e,[n,r,o]])})}(e,n,r)};var n=e.writeFile;e.writeFile=function(e,t,r,o){"function"==typeof r&&(o=r,r=null);return function e(t,r,o,i){return n(t,r,o,function(n){!n||"EMFILE"!==n.code&&"ENFILE"!==n.code?("function"==typeof i&&i.apply(this,arguments),f()):p([e,[t,r,o,i]])})}(e,t,r,o)};var r=e.appendFile;r&&(e.appendFile=function(e,t,n,o){"function"==typeof n&&(o=n,n=null);return function e(t,n,o,i){return r(t,n,o,function(r){!r||"EMFILE"!==r.code&&"ENFILE"!==r.code?("function"==typeof i&&i.apply(this,arguments),f()):p([e,[t,n,o,i]])})}(e,t,n,o)});var a=e.readdir;function s(t){return a.apply(e,t)}if(e.readdir=function(e,t,n){var r=[e];"function"!=typeof t?r.push(t):n=t;return r.push(function(e,t){t&&t.sort&&t.sort(),!e||"EMFILE"!==e.code&&"ENFILE"!==e.code?("function"==typeof n&&n.apply(this,arguments),f()):p([s,[r]])}),s(r)},"v0.8"===process.version.substr(0,4)){var c=i(e);d=c.ReadStream,m=c.WriteStream}var l=e.ReadStream;d.prototype=Object.create(l.prototype),d.prototype.open=function(){var e=this;_(e.path,e.flags,e.mode,function(t,n){t?(e.autoClose&&e.destroy(),e.emit("error",t)):(e.fd=n,e.emit("open",n),e.read())})};var u=e.WriteStream;function d(e,t){return this instanceof d?(l.apply(this,arguments),this):d.apply(Object.create(d.prototype),arguments)}function m(e,t){return this instanceof m?(u.apply(this,arguments),this):m.apply(Object.create(m.prototype),arguments)}m.prototype=Object.create(u.prototype),m.prototype.open=function(){var e=this;_(e.path,e.flags,e.mode,function(t,n){t?(e.destroy(),e.emit("error",t)):(e.fd=n,e.emit("open",n))})},e.ReadStream=d,e.WriteStream=m;var g=e.open;function _(e,t,n,r){return"function"==typeof n&&(r=n,n=null),function e(t,n,r,o){return g(t,n,r,function(i,a){!i||"EMFILE"!==i.code&&"ENFILE"!==i.code?("function"==typeof o&&o.apply(this,arguments),f()):p([e,[t,n,r,o]])})}(e,t,n,r)}return e.open=_,e}function p(e){u("ENQUEUE",e[0].name,e[1]),a.push(e)}function f(){var e=a.shift();e&&(u("RETRY",e[0].name,e[1]),e[0].apply(null,e[1]))}s.debuglog?u=s.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(u=function(){var e=s.format.apply(s,arguments);e="GFS4: "+e.split(/\n/).join("\nGFS4: "),console.error(e)}),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){u(a),n(88).equal(a.length,0)}),e.exports=h(n(90)),process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&(e.exports=h(r)),e.exports.close=r.close=(c=r.close,function(e,t){return c.call(r,e,function(e){e||f(),"function"==typeof t&&t.apply(this,arguments)})}),e.exports.closeSync=r.closeSync=(l=r.closeSync,function(e){var t=l.apply(r,arguments);return f(),t})},function(e,t,n){"use strict";const r=n(11),o=n(254),i=n(250),a=n(249),s=n(245),c=(e,t)=>a(i(e),r.relative(".",t));e.exports=(e=>s(o.readFile)(e,"utf8").then(t=>c(t,e))),e.exports.sync=(e=>c(o.readFileSync(e,"utf8"),e))},function(e,t,n){"use strict";var r=n(255),o=n(11).join(".","package.json"),i=r.sync(o);n(244).satisfies(process.version,i.engines.node)||(console.error("ERROR: Invalid node, must be: "+i.engines.node+"!\n"),process.exit(3));const a=n(87),{create_game_instance:s}=n(22),{SEC:c,init_savegame:l}=n(195),{start_loop:u}=n(134);c.xPromiseTryCatch("starting",async({SEC:e,logger:t})=>{const{version:n}=i,r={version:n,verbose:!1,is_interactive:!0,may_clear_screen:!0,term_width:80};r.is_interactive=!!process.stdout.isTTY,r.may_clear_screen=r.is_interactive,r.config=new a({configName:"state",defaults:{}}),t.verbose(`config path: "${r.config.path}"`),t.trace("loaded state:",{state:r.config.store});const o=s({SEC:e,get_latest_state:()=>r.config.store,persist_state:e=>r.config.set(e)});if(r.is_interactive)return u(e,r,o).then(()=>console.log("Quitting..."));if(!r.is_interactive)throw new Error("Non-interactive mode or non-tty terminals are not supported at this time, sorry!")})}]);