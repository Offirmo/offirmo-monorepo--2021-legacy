{"dependencies":[{"name":"/Users/yjutard/work/src/off/offirmo-monorepo/1-foundation/soft-execution-context/.babelrc","includedInParent":true,"mtime":1527315405077},{"name":"/Users/yjutard/work/src/off/offirmo-monorepo/1-foundation/soft-execution-context/package.json","includedInParent":true,"mtime":1527752875823},{"name":"../../constants","loc":{"line":1,"column":30}},{"name":"../../state","loc":{"line":2,"column":26}},{"name":"./state","loc":{"line":3,"column":23}},{"name":"../../utils","loc":{"line":4,"column":29}}],"generated":{"js":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\nexports.PLUGIN = exports.ID = undefined;\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _constants = require('../../constants');\n\nvar _state = require('../../state');\n\nvar TopState = _interopRequireWildcard(_state);\n\nvar _state2 = require('./state');\n\nvar State = _interopRequireWildcard(_state2);\n\nvar _utils = require('../../utils');\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar ID = 'dependency_injection';\n\nvar PLUGIN = {\n\tid: ID,\n\tstate: State,\n\taugment: function augment(prototype) {\n\n\t\tprototype.injectDependencies = function injectDependencies(deps) {\n\t\t\tvar root_state = this[_constants.INTERNAL_PROP];\n\n\t\t\troot_state = TopState.reduce_plugin(root_state, ID, function (state) {\n\t\t\t\tObject.entries(deps).forEach(function (_ref) {\n\t\t\t\t\tvar _ref2 = _slicedToArray(_ref, 2),\n\t\t\t\t\t    key = _ref2[0],\n\t\t\t\t\t    value = _ref2[1];\n\n\t\t\t\t\tstate = State.injectDependencies(state, key, value);\n\t\t\t\t});\n\t\t\t\treturn state;\n\t\t\t});\n\n\t\t\tthis[_constants.INTERNAL_PROP] = root_state;\n\n\t\t\treturn this; // for chaining\n\t\t};\n\n\t\tprototype.getInjectedDependencies = function getInjectedDependencies() {\n\t\t\tvar state = this[_constants.INTERNAL_PROP].plugins[ID];\n\n\t\t\treturn (0, _utils.flattenToOwn)(state.context);\n\t\t};\n\t}\n};\n\nexports.ID = ID;\nexports.PLUGIN = PLUGIN;","map":{"mappings":[{"generated":{"line":10,"column":0},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":1,"column":0}},{"generated":{"line":12,"column":0},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":2,"column":0}},{"name":"TopState","generated":{"line":14,"column":4},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":2,"column":12}},{"generated":{"line":16,"column":0},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":3,"column":0}},{"name":"State","generated":{"line":18,"column":4},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":3,"column":12}},{"generated":{"line":20,"column":0},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":4,"column":0}},{"generated":{"line":24,"column":0},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":6,"column":0}},{"name":"ID","generated":{"line":24,"column":4},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":6,"column":6}},{"generated":{"line":24,"column":9},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":6,"column":11}},{"generated":{"line":24,"column":31},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":6,"column":0}},{"generated":{"line":26,"column":0},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":8,"column":0}},{"name":"PLUGIN","generated":{"line":26,"column":4},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":8,"column":6}},{"generated":{"line":26,"column":13},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":8,"column":15}},{"name":"id","generated":{"line":27,"column":0},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":9,"column":1}},{"name":"ID","generated":{"line":27,"column":5},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":9,"column":5}},{"generated":{"line":27,"column":7},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":8,"column":15}},{"name":"state","generated":{"line":28,"column":0},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":10,"column":1}},{"name":"State","generated":{"line":28,"column":8},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":10,"column":8}},{"generated":{"line":28,"column":13},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":8,"column":15}},{"name":"augment","generated":{"line":29,"column":0},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":11,"column":1}},{"generated":{"line":29,"column":10},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":11,"column":10}},{"generated":{"line":29,"column":38},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":11,"column":23}},{"name":"prototype","generated":{"line":31,"column":0},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":13,"column":2}},{"name":"injectDependencies","generated":{"line":31,"column":12},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":13,"column":12}},{"generated":{"line":31,"column":30},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":13,"column":2}},{"generated":{"line":31,"column":33},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":13,"column":33}},{"name":"injectDependencies","generated":{"line":31,"column":42},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":13,"column":42}},{"generated":{"line":31,"column":60},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":13,"column":33}},{"name":"deps","generated":{"line":31,"column":61},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":13,"column":61}},{"generated":{"line":31,"column":65},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":13,"column":33}},{"generated":{"line":31,"column":67},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":13,"column":67}},{"generated":{"line":32,"column":0},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":14,"column":3}},{"name":"root_state","generated":{"line":32,"column":7},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":14,"column":7}},{"generated":{"line":32,"column":20},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":14,"column":20}},{"name":"INTERNAL_PROP","generated":{"line":32,"column":25},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":14,"column":25}},{"generated":{"line":32,"column":49},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":14,"column":20}},{"generated":{"line":32,"column":50},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":14,"column":3}},{"name":"root_state","generated":{"line":34,"column":0},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":16,"column":3}},{"name":"TopState","generated":{"line":34,"column":16},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":16,"column":16}},{"name":"reduce_plugin","generated":{"line":34,"column":25},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":16,"column":25}},{"generated":{"line":34,"column":38},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":16,"column":16}},{"name":"root_state","generated":{"line":34,"column":39},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":16,"column":39}},{"generated":{"line":34,"column":49},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":16,"column":16}},{"name":"ID","generated":{"line":34,"column":51},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":16,"column":51}},{"generated":{"line":34,"column":53},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":16,"column":16}},{"generated":{"line":34,"column":55},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":16,"column":55}},{"generated":{"line":34,"column":72},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":16,"column":64}},{"name":"Object","generated":{"line":35,"column":0},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":17,"column":4}},{"name":"entries","generated":{"line":35,"column":11},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":17,"column":11}},{"generated":{"line":35,"column":18},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":17,"column":4}},{"name":"deps","generated":{"line":35,"column":19},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":17,"column":19}},{"generated":{"line":35,"column":23},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":17,"column":4}},{"name":"forEach","generated":{"line":35,"column":25},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":17,"column":25}},{"generated":{"line":35,"column":32},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":17,"column":4}},{"generated":{"line":35,"column":33},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":17,"column":33}},{"generated":{"line":35,"column":49},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":17,"column":51}},{"generated":{"line":36,"column":0},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":17,"column":51}},{"generated":{"line":37,"column":0},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":17,"column":51}},{"name":"key","generated":{"line":37,"column":9},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":17,"column":35}},{"generated":{"line":37,"column":12},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":17,"column":51}},{"generated":{"line":38,"column":0},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":17,"column":51}},{"name":"value","generated":{"line":38,"column":9},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":17,"column":40}},{"generated":{"line":38,"column":14},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":17,"column":51}},{"name":"state","generated":{"line":40,"column":0},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":18,"column":5}},{"name":"State","generated":{"line":40,"column":13},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":18,"column":13}},{"name":"injectDependencies","generated":{"line":40,"column":19},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":18,"column":19}},{"generated":{"line":40,"column":37},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":18,"column":13}},{"name":"state","generated":{"line":40,"column":38},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":18,"column":38}},{"generated":{"line":40,"column":43},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":18,"column":13}},{"name":"key","generated":{"line":40,"column":45},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":18,"column":45}},{"generated":{"line":40,"column":48},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":18,"column":13}},{"name":"value","generated":{"line":40,"column":50},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":18,"column":50}},{"generated":{"line":40,"column":55},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":18,"column":13}},{"generated":{"line":40,"column":56},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":18,"column":5}},{"generated":{"line":41,"column":0},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":19,"column":5}},{"generated":{"line":41,"column":5},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":17,"column":4}},{"generated":{"line":42,"column":0},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":20,"column":4}},{"name":"state","generated":{"line":42,"column":11},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":20,"column":11}},{"generated":{"line":42,"column":16},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":20,"column":4}},{"generated":{"line":43,"column":0},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":21,"column":4}},{"generated":{"line":43,"column":4},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":16,"column":16}},{"generated":{"line":43,"column":5},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":16,"column":3}},{"generated":{"line":45,"column":0},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":23,"column":3}},{"name":"INTERNAL_PROP","generated":{"line":45,"column":8},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":23,"column":8}},{"generated":{"line":45,"column":32},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":23,"column":3}},{"name":"root_state","generated":{"line":45,"column":36},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":23,"column":25}},{"generated":{"line":45,"column":46},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":23,"column":3}},{"generated":{"line":47,"column":0},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":25,"column":3}},{"generated":{"line":47,"column":10},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":25,"column":10}},{"generated":{"line":47,"column":14},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":25,"column":3}},{"generated":{"line":47,"column":15},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":13,"column":67}},{"generated":{"line":47,"column":16},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":25,"column":15}},{"generated":{"line":48,"column":0},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":26,"column":3}},{"generated":{"line":48,"column":3},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":13,"column":2}},{"name":"prototype","generated":{"line":50,"column":0},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":28,"column":2}},{"name":"getInjectedDependencies","generated":{"line":50,"column":12},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":28,"column":12}},{"generated":{"line":50,"column":35},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":28,"column":2}},{"generated":{"line":50,"column":38},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":28,"column":38}},{"name":"getInjectedDependencies","generated":{"line":50,"column":47},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":28,"column":47}},{"generated":{"line":50,"column":70},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":28,"column":38}},{"generated":{"line":50,"column":73},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":28,"column":73}},{"generated":{"line":51,"column":0},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":29,"column":3}},{"name":"state","generated":{"line":51,"column":7},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":29,"column":9}},{"generated":{"line":51,"column":15},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":29,"column":17}},{"name":"INTERNAL_PROP","generated":{"line":51,"column":20},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":29,"column":22}},{"generated":{"line":51,"column":44},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":29,"column":17}},{"name":"plugins","generated":{"line":51,"column":46},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":29,"column":37}},{"generated":{"line":51,"column":53},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":29,"column":17}},{"name":"ID","generated":{"line":51,"column":54},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":29,"column":45}},{"generated":{"line":51,"column":56},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":29,"column":17}},{"generated":{"line":51,"column":57},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":29,"column":3}},{"generated":{"line":53,"column":0},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":31,"column":3}},{"generated":{"line":53,"column":10},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":31,"column":10}},{"name":"state","generated":{"line":53,"column":35},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":31,"column":23}},{"name":"context","generated":{"line":53,"column":41},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":31,"column":29}},{"generated":{"line":53,"column":48},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":31,"column":10}},{"generated":{"line":53,"column":49},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":31,"column":3}},{"generated":{"line":54,"column":0},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":32,"column":3}},{"generated":{"line":54,"column":3},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":28,"column":2}},{"generated":{"line":55,"column":0},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":34,"column":2}},{"generated":{"line":56,"column":0},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":8,"column":15}},{"generated":{"line":56,"column":1},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":8,"column":0}},{"name":"ID","generated":{"line":58,"column":8},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":38,"column":1}},{"name":"ID","generated":{"line":58,"column":13},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":38,"column":1}},{"name":"PLUGIN","generated":{"line":59,"column":8},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":39,"column":1}},{"name":"PLUGIN","generated":{"line":59,"column":17},"source":"../../src/plugins/dependency-injection/index.js","original":{"line":39,"column":1}}],"sources":{"../../src/plugins/dependency-injection/index.js":"import { INTERNAL_PROP } from '../../constants'\nimport * as TopState from '../../state'\nimport * as State from './state'\nimport { flattenToOwn } from '../../utils'\n\nconst ID = 'dependency_injection'\n\nconst PLUGIN = {\n\tid: ID,\n\tstate: State,\n\taugment: prototype => {\n\n\t\tprototype.injectDependencies = function injectDependencies(deps) {\n\t\t\tlet root_state = this[INTERNAL_PROP]\n\n\t\t\troot_state = TopState.reduce_plugin(root_state, ID, state => {\n\t\t\t\tObject.entries(deps).forEach(([key, value]) => {\n\t\t\t\t\tstate = State.injectDependencies(state, key, value)\n\t\t\t\t})\n\t\t\t\treturn state\n\t\t\t})\n\n\t\t\tthis[INTERNAL_PROP] = root_state\n\n\t\t\treturn this // for chaining\n\t\t}\n\n\t\tprototype.getInjectedDependencies = function getInjectedDependencies() {\n\t\t\tconst state = this[INTERNAL_PROP].plugins[ID]\n\n\t\t\treturn flattenToOwn(state.context)\n\t\t}\n\n\t}\n}\n\nexport {\n\tID,\n\tPLUGIN,\n}\n"},"lineCount":null}},"hash":"9dd5e417c9509ceca75937a192553930","cacheData":{"env":{}}}