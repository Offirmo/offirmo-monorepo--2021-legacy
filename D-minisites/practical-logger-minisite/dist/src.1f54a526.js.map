{"version":3,"sources":["../../../node_modules/@offirmo/tiny-singleton/src/index.ts","../../../node_modules/@offirmo/practical-logger-core/src/consts-base.ts","../../../node_modules/@offirmo/practical-logger-core/src/consts.ts","../../../node_modules/@offirmo/practical-logger-core/src/normalize-args.ts","../../../node_modules/@offirmo/practical-logger-core/src/core.ts","../../../node_modules/@offirmo/practical-logger-types/src/index.ts","../../../node_modules/@offirmo/practical-logger-core/src/index.ts","../../../node_modules/@offirmo/practical-logger-browser/src/sinks/common.ts","../../../node_modules/@offirmo/practical-logger-browser/src/sinks/advanced/common.ts","../../../node_modules/@offirmo/practical-logger-browser/src/sinks/advanced/firefox.ts","../../../node_modules/@offirmo/practical-logger-browser/src/sinks/advanced/chromium.ts","../../../node_modules/@offirmo/practical-logger-browser/src/sinks/advanced/safari.ts","../../../node_modules/@offirmo/practical-logger-browser/src/sinks/no-css.ts","../../../node_modules/@offirmo/practical-logger-browser/src/sinks/index.ts","../../../node_modules/@offirmo/practical-logger-browser/src/better-console-groups/practical-logger.ts","../../../node_modules/@offirmo/practical-logger-browser/src/index.ts","../../../node_modules/@offirmo/practical-logger-core/doc/shared-demo.js","index.ts"],"names":["ALL_LOG_LEVELS","require","demo_legacy_console","console","log","debug","level","foo","info","warn","error","demo_logger_basic_usage","logger","in_group","silly","trace","version","bob","firstName","lastName","age","verbose","user","elapsedMs","err","Error","httpStatus","undefined","groupEnd","demo_logger_levels","reverse","forEach","demo_group","group","groupCollapsed","assert","demo_incorrect_logger_invocations","more","demo_logger_api","getLogger","root_logger","suggestedLevel","name","demo_error","bar","statusCode","details","hello","some","demo_devtools_fonts","font","module","exports"],"mappings":"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","file":"src.1f54a526.js","sourceRoot":"../src","sourcesContent":["\nexport default function tiny_singleton<\n\tCreateFn extends (...args: any[]) => ReturnType<CreateFn>\n>(generator: CreateFn): (...args: Parameters<CreateFn>) => ReturnType<CreateFn> {\n\tlet instantiated = false\n\tlet instance: undefined | ReturnType<CreateFn>\n\n\treturn function get(...args: any) {\n\t\tif (!instantiated) {\n\t\t\tinstance = generator(...args)\n\t\t\tinstantiated = true\n\t\t}\n\n\t\treturn instance as ReturnType<CreateFn>\n\t}\n}\n\nexport { tiny_singleton }\n","// base to be directly importable from other modules\n// without a full lib penalty.\n// This a very very specific use case, don't mind.\n\nimport { LogLevel } from '@offirmo/practical-logger-types'\n\nexport const DEFAULT_LOG_LEVEL: LogLevel = 'error'\nexport const DEFAULT_LOGGER_KEY = '' // yes, can be used as a key\n","import { LogLevel } from '@offirmo/practical-logger-types'\n\nexport const LIB = '@offirmo/practical-logger-core'\n\n// level to a numerical value, for ordering and filtering.\n// mnemonic:  100 = 100% = you will see 100% of the logs\n//              1 =   1% = you will see 1% of the logs (obviously the most important)\nexport const LOG_LEVEL_TO_INTEGER: Readonly<{ readonly [k: string]: number }> = {\n\tfatal:    1,\n\temerg:    2,\n\n\talert:   10,\n\tcrit:    20,\n\terror:   30,\n\n\twarning: 40,\n\twarn:    40,\n\n\tnotice:  45,\n\n\tinfo:    50,\n\n\tverbose: 70,\n\tlog:     80,\n\tdebug:   81,\n\n\ttrace:   90,\n\n\tsilly:  100,\n}\n\nexport const ALL_LOG_LEVELS: ReadonlyArray<LogLevel> =\n\tObject.keys(LOG_LEVEL_TO_INTEGER)\n\t\t.map(s => s as LogLevel)\n\t\t.sort((a: LogLevel, b: LogLevel) => LOG_LEVEL_TO_INTEGER[a] - LOG_LEVEL_TO_INTEGER[b])\n\n// rationalization to a clear, human understandable string\n// generated to shave a few bytes\n// not using fromEntries bc not available in node <12\nexport const LOG_LEVEL_TO_HUMAN: Readonly<{ readonly [k: string]: string }> = ALL_LOG_LEVELS.reduce((acc, ll) => {\n\tacc[ll] = ({ em: 'emergency', wa: 'warn'} as any)[ll.slice(0, 1)] || ll\n\treturn acc\n}, {} as any)\n\nexport * from './consts-base'\n","import {\n\tLogDetails,\n} from '@offirmo/practical-logger-types'\n\n\n// TODO externalize?\nexport function looksLikeAnError(x: any): boolean {\n\treturn !!(x?.name && x?.message && x?.stack)\n}\n\n// harmonize\n// also try to recover from incorrect invocations\nexport function normalizeArguments(raw_args: IArguments | any[]): [ string, LogDetails ] {\n\tconst message_parts: string[] = []\n\tlet details: LogDetails = {}\n\tlet err: Error | undefined = undefined\n\n\tArray.from(raw_args)\n\t\t.forEach(arg => {\n\t\t\tif (!arg)\n\t\t\t\treturn\n\n\t\t\t// errors are first class, look for them first\n\t\t\tif (looksLikeAnError(arg)) {\n\t\t\t\tif (!err)\n\t\t\t\t\terr = arg // extract it\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (!err && looksLikeAnError(arg.err)) {\n\t\t\t\terr = arg.err // extract it\n\t\t\t\t// don't return, still stuff to pick\n\t\t\t}\n\n\t\t\tif (typeof arg === 'object') {\n\t\t\t\tdetails = {\n\t\t\t\t\t...details,\n\t\t\t\t\t...arg,\n\t\t\t\t}\n\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tmessage_parts.push(String(arg))\n\t\t})\n\n\tif (typeof details.message === 'string' && !message_parts.length) {\n\t\tmessage_parts.push(details.message)\n\t\tdelete details.message\n\t}\n\n\tconst message = message_parts.join(' ') || (err as any)?.message || '(no message)'\n\tif (err)\n\t\tdetails.err = err\n\telse\n\t\tdelete details.err // because could be present but not be a correct err type\n\n\treturn [ message, details ]\n}\n\n","import {\n\tLogLevel,\n\tBaseInternalLoggerState,\n\tLogger,\n\tLoggerCreationParams,\n\tLogDetails,\n\tLogPayload,\n\tLogPrimitive,\n\tLogSink,\n} from '@offirmo/practical-logger-types'\n\nimport {\n\tLIB,\n\tALL_LOG_LEVELS,\n\tLOG_LEVEL_TO_INTEGER,\n\tDEFAULT_LOG_LEVEL,\n\tDEFAULT_LOGGER_KEY,\n} from './consts'\n\nimport { normalizeArguments } from './normalize-args'\n\nexport function checkLevel(level: any): asserts level is LogLevel {\n\tif (!ALL_LOG_LEVELS.includes(level))\n\t\tthrow new Error(`[${LIB}] Not a valid log level: \"${level}\"!`)\n}\n\nexport function create(\n\t{\n\t\tname = DEFAULT_LOGGER_KEY,\n\t\tsuggestedLevel = DEFAULT_LOG_LEVEL,\n\t\tforcedLevel,\n\t\tcommonDetails = {},\n\t}: LoggerCreationParams = {},\n\toutputFn: LogSink = console.log,\n): Logger {\n\n\tconst internalState: BaseInternalLoggerState = {\n\t\tname,\n\t\tlevel: forcedLevel || suggestedLevel,\n\t\tcommonDetails: {...commonDetails},\n\t\toutputFn,\n\t}\n\n\tlet levelAsInt = 100 // so far\n\n\tconst logger: Logger = ALL_LOG_LEVELS.reduce(\n\t\t(logger: any, level: LogLevel) => {\n\t\t\tconst primitive: LogPrimitive = function (rawMessage?: string, rawDetails?: LogDetails) {\n\t\t\t\tif (!isLevelEnabled(level)) return\n\n\t\t\t\tconst [ message, details ] = normalizeArguments(arguments)\n\n\t\t\t\tinternalState.outputFn(serializer(level, message, details))\n\t\t\t}\n\n\t\t\tlogger[level] = primitive\n\n\t\t\treturn logger\n\t\t},\n\t\t{\n\t\t\tsetLevel,\n\t\t\tgetLevel,\n\t\t\taddCommonDetails,\n\t\t\tgroup() {},\n\t\t\tgroupCollapsed() {},\n\t\t\tgroupEnd() {},\n\t\t},\n\t)\n\n\tfunction setLevel(level: LogLevel) {\n\t\tcheckLevel(level)\n\n\t\tinternalState.level = level\n\t\tlevelAsInt = LOG_LEVEL_TO_INTEGER[level]\n\t}\n\tsetLevel(getLevel()) // to check it\n\n\tfunction isLevelEnabled(level: LogLevel) {\n\t\tcheckLevel(level)\n\n\t\treturn LOG_LEVEL_TO_INTEGER[level] <= levelAsInt\n\t}\n\n\tfunction getLevel() {\n\t\treturn internalState.level\n\t}\n\n\tfunction addCommonDetails(details: Readonly<LogDetails>): void {\n\t\tif (details.err)\n\t\t\tthrow new Error(`[${LIB}] Can't set reserved property \"err\"!`)\n\n\t\tinternalState.commonDetails = {\n\t\t\t...internalState.commonDetails,\n\t\t\t...details,\n\t\t}\n\t}\n\n\tfunction serializer(level: LogLevel, msg: string, { err, ...details }: Readonly<LogDetails>): LogPayload {\n\t\tconst payload: LogPayload = {\n\t\t\tlevel,\n\t\t\tname,\n\t\t\tmsg,\n\t\t\ttime: +(new Date()), // UTC timestamp\n\t\t\tdetails: {\n\t\t\t\t...internalState.commonDetails,\n\t\t\t\t...details,\n\t\t\t},\n\t\t}\n\t\tif (err)\n\t\t\tpayload.err = err\n\n\t\treturn payload\n\t}\n\n\treturn logger\n}\n","\n//////////// Public interface (for logger usage) ////////////\n\n// List of all known logging primitives, in order of criticity\n// https://docs.google.com/spreadsheets/d/1Bc32plQTswNdCqXS99deB0n7Te7FfD7uepGAOOlPbvY/edit?usp=sharing\nexport type LogLevel =\n\t// TODO an extra \"never\" level?\n\t  'fatal'\n\t| 'emerg'\n\t| 'alert'\n\t| 'crit'\n\t| 'error'\n\t| 'warning'\n\t| 'warn'\n\t| 'notice'\n\t| 'info'\n\t| 'verbose'\n\t| 'log'\n\t| 'debug'\n\t| 'trace'\n\t| 'silly'\n\nexport interface LogDetails { [k: string]: any }\n\n// We INTENTIONALLY restrict to a structured primitive with no overloading.\n// - we do NOT follow bunyan with its multiple overloads (https://github.com/trentm/node-bunyan#log-method-api)\n//   Rationale: multiple overloads prove hard to type and force to use complex normalization code.\n// - we do not attempt to mirror console.x() API:\n//   it's not relevant since the introduction of string templates literals.\n// Still, we MAY tolerate a few simplifying cases:\n// - omitting the message: it will be extracted from details.message\n// - passing an error directly, either as the only arg or as details\n//   (to allow the simple logging of an error)\n// Those \"tolerances\" are non standard and may not be handled!\nexport type LogPrimitive = (message?: string, details?: Readonly<LogDetails>) => void\n\n// The top-level interface\nexport interface Logger {\n\tsetLevel: (level: LogLevel) => void\n\tgetLevel: () => LogLevel\n\taddCommonDetails: (hash: Readonly<LogDetails>) => void\n\n\tfatal: LogPrimitive\n\temerg: LogPrimitive\n\talert: LogPrimitive\n\tcrit: LogPrimitive\n\terror: LogPrimitive\n\twarning: LogPrimitive\n\twarn: LogPrimitive\n\tnotice: LogPrimitive\n\tinfo: LogPrimitive\n\tverbose: LogPrimitive\n\tlog: LogPrimitive\n\tdebug: LogPrimitive\n\ttrace: LogPrimitive\n\tsilly: LogPrimitive\n\n\t// for convenience. Not guaranteed to do anything.\n\tgroup(groupTitle?: string): void\n\tgroupCollapsed(groupTitle?: string): void\n\tgroupEnd(): void\n}\n\n//////////// Private interface (for logger implementations) ////////////\n\n// internal representation of a log line\n// inspired by:\n// https://github.com/trentm/node-bunyan#core-fields\nexport interface LogPayload {\n\tname: string // logger name\n\n\ttime: number // UTC timestamp\n\tlevel: LogLevel\n\tmsg: string\n\terr?: Error\n\tdetails: LogDetails\n}\n\n// a fn responsible to display a log line (or whatever)\nexport type LogSink = (payload: LogPayload) => void\n\n// a suggested base logger state\nexport interface BaseInternalLoggerState {\n\tname: string\n\tlevel: LogLevel // inclusive lower bound\n\tcommonDetails: LogDetails\n\toutputFn: LogSink\n}\n\n// suggested creation params\nexport interface BaseSinkOptions {\n\tsink?: LogSink\n}\nexport interface LoggerCreationParams<SinkOptions extends BaseSinkOptions = {}> {\n\tname?: string\n\tsuggestedLevel?: LogLevel // the code is free to suggest a default level, but can expect it to be dynamically overriden (see Universal Debug API)\n\tforcedLevel?: LogLevel // use only if you provide your own mechanism for dynamically setting the level\n\tcommonDetails?: Readonly<LogDetails>\n\tsinkOptions?: SinkOptions // options specifically targeted at the sink, usually platform dependent\n}\n","import { create as createLogger } from './core'\nexport { createLogger }\n\nexport * from '@offirmo/practical-logger-types'\n\nexport {\n\tALL_LOG_LEVELS,\n\tLOG_LEVEL_TO_INTEGER,\n\tLOG_LEVEL_TO_HUMAN,\n\tDEFAULT_LOG_LEVEL,\n\tDEFAULT_LOGGER_KEY,\n} from './consts'\n\nexport { checkLevel } from './core'\nexport * from './normalize-args'\n\n","import { LogLevel, LOG_LEVEL_TO_HUMAN } from '@offirmo/practical-logger-core'\n\nexport const LEVEL_TO_CONSOLE_METHOD: Readonly<{ [k: string]: string }> = {\n\tfatal:   'error',\n\temerg:   'error',\n\talert:   'error',\n\tcrit:    'error',\n\n\terror:   'error',\n\n\twarning: 'warn',\n\twarn:    'warn',\n\n\tnotice:  'info',\n\tinfo:    'info',\n\tverbose: 'info',\n\n\tlog:     'log',\n\n\tdebug:   'debug',\n\ttrace:   'debug',\n\tsilly:   'debug',\n}\n\n\nconst MIN_WIDTH = 5\nexport function to_uniform_level(level: LogLevel): string {\n\tlet str = LOG_LEVEL_TO_HUMAN[level] //.slice(0, MIN_WIDTH)\n\t//if (str.length < MIN_WIDTH)\n\tstr = (str + '         ').slice(0, MIN_WIDTH)\n\treturn str\n}\n","import {\n\tLogPayload,\n} from '@offirmo/practical-logger-types'\n\nconst FONT_FAMILY_BETTER_PROPORTIONAL = 'font-family: ' + [\n\t'-apple-system',\n\t'BlinkMacSystemFont', // good sans-serif available in blink = Chrome\n\t'noto',\n\t'roboto',\n\t'sans-serif',\n\t//'unset', // default back to the devtools one\n].join(', ')\n\nconst FONT_FAMILY_BETTER_MONOSPACE = 'font-family: ' + [\n\t'\"Fira Code\"',\n\t'Menlo', // default chrome devtools one\n\t'Consolas',\n\t'monospace',\n].join(', ')\n\n\nconst LEVEL_TO_COLOR_STYLE: Readonly<{ [k: string]: string }> = {\n\t// empty = no need, console method already covers it well\n\tfatal:   '',\n\temerg:   '',\n\talert:   '',\n\tcrit:    '',\n\n\terror:   '',\n\n\twarning: '',\n\twarn:    '',\n\n\tnotice:  'color: #659AD2',\n\tinfo:    'color: #659AD2',\n\tverbose: 'color: #659AD2',\n\n\tlog:     '',\n\n\tdebug:   'color: #9AA2AA',\n\ttrace:   'color: #9AA2AA',\n\tsilly:   'color: #9AA2AA',\n}\n\n\nfunction add_styled_string(line: string[], chunk: string, ...styles: string[]): string[] {\n\tconst [ existing_chunks, ...existing_chunks_styles ] = line\n\treturn [\n\t\texisting_chunks + '%c' + chunk,\n\t\t...existing_chunks_styles,\n\t\tstyles.join(';') + ';',\n\t]\n}\n\nfunction build_args(line: any[], payload: Readonly<LogPayload>): any[] {\n\tconst { err } = payload\n\tlet { details } = payload\n\n\tconst args = line\n\tif (err) {\n\t\t// err will be passed as the LAST arg for reasons (see below)\n\t\t// however the \"last arg\" display doesn't allow examining the optional err properties\n\t\t// so we also add the err to the details:\n\t\t// (tested on FF/Chrome/Safari)\n\t\tdetails = {\n\t\t\t...details,\n\t\t\terr,\n\t\t}\n\t}\n\n\tif (Object.keys(details).length)\n\t\targs.push(details)\n\n\t// err *as an arg* triggers a good display of the stacktrace\n\t// however it should be LAST because it takes a lot of room and \"hides\" further args\n\t// (tested on FF/Chrome/Safari)\n\tif (err)\n\t\targs.push(err)\n\n\treturn args\n}\n\nexport {\n\tFONT_FAMILY_BETTER_PROPORTIONAL,\n\tFONT_FAMILY_BETTER_MONOSPACE,\n\tLEVEL_TO_COLOR_STYLE,\n\tadd_styled_string,\n\tbuild_args,\n}\n","import {\n\tLogPayload,\n\tLogSink,\n} from '@offirmo/practical-logger-types'\n\nimport {\n\tLEVEL_TO_CONSOLE_METHOD,\n\tto_uniform_level,\n} from '../common'\nimport {\n\tFONT_FAMILY_BETTER_PROPORTIONAL,\n\tFONT_FAMILY_BETTER_MONOSPACE,\n\tLEVEL_TO_COLOR_STYLE,\n\tadd_styled_string,\n\tbuild_args,\n} from './common'\n\nfunction has_details_indicator(console_method_name: string): boolean {\n\treturn console_method_name === 'error'\n}\n\nconst HEADER_FONT_SIZE_STYLE = 'font-size: 10px'\nexport const sink: LogSink = (payload: Readonly<LogPayload>): void => {\n\tconst { level, name, msg, err, details } = payload\n\tconst console_method_name: string = LEVEL_TO_CONSOLE_METHOD[level]\n\tconst console_method: Console['log'] = (console as any)[console_method_name]\n\n\tlet line = ['']\n\n\tif (!has_details_indicator(console_method_name)) {\n\t\tline = add_styled_string(line, '▷', LEVEL_TO_COLOR_STYLE[level], 'font-size: 8px', FONT_FAMILY_BETTER_PROPORTIONAL, 'margin-left: .35em', 'margin-right: .5em')\n\t}\n\tline = add_styled_string(line, '[', LEVEL_TO_COLOR_STYLE[level], HEADER_FONT_SIZE_STYLE, FONT_FAMILY_BETTER_PROPORTIONAL)\n\tline = add_styled_string(line, to_uniform_level(level), LEVEL_TO_COLOR_STYLE[level], HEADER_FONT_SIZE_STYLE, FONT_FAMILY_BETTER_MONOSPACE)\n\tline = add_styled_string(line, '] ', LEVEL_TO_COLOR_STYLE[level], HEADER_FONT_SIZE_STYLE, FONT_FAMILY_BETTER_PROPORTIONAL)\n\tline = add_styled_string(line, '', 'font-size: unset')\n\n\tif (name) {\n\t\tline = add_styled_string(line, `${name} › `, LEVEL_TO_COLOR_STYLE[level], FONT_FAMILY_BETTER_PROPORTIONAL)\n\t}\n\tline = add_styled_string(line, msg, LEVEL_TO_COLOR_STYLE[level], FONT_FAMILY_BETTER_PROPORTIONAL)\n\n\tconsole_method(...build_args(line, payload))\n}\n\nexport default sink\n","import {\n\tLogPayload,\n\tLogSink,\n} from '@offirmo/practical-logger-types'\n\nimport {\n\tLEVEL_TO_CONSOLE_METHOD,\n\tto_uniform_level,\n} from '../common'\nimport {\n\tFONT_FAMILY_BETTER_PROPORTIONAL,\n\tFONT_FAMILY_BETTER_MONOSPACE,\n\tLEVEL_TO_COLOR_STYLE,\n\tadd_styled_string,\n\tbuild_args,\n} from './common'\n\nfunction has_details_indicator(console_method_name: string): boolean {\n\treturn console_method_name === 'error' || console_method_name === 'warn'\n}\n\nconst HEADER_FONT_SIZE_STYLE = 'font-size: 8px'\nconst MESSAGE_FONT_SIZE_STYLE = 'font-size: 11px'\n\nexport const sink: LogSink = (payload: Readonly<LogPayload>): void => {\n\tconst { level, name, msg, err, details: details_orginal } = payload\n\tconst console_method_name: string = LEVEL_TO_CONSOLE_METHOD[level]\n\tconst console_method: Console['log'] = (console as any)[console_method_name]\n\n\tlet line = ['']\n\n\tif (!has_details_indicator(console_method_name)) {\n\t\tline = add_styled_string(line, '▷', LEVEL_TO_COLOR_STYLE[level], 'font-size: 8px', FONT_FAMILY_BETTER_PROPORTIONAL, 'margin-left: .1em', 'margin-right: .2em')\n\t}\n\tline = add_styled_string(line, '[', LEVEL_TO_COLOR_STYLE[level], HEADER_FONT_SIZE_STYLE, FONT_FAMILY_BETTER_PROPORTIONAL)\n\tline = add_styled_string(line, to_uniform_level(level), LEVEL_TO_COLOR_STYLE[level], HEADER_FONT_SIZE_STYLE, FONT_FAMILY_BETTER_MONOSPACE)\n\tline = add_styled_string(line, '] ', LEVEL_TO_COLOR_STYLE[level], HEADER_FONT_SIZE_STYLE, FONT_FAMILY_BETTER_PROPORTIONAL)\n\tline = add_styled_string(line, '', 'font-size: unset')\n\n\tif (name) {\n\t\tline = add_styled_string(line, `${name} › `, LEVEL_TO_COLOR_STYLE[level], FONT_FAMILY_BETTER_PROPORTIONAL, MESSAGE_FONT_SIZE_STYLE)\n\t}\n\tline = add_styled_string(line, msg, LEVEL_TO_COLOR_STYLE[level], FONT_FAMILY_BETTER_PROPORTIONAL, MESSAGE_FONT_SIZE_STYLE)\n\n\tconsole_method(...build_args(line, payload))\n}\n\nexport default sink\n","import {\n\tLogPayload,\n\tLogSink,\n} from '@offirmo/practical-logger-types'\n\nimport {\n\tLEVEL_TO_CONSOLE_METHOD,\n\tto_uniform_level,\n} from '../common'\nimport {\n\tFONT_FAMILY_BETTER_PROPORTIONAL,\n\tFONT_FAMILY_BETTER_MONOSPACE,\n\tLEVEL_TO_COLOR_STYLE,\n\tadd_styled_string,\n\tbuild_args,\n} from './common'\n\nfunction has_details_indicator(console_method_name: string, details: any): boolean {\n\treturn details || console_method_name === 'error'\n}\n\nconst HEADER_FONT_SIZE_STYLE = 'font-size: 9px'\nexport const sink: LogSink = (payload: Readonly<LogPayload>): void => {\n\tconst { level, name, msg, err, details } = payload\n\tconst console_method_name: string = LEVEL_TO_CONSOLE_METHOD[level]\n\tconst console_method: Console['log'] = (console as any)[console_method_name]\n\n\tlet line = ['']\n\n\tif (!has_details_indicator(console_method_name, details)) {\n\t\tline = add_styled_string(line, '▷', LEVEL_TO_COLOR_STYLE[level], 'font-size: 10px', FONT_FAMILY_BETTER_PROPORTIONAL, 'margin-left: .15em', 'margin-right: .4em')\n\t}\n\tline = add_styled_string(line, '[', LEVEL_TO_COLOR_STYLE[level], HEADER_FONT_SIZE_STYLE, FONT_FAMILY_BETTER_PROPORTIONAL)\n\tline = add_styled_string(line, to_uniform_level(level), LEVEL_TO_COLOR_STYLE[level], HEADER_FONT_SIZE_STYLE, FONT_FAMILY_BETTER_MONOSPACE)\n\tline = add_styled_string(line, '] ', LEVEL_TO_COLOR_STYLE[level], HEADER_FONT_SIZE_STYLE, FONT_FAMILY_BETTER_PROPORTIONAL)\n\tline = add_styled_string(line, '', 'font-size: unset')\n\n\tif (name) {\n\t\tline = add_styled_string(line, `${name} › `, LEVEL_TO_COLOR_STYLE[level], FONT_FAMILY_BETTER_PROPORTIONAL)\n\t}\n\tline = add_styled_string(line, msg, LEVEL_TO_COLOR_STYLE[level], FONT_FAMILY_BETTER_PROPORTIONAL)\n\n\tconsole_method(...build_args(line, payload))\n}\n\nexport default sink\n","import {\n\tLogPayload,\n\tLogSink,\n} from '@offirmo/practical-logger-types'\n\nimport { SinkOptions } from '../types'\nimport { LEVEL_TO_CONSOLE_METHOD, to_uniform_level } from './common'\n\n\nexport default function create(options: Readonly<SinkOptions> = {}): LogSink {\n\treturn (payload: LogPayload): void => {\n\t\tconst { level, name, msg, err, details } = payload\n\t\tconst console_method_name: string = LEVEL_TO_CONSOLE_METHOD[level]\n\t\tconst console_method: Console['log'] = (console as any)[console_method_name]\n\n\t\tconst line = ['[', to_uniform_level(level), '] ']\n\n\t\tif (name) {\n\t\t\tline.push(`${name} › `)\n\t\t}\n\t\tline.push(msg)\n\n\t\tconst args: any[] = line\n\t\tif (Object.keys(details).length)\n\t\t\targs.push(details)\n\t\t// err should be last because it takes a lot of room and \"hides\" further args\n\t\tif (err)\n\t\t\targs.push(err)\n\n\t\tconsole_method(...args)\n\t}\n}\n","import { LogSink } from '@offirmo/practical-logger-types'\n\nimport { Browser, SinkOptions } from '../types'\nimport sink_firefox from './advanced/firefox'\nimport sink_chromium from './advanced/chromium'\nimport sink_safari from './advanced/safari'\nimport create_sink_no_css from './no-css'\n\n// TODO export that?\nfunction quick_detect_browser(): Browser {\n\t// https://stackoverflow.com/a/9851769/587407\n\t// https://dev.to/_elmahdim/safe-reliable-browser-sniffing-39bp\n\n\ttry {\n\t\tif ((window as any).InstallTrigger)\n\t\t\treturn 'firefox'\n\n\t\tif ((window as any).ApplePaySession)\n\t\t\treturn 'safari'\n\n\t\tif ((window as any).chrome)\n\t\t\treturn 'chromium'\n\t}\n\tcatch {\n\t\t/* ignore */\n\t}\n\n\treturn 'other'\n}\n\n\nexport function create(options: Readonly<SinkOptions> = {}): LogSink {\n\tif (options.useCss === false)\n\t\treturn create_sink_no_css(options)\n\n\tswitch(options.explicitBrowser || quick_detect_browser()) {\n\t\tcase 'firefox':\n\t\t\treturn sink_firefox\n\t\tcase 'safari':\n\t\t\treturn sink_safari\n\t\tcase 'chromium':\n\t\t\treturn sink_chromium\n\t\tdefault:\n\t\t\treturn create_sink_no_css(options)\n\t}\n}\n","// Note: the name of this file is because it appears in the dev tools!\n\nconst PATCHED_METHODS: Array<keyof Console> = [\n\t'debug', 'log', 'info', 'warn', 'error',\n\n\t'group', 'groupCollapsed', 'groupEnd',\n\n\t'table', 'trace', 'dir', 'dirxml', 'count',\n\n\t'assert',\n]\n\n/*\n\ngroup: ƒ group()\ngroupCollapsed: ƒ groupCollapsed()\ngroupEnd: ƒ groupEnd()\n\ndebug: ƒ debug()\nlog: ƒ log()\ninfo: ƒ info()\nwarn: ƒ warn()\nerror: ƒ error()\n\ntable: ƒ table()\ntrace: ƒ trace()\ndir: ƒ dir()\ndirxml: ƒ dirxml()\ncount: ƒ count()\n\n// tricky, need extra work\nclear: ƒ clear()\nassert: ƒ assert()\n\n// doesn't display anything:\ncountReset: ƒ countReset()\ntimeStamp: ƒ timeStamp()\n\n// accessors\ncontext: ƒ context()\nmemory: (...)\n\n// to sort\nprofile: ƒ profile()\nprofileEnd: ƒ profileEnd()\ntime: ƒ time()\ntimeEnd: ƒ timeEnd()\ntimeLog: ƒ timeLog()\n */\n\ninterface GroupInvocation {\n\tparams: any[]\n\tis_deployed: boolean\n\tis_effective: boolean\n}\n\ninterface Options {\n\tuncollapse_level?: 'warn' | 'error',\n\tlazy?: boolean\n\toriginal_console?: Console,\n}\n\nconst DEBUG = false\n\nfunction install({ uncollapse_level = 'warn', lazy = true, original_console = console }: Options = {}): void {\n\tif (DEBUG) console.log('install', { uncollapse_level, lazy })\n\n\tconst group_invocations: GroupInvocation[] = []\n\t// in node, group() calls console.log()\n\t// to prevent infinite loops\n\tlet in_original_call = false\n\n\tconst ORIGINAL_METHODS: { [k: string]: (...p: any[]) => void } = {}\n\tPATCHED_METHODS.forEach(k => {\n\t\tORIGINAL_METHODS[k] = (original_console as any)[k]\n\t})\n\n\tfunction better_group(...p: any[]): void {\n\t\tif (DEBUG) ORIGINAL_METHODS.log('>>> before group', { lazy, depth: group_invocations.length}, `\"${p[0]}\"`)\n\n\t\tgroup_invocations.push({\n\t\t\tparams: p,\n\t\t\tis_deployed: true,\n\t\t\tis_effective: !lazy,\n\t\t})\n\t\tif (!lazy) {\n\t\t\tin_original_call = true\n\t\t\tORIGINAL_METHODS.group(...p)\n\t\t\tin_original_call = false\n\t\t}\n\n\t\tif (DEBUG) ORIGINAL_METHODS.log('<<< after group', { depth: group_invocations.length})\n\t}\n\tfunction better_groupCollapsed(...p: any[]): void {\n\t\tif (DEBUG) ORIGINAL_METHODS.log('>>> before groupCollapsed', { lazy, depth: group_invocations.length}, `\"${p[0]}\"`)\n\n\t\tgroup_invocations.push({\n\t\t\tparams: p,\n\t\t\tis_deployed: false,\n\t\t\tis_effective: !lazy,\n\t\t})\n\t\tif (!lazy) {\n\t\t\tin_original_call = true\n\t\t\tORIGINAL_METHODS.groupCollapsed(...p)\n\t\t\tin_original_call = false\n\t\t}\n\n\t\tif (DEBUG) ORIGINAL_METHODS.log('after groupCollapsed', { depth: group_invocations.length})\n\t}\n\tfunction better_groupEnd(...p: any[]): void {\n\t\tif (DEBUG) ORIGINAL_METHODS.log('>>> before groupEnd', { lazy, depth: group_invocations.length}, `\"${p[0]}\"`)\n\n\t\tconst last_invocation = group_invocations.pop()\n\t\tif (last_invocation&& last_invocation.is_effective) {\n\t\t\tin_original_call = true\n\t\t\tORIGINAL_METHODS.groupEnd(...p)\n\t\t\tin_original_call = false\n\t\t}\n\n\t\tif (DEBUG) ORIGINAL_METHODS.log('<<< after groupEnd', { lazy, depth: group_invocations.length})\n\t}\n\n\tfunction better_output(original_method: Console['log'], uncollapse: boolean, ...p: any[]): void {\n\t\tif (in_original_call) {\n\t\t\treturn original_method(...p)\n\t\t}\n\t\tif (DEBUG) original_method('>>> before output', { depth: group_invocations.length}, `\"${p[0]}\"`)\n\n\t\t// lazily create groups\n\t\t// cancel collapsed if needed\n\t\tgroup_invocations.forEach(invocation => {\n\t\t\tconst { is_effective, is_deployed, params } = invocation\n\t\t\tif (is_effective) return\n\n\t\t\tif (DEBUG) original_method('--- lazy call')\n\n\t\t\tif (uncollapse || is_deployed) {\n\t\t\t\tin_original_call = true\n\t\t\t\tORIGINAL_METHODS.group(...params)\n\t\t\t\tin_original_call = false\n\t\t\t\tinvocation.is_deployed = true\n\t\t\t}\n\t\t\telse {\n\t\t\t\tin_original_call = true\n\t\t\t\tORIGINAL_METHODS.groupCollapsed(...params)\n\t\t\t\tin_original_call = false\n\t\t\t\tinvocation.is_deployed = false\n\t\t\t}\n\t\t\tinvocation.is_effective = true\n\t\t})\n\n\t\tif (DEBUG) original_method('--- output')\n\n\t\t// uncollapse parents if needed\n\t\tif (uncollapse) {\n\t\t\tconst lowest_uncollapsed_index = group_invocations.findIndex(\n\t\t\t\t({ is_deployed }) => !is_deployed,\n\t\t\t)\n\t\t\twhile (\n\t\t\t\tlowest_uncollapsed_index >= 0\n\t\t\t\t&& group_invocations.length\n\t\t\t\t&& group_invocations.length > lowest_uncollapsed_index\n\t\t\t) {\n\t\t\t\tbetter_groupEnd()\n\t\t\t\tORIGINAL_METHODS.debug('(forced break out of collapsed group ↑ due to critical log ↓)')\n\t\t\t}\n\t\t}\n\n\t\tif (DEBUG) original_method('--- output')\n\n\t\toriginal_method(...p)\n\t\tif (DEBUG) original_method('<<<after output', { depth: group_invocations.length})\n\t}\n\n\tconst patched = new Set<keyof Console>()\n\n\tconsole.group = better_group\n\tpatched.add('group')\n\tconsole.groupCollapsed = better_groupCollapsed\n\tpatched.add('groupCollapsed')\n\tconsole.groupEnd = better_groupEnd\n\tpatched.add('groupEnd')\n\n\tconsole.warn = better_output.bind(null, ORIGINAL_METHODS.warn, uncollapse_level === 'warn')\n\tpatched.add('warn')\n\tconsole.error = better_output.bind(null, ORIGINAL_METHODS.error, true)\n\tpatched.add('error')\n\tconsole.assert = (assertion: boolean, ...args: any[]) => {\n\t\tif (assertion) {\n\t\t\t// do nothing\n\t\t}\n\t\telse {\n\t\t\tbetter_output(ORIGINAL_METHODS.assert, true, assertion, ...args)\n\t\t}\n\t}\n\tpatched.add('assert')\n\n\tPATCHED_METHODS.forEach(method => {\n\t\tif (patched.has(method)) return\n\n\t\t;(console as any as { [k: string]: Console['log'] })[method] = better_output.bind(null, ORIGINAL_METHODS[method], false)\n\t\tpatched.add(method)\n\t})\n}\n\nexport { install as improve_console_groups }\nexport default install\n","import tiny_singleton from '@offirmo/tiny-singleton'\nimport { LogSink, Logger, LoggerCreationParams } from '@offirmo/practical-logger-types'\nimport { createLogger as createLoggerCore } from '@offirmo/practical-logger-core'\n\nimport { SinkOptions } from './types'\nimport { create } from './sinks'\nimport improve_console_groups from './better-console-groups/practical-logger'\n\nconst ORIGINAL_CONSOLE = console\n\n\nconst _install_groups_or_not_once_for_all = tiny_singleton((active: boolean) => { if (active) improve_console_groups() })\n\nexport function createLogger(p: Readonly<LoggerCreationParams<SinkOptions>> = {}): Logger {\n\t_install_groups_or_not_once_for_all(p.sinkOptions?.betterGroups !== false)\n\n\tconst sink: LogSink = p.sinkOptions?.sink || create(p.sinkOptions)\n\n\tconst { group, groupCollapsed, groupEnd } = ORIGINAL_CONSOLE\n\treturn {\n\t\t...createLoggerCore(p, sink),\n\t\tgroup,\n\t\tgroupCollapsed,\n\t\tgroupEnd,\n\t}\n}\n\nexport * from '@offirmo/practical-logger-types'\nexport { DEFAULT_LOG_LEVEL, DEFAULT_LOGGER_KEY } from '@offirmo/practical-logger-core'\n","const { ALL_LOG_LEVELS } = require('..')\n\nfunction demo_legacy_console() {\n\tconsole.log('------------↓ For comparison: Legacy console: levels, in order ↓-----------')\n\tconsole.debug('Legacy console > message with level \"debug\"', { level: 'debug', foo: 42 })\n\tconsole.log('Legacy console > message with level \"log\"', { level: 'log', foo: 42 })\n\tconsole.info('Legacy console > message with level \"info\"', { level: 'info', foo: 42 })\n\tconsole.warn('Legacy console > message with level \"warn\"', { level: 'warn', foo: 42 })\n\tconsole.error('Legacy console > message with level \"error\"', { level: 'error', foo: 42 })\n}\n\n\nfunction demo_logger_basic_usage(logger, in_group = true) {\n\tconsole[in_group ? 'group' : 'log']('------------↓ Practical logger demo: example real usage ↓------------')\n\n\tlogger.silly('Hi!')\n\tlogger.trace('App starting...', { version: '1.2.3' })\n\n\tconst bob = {\n\t\tfirstName: 'Bob',\n\t\tlastName: 'Dupont',\n\t\tage: 42,\n\t}\n\n\tlogger.verbose('Current user already logged in', { user: bob })\n\n\tlogger.verbose('Restoring state from cloud…')\n\n\tlogger.warn('Restoration of state is taking more time than expected', { elapsedMs: 3000 })\n\n\tconst err = new Error('Timeout loading state!')\n\terr.httpStatus = 418 // to check that custom props are preserved\n\n\tlogger.error(undefined, err)\n\n\tlogger.info('Reverting to last known local state')\n\n\tlogger.log('Test of a very very long message: \"In publishing and graphic design, Lorem ipsum is a placeholder text commonly used to demonstrate the visual form of a document or a typeface without relying on meaningful content. Lorem ipsum may be used as a placeholder before final copy is available.\"')\n\n\tlogger.trace('Test of a very very long data:', {\n\t\t'What is Lorem Ipsum?':\n\t\t\t`Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.`,\n\t\t'Why do we use it?':\n\t\t\t`It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).`,\n\t\t'Where does it come from?':\n\t\t\t`Contrary to popular belief, Lorem Ipsum is not simply random text. It has roots in a piece of classical Latin literature from 45 BC, making it over 2000 years old. Richard McClintock, a Latin professor at Hampden-Sydney College in Virginia, looked up one of the more obscure Latin words, consectetur, from a Lorem Ipsum passage, and going through the cites of the word in classical literature, discovered the undoubtable source. Lorem Ipsum comes from sections 1.10.32 and 1.10.33 of \"de Finibus Bonorum et Malorum\" (The Extremes of Good and Evil) by Cicero, written in 45 BC. This book is a treatise on the theory of ethics, very popular during the Renaissance. The first line of Lorem Ipsum, \"Lorem ipsum dolor sit amet..\", comes from a line in section 1.10.32.`,\n\t})\n\n\tif (in_group) console.groupEnd()\n}\n\nfunction demo_logger_levels(logger) {\n\tconsole.log('------------↓ Practical logger demo: all levels, in order ↓------------')\n\t;[...ALL_LOG_LEVELS].reverse().forEach(level =>\n\t\tlogger[level](`message with level \"${level}\"`, { level, foo: 42 }),\n\t)\n\n\t/*\nconsole.groupCollapsed('in group')\nALL_LOG_LEVELS.forEach(level =>\n    logger[level](`msg with level \"${level}\"`)\n)\nconsole.groupEnd()\n*/\n}\n\nfunction demo_group(logger) {\n\tconsole.log('------------↓ logger demo: group ↓------------')\n\n\tlogger.group('level 1 (NOT collapsed)')\n\t\tlogger.log('in level 1')\n\n\t\tlogger.groupCollapsed('level 2a (collapsed)')\n\t\t\tlogger.log('in level 2a')\n\t\tlogger.groupEnd()\n\n\t\tlogger.groupCollapsed('level 2b (collapsed)')\n\t\t\t// no output\n\t\t\tlogger.group('level 3a (NOT collapsed)')\n\t\t\t\t// no output\n\t\t\t\tconsole.assert(true)\n\t\t\tlogger.groupEnd()\n\t\tlogger.groupEnd()\n\n\t\tlogger.groupCollapsed('level 2c (collapsed)')\n\t\t\t// no output\n\t\t\tlogger.warn('warn from level 2c!')\n\t\t\tlogger.error(new Error('error from level 2c!'))\n\t\tlogger.groupEnd()\n\n\t\tlogger.groupCollapsed('level 2d (collapsed)')\n\t\t\tlogger.log('in level 2d')\n\t\t\tlogger.group('level 3b (NOT collapsed)')\n\t\t\t\tlogger.warn('warn from level 3b!')\n\t\t\t\tlogger.error(new Error('error from level 3b!'))\n\t\t\t\tlogger.log('in level 3b')\n\t\t\tlogger.groupEnd()\n\t\t\tlogger.log('in level 2d')\n\t\tlogger.groupEnd()\n\n\t\tlogger.groupCollapsed('level 2e (collapsed)')\n\t\t\tlogger.log('in level 2e')\n\t\t\tconsole.assert(false, 'foo')\n\t\tlogger.groupEnd()\n\n\t\tlogger.log('where am I? (should be in level 1)')\n\tlogger.groupEnd()\n\n\tlogger.groupEnd()\n\tlogger.groupEnd()\n}\n\nfunction demo_incorrect_logger_invocations(logger) {\n\tconst bob = {\n\t\tfirstName: 'Bob',\n\t\tlastName: 'Dupont',\n\t\tage: 42,\n\t}\n\n\tconst more = 'some stuff'\n\n\tconst err = new Error('Timeout loading state!')\n\terr.httpStatus = 418 // to check that custom props are preserved\n\n\tconsole.group('------------↓ logger demo: incorrect invocation (bunyan style) ↓------------')\n\tlogger.info()\n\n\tlogger.info('hi')\n\tlogger.info('hi %s', bob, more)\n\n\tlogger.info({foo: 'bar'}, 'hi')\n\n\tlogger.info(err)\n\tlogger.info(err, 'more on this: %s', more)\n\n\tlogger.info({foo: 'bar', err: err}, 'some msg about this error')\n\tlogger.warn('foo', 'bar', 42)\n\tconsole.groupEnd()\n}\n\nfunction demo_logger_api(getLogger) {\n\tconsole.log('------------↓ logger creation and basic usage ↓------------')\n\tconst root_logger = getLogger({\n\t\tsuggestedLevel: 'silly',\n\t})\n\troot_logger.log('Starting up')\n\n\tconst logger = getLogger({\n\t\tname: 'LibSharedDemo',\n\t\tsuggestedLevel: 'silly',\n\t})\n\n\tdemo_logger_basic_usage(logger)\n\n\tdemo_logger_levels(logger)\n\n\tdemo_group(logger)\n\n\tdemo_incorrect_logger_invocations(logger)\n}\n\nfunction demo_error(logger, in_group = true) {\n\tconsole[in_group ? 'group' : 'log']('------------↓ logger demo: error display ↓------------')\n\n\tfunction foo() {\n\t\tfunction bar() {\n\t\t\tconst err = new Error('Test error!')\n\t\t\terr.statusCode = 1234\n\t\t\terr.details = {\n\t\t\t\thello: 42,\n\t\t\t}\n\n\t\t\tthrow err\n\t\t}\n\t\tbar()\n\t}\n\n\ttry {\n\t\tfoo()\n\t}\n\tcatch (err) {\n\t\tlogger.log(err)\n\t\tlogger.log('message', err)\n\t\tlogger.log('message', { some: 'stuff', err })\n\t\tlogger.error(err)\n\t\tlogger.error('message', err)\n\t\tlogger.error('message', { some: 'stuff', err })\n\t\t//logger.error('message', { some: 'stuff' }, err)\n\t\t//logger.error('message', err, { some: 'stuff' })\n\t\tlogger.error('message', { some: 'stuff' })\n\t}\n\n\tif (in_group) console.groupEnd()\n}\n\nfunction demo_devtools_fonts() {\n\tconsole.group('------------↓ available font styles ↓------------')\n\tconsole.log('default: ABCdef012')\n\n\t;[\n\t\t'-apple-system',\n\t\t'BlinkMacSystemFont',\n\t\t'\"avenir next\"',\n\t\t'avenir',\n\t\t'\"Segoe UI\"',\n\t\t'\"lucida grande\"',\n\t\t'\"helvetica neue\"',\n\t\t'helvetica',\n\t\t'\"Fira Sans\"',\n\t\t'roboto',\n\t\t//'noto',\n\t\t//'\"Droid Sans\"',\n\t\t//'cantarell',\n\t\t//'oxygen',\n\t\t//'ubuntu',\n\t\t//'\"franklin gothic medium\"',\n\t\t//'\"century gothic\"',\n\t\t'\"Liberation Sans\"',\n\t\t'sans-serif',\n\t\t'\"dejavu sans mono\"',\n\t\t'\"Fira Code\"',\n\t\t'Menlo',\n\t\t'Consolas',\n\t\t'\"Lucida Console\"',\n\t\t'\"Courier New\"',\n\t\t'monospace',\n\t].forEach(font => console.log(`%c${font}: ABCdefi012 %cABCdefi012`, `font-family: ${font};`, 'font-family: unset;'))\n\tconsole.groupEnd()\n}\n\nmodule.exports = {\n\tdemo_legacy_console,\n\tdemo_logger_basic_usage,\n\tdemo_logger_levels,\n\tdemo_error,\n\tdemo_group,\n\tdemo_incorrect_logger_invocations,\n\tdemo_logger_api,\n\tdemo_devtools_fonts,\n}\n","import { createLogger } from '@offirmo/practical-logger-browser'\n\nimport {\n\tdemo_logger_basic_usage,\n\tdemo_logger_levels,\n\tdemo_error,\n\tdemo_group,\n\tdemo_logger_api,\n\n\tdemo_incorrect_logger_invocations,\n\tdemo_legacy_console,\n\tdemo_devtools_fonts,\n} from '@offirmo/practical-logger-core/doc/shared-demo'\n\n//demo_legacy_console()\n\nconst logger = createLogger({\n\tsuggestedLevel: 'warn',\n})\nlogger.log('hello from logger!')\n\nconst demoLogger = createLogger({\n\tname: 'Demo',\n\tsuggestedLevel: 'silly',\n})\ndemoLogger.log('hello from demoLogger!', { bar: 42, baz: 33 })\n\nconst state = {\n\ttarget: undefined as undefined | 'browser' | 'node' | 'module',\n\tlast_demo_launched: null as null | string,\n}\n\nconst target_envs = [\n\t'browser',\n\t'node',\n\t'module',\n]\n\nconst demos = {\n\t'all-levels': (l) => {\n\t\tdemo_legacy_console()\n\t\tdemo_logger_levels(l)\n\t},\n\t'basic': (l) => demo_logger_basic_usage(l, false),\n\t'error': (l) => demo_error(l, false),\n\t'groups': demo_group,\n}\n\nfunction run_demo(demo_id: string) {\n\tdemos[demo_id](demoLogger)\n\tstate.last_demo_launched = demo_id\n}\n\nfunction render() {\n\tObject.keys(demos).forEach(demo_id => {\n\t\tdocument.getElementById(`demo-${demo_id}`).removeAttribute('open')\n\t})\n\tif (state.last_demo_launched) {\n\t\tdocument.getElementById(`demo-${state.last_demo_launched}`).setAttribute('open', 'true')\n\t}\n\n\ttarget_envs.forEach(demo_id => {\n\t})\n}\nrender()\n\n/// event delegation\ndocument.addEventListener('click', event => {\n\tresolution: {\n\t\ttry {\n\t\t\tconst { target: clickedElement } = event\n\t\t\tif (!clickedElement)\n\t\t\t\tthrow new Error('click event has no target!')\n\n\t\t\tconst demo_id = Object.keys(demos).find(id => clickedElement.matches(`#btn-demo-${id}`))\n\t\t\tif (demo_id) {\n\t\t\t\trun_demo(demo_id)\n\t\t\t\tbreak resolution\n\t\t\t}\n\n\t\t\tlogger.trace('Event delegation: unknown click target:', { clickedElement })\n\t\t} catch (err) {\n\t\t\tlogger.error('processingClick', { err })\n\t\t}\n\t}\n\n\trender()\n})\n"]}